# 📖 优化功能快速参考

一页纸快速查找所有新功能的使用方法。

## 🚀 快速开始

```typescript
import { Editor, lightweightConfig } from '@ldesign/editor'

// 最简单的方式（性能优先）
const editor = new Editor(lightweightConfig)
```

## 📦 按需加载

```typescript
import { getPluginRegistry } from '@ldesign/editor'

const registry = getPluginRegistry()

// 注册插件（懒加载）
registry.register('image', () => import('./ImagePlugin'), {}, {
  enabled: true,
  lazy: true,
  priority: 50
})

// 需要时加载
await registry.load('image')

// 启用/禁用
await registry.enable('ai')
await registry.disable('video')
```

## ⚙️ 配置管理

```typescript
import { getConfigManager } from '@ldesign/editor'

const config = getConfigManager()

// 快捷方法
config.setIconSet('feather')
config.setTheme('dark')
await config.setLocale('en-US')

// 导出/导入
const json = config.exportConfig()
localStorage.setItem('config', json)

const saved = localStorage.getItem('config')
config.importConfig(saved!)
```

## 🎨 图标系统

```typescript
import { getIconManager } from '@ldesign/editor'

const icons = getIconManager()

// 切换图标集
icons.setDefaultIconSet('material')

// 渲染图标
const icon = icons.createIconElement('bold', { size: 24 })

// 搜索图标
const results = icons.searchIcons('arrow')
```

## 🌈 主题系统

```typescript
import { getThemeManager } from '@ldesign/editor'

const theme = getThemeManager()

// 切换主题
theme.setTheme('dark')

// 跟随系统
theme.followSystemTheme()

// 自定义主题
theme.addCustomTheme(myTheme)
```

## 🌍 多语言

```typescript
import { getI18n, t } from '@ldesign/editor'

const i18n = getI18n()

// 切换语言
await i18n.setLocale('en-US')

// 翻译
const text = t('editor.toolbar.bold')
```

## 🎛️ 工具栏管理

```typescript
import { ToolbarManager } from '@ldesign/editor'

const toolbar = new ToolbarManager(editor, {
  lazyLoad: true,
  groups: [
    {
      name: 'format',
      items: ['bold', 'italic'],
      visible: true
    }
  ]
})

// 显示/隐藏
toolbar.hideItem('video')
toolbar.showGroup('advanced')
```

## 🏭 UI组件工厂

```typescript
import { createButton, createInput, createSelect } from '@ldesign/editor'

// 创建按钮
const btn = createButton({
  label: '保存',
  icon: 'save',
  type: 'primary',
  onClick: () => save()
})

// 创建输入框
const input = createInput({
  placeholder: '输入...',
  onChange: (value) => console.log(value)
})

// 创建下拉框
const select = createSelect({
  options: [
    { label: '选项1', value: 1 },
    { label: '选项2', value: 2 }
  ],
  onChange: (value) => console.log(value)
})
```

## 📊 性能监控

```typescript
import { getPerformanceMonitor } from '@ldesign/editor'

const monitor = getPerformanceMonitor()

// 测量性能
monitor.start('render')
// ... 执行操作
const time = monitor.end('render')

// 获取指标
const metrics = monitor.getMetrics()
console.log(`FPS: ${metrics.fps}`)
console.log(`内存: ${metrics.memoryUsage}MB`)

// 生成报告
console.log(monitor.generateReport())
```

## 🛡️ 错误处理

```typescript
import { getErrorBoundary, withErrorBoundary } from '@ldesign/editor'

// 包装函数
const safeFn = withErrorBoundary(
  riskyFunction,
  'myPlugin',
  fallbackFunction
)

// 获取错误信息
const boundary = getErrorBoundary()
const errors = boundary.getErrors('myPlugin')
console.log(boundary.generateReport())
```

## 🤖 AI功能

```typescript
import { getAIService } from '@ldesign/editor'

const ai = getAIService()

// 配置API密钥
ai.updateApiKey('openai', 'your-key')
ai.updateApiKey('claude', 'your-key')

// 切换提供商
ai.setProvider('openai')

// 使用AI
const result = await ai.correct('文本内容')
const suggestion = await ai.suggest('文本内容')
```

## 📤 上传进度

```typescript
import { showUploadProgress } from '@ldesign/editor'

const progress = showUploadProgress({
  fileName: 'image.jpg',
  fileSize: 1024000,
  onCancel: () => console.log('取消上传')
})

// 更新进度
progress.updateProgress(50, '上传中...')

// 完成
progress.success('上传完成！')

// 或失败
progress.error('上传失败')
```

## 🎛️ 设置面板

```typescript
import { showSettingsPanel } from '@ldesign/editor'

showSettingsPanel({
  width: '600px',
  onSave: (config) => {
    console.log('配置已保存:', config)
  },
  onClose: () => {
    console.log('面板已关闭')
  }
})
```

## 🔧 工具函数

```typescript
import { debounce, throttle, LRUCache, retry } from '@ldesign/editor'

// 防抖
const search = debounce((text) => {
  // 搜索逻辑
}, 300)

// 节流
const scroll = throttle(() => {
  // 滚动处理
}, 100)

// LRU缓存
const cache = new LRUCache(100)
cache.set('key', 'value')
const value = cache.get('key')

// 重试
const result = await retry(
  async () => fetch('/api'),
  { maxAttempts: 3, delay: 1000 }
)
```

## 📋 预设配置

```typescript
import {
  lightweightConfig,      // 性能优先
  fullFeaturedConfig,     // 功能完整
  editorConfigExample     // 完整示例
} from '@ldesign/editor/config'

const editor = new Editor(lightweightConfig)
```

## 🎨 自定义插件

```typescript
import { BasePlugin } from '@ldesign/editor'

class MyPlugin extends BasePlugin {
  protected getDefaultConfig() {
    return {
      enabled: true,
      myOption: 'value'
    }
  }
  
  protected async onInit() {
    const editor = this.getEditor()
    // 初始化逻辑
  }
  
  protected async onDestroy() {
    // 清理逻辑
  }
}

// 注册插件
registry.register('myPlugin', () => new MyPlugin('myPlugin', {}))
```

## 📱 响应式配置

```typescript
const isMobile = window.innerWidth < 768

const config = isMobile ? lightweightConfig : fullFeaturedConfig

const toolbar = new ToolbarManager(editor, {
  compact: isMobile,
  showLabels: !isMobile
})
```

## 🔗 常用链接

| 文档 | 链接 |
|------|------|
| 快速开始 | [docs/guide/quick-start-optimized.md](./docs/guide/quick-start-optimized.md) |
| 定制化指南 | [docs/guide/customization.md](./docs/guide/customization.md) |
| 性能优化 | [docs/guide/performance-optimization.md](./docs/guide/performance-optimization.md) |
| 示例代码 | [docs/examples/customization-example.md](./docs/examples/customization-example.md) |
| 性能演示 | [examples/performance-demo.html](./examples/performance-demo.html) |
| 测试清单 | [tests/功能测试清单.md](./tests/功能测试清单.md) |

## 💡 常见问题

**Q: 如何减少加载时间？**
```typescript
// 使用轻量级配置
import { lightweightConfig } from '@ldesign/editor'
const editor = new Editor(lightweightConfig)
```

**Q: 如何禁用功能？**
```typescript
const registry = getPluginRegistry()
await registry.disable('ai')
await registry.disable('table')
```

**Q: 如何监控性能？**
```typescript
const monitor = getPerformanceMonitor()
console.log(monitor.generateReport())
```

**Q: 如何保存配置？**
```typescript
const config = getConfigManager()
const json = config.exportConfig()
localStorage.setItem('config', json)
```

---

**提示**: 所有API都支持TypeScript智能提示！

**版本**: 1.1.0  
**最后更新**: 2025-10-20





