{"version":3,"file":"AutoOptimizer.cjs","sources":["../../src/utils/AutoOptimizer.ts"],"sourcesContent":["/**\r\n * Ëá™Âä®‰ºòÂåñÂô®\r\n * Ê†πÊçÆÊÄßËÉΩÁõëÊéßËá™Âä®Ë∞ÉÊï¥ÈÖçÁΩÆ‰ª•‰ºòÂåñÊÄßËÉΩ\r\n */\r\n\r\nimport type { PerformanceMetrics } from './PerformanceMonitor'\r\nimport { EventEmitter } from '../core/EventEmitter'\r\nimport { getFeatureFlags } from '../core/FeatureFlags'\r\nimport { getLazyLoader } from '../core/LazyLoader'\r\nimport { getPerformanceMonitor } from './PerformanceMonitor'\r\n\r\n/**\r\n * ‰ºòÂåñÂª∫ËÆÆ\r\n */\r\nexport interface OptimizationSuggestion {\r\n  type: 'feature' | 'memory' | 'loading' | 'rendering'\r\n  severity: 'critical' | 'warning' | 'info'\r\n  message: string\r\n  action: string\r\n  autoFixable: boolean\r\n  fix?: () => void\r\n}\r\n\r\n/**\r\n * ‰ºòÂåñÈÖçÁΩÆ\r\n */\r\nexport interface AutoOptimizerConfig {\r\n  enabled: boolean\r\n  checkInterval: number // Ê£ÄÊü•Èó¥ÈöîÔºàmsÔºâ\r\n  autoFix: boolean // ÊòØÂê¶Ëá™Âä®‰øÆÂ§ç\r\n  thresholds: {\r\n    minFPS: number\r\n    maxMemory: number\r\n    maxLoadTime: number\r\n  }\r\n}\r\n\r\n/**\r\n * Ëá™Âä®‰ºòÂåñÂô®Á±ª\r\n */\r\nexport class AutoOptimizer extends EventEmitter {\r\n  private config: AutoOptimizerConfig\r\n  private monitor = getPerformanceMonitor()\r\n  private features = getFeatureFlags()\r\n  private loader = getLazyLoader()\r\n  private checkTimer: any = null\r\n  private suggestions: OptimizationSuggestion[] = []\r\n\r\n  constructor(config: Partial<AutoOptimizerConfig> = {}) {\r\n    super()\r\n\r\n    this.config = {\r\n      enabled: true,\r\n      checkInterval: 30000, // 30Áßí\r\n      autoFix: false,\r\n      thresholds: {\r\n        minFPS: 50,\r\n        maxMemory: 100,\r\n        maxLoadTime: 2000,\r\n      },\r\n      ...config,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂêØÂä®Ëá™Âä®‰ºòÂåñ\r\n   */\r\n  start(): void {\r\n    if (!this.config.enabled)\r\n      return\r\n\r\n    this.checkTimer = setInterval(() => {\r\n      this.check()\r\n    }, this.config.checkInterval)\r\n\r\n    // Á´ãÂç≥ÊâßË°å‰∏ÄÊ¨°Ê£ÄÊü•\r\n    this.check()\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÊ≠¢Ëá™Âä®‰ºòÂåñ\r\n   */\r\n  stop(): void {\r\n    if (this.checkTimer) {\r\n      clearInterval(this.checkTimer)\r\n      this.checkTimer = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊü•Âπ∂ÁîüÊàêÂª∫ËÆÆ\r\n   */\r\n  check(): void {\r\n    this.suggestions = []\r\n\r\n    const metrics = this.monitor.getMetrics()\r\n    const featureStats = this.features.getStats()\r\n    const loaderStats = this.loader.getStats()\r\n\r\n    // Ê£ÄÊü•FPS\r\n    this.checkFPS(metrics)\r\n\r\n    // Ê£ÄÊü•ÂÜÖÂ≠ò\r\n    this.checkMemory(metrics)\r\n\r\n    // Ê£ÄÊü•Âä†ËΩΩÊó∂Èó¥\r\n    this.checkLoadTime(metrics)\r\n\r\n    // Ê£ÄÊü•ÂäüËÉΩ‰ΩøÁî®\r\n    this.checkFeatureUsage(featureStats, loaderStats)\r\n\r\n    // Ëß¶Âèë‰∫ã‰ª∂\r\n    if (this.suggestions.length > 0) {\r\n      this.emit('suggestions', this.suggestions)\r\n\r\n      // Ëá™Âä®‰øÆÂ§ç\r\n      if (this.config.autoFix)\r\n        this.autoFix()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊü•FPS\r\n   */\r\n  private checkFPS(metrics: PerformanceMetrics): void {\r\n    if (metrics.fps < this.config.thresholds.minFPS) {\r\n      this.suggestions.push({\r\n        type: 'rendering',\r\n        severity: metrics.fps < 40 ? 'critical' : 'warning',\r\n        message: `FPSËøá‰Ωé (${metrics.fps})ÔºåÂΩ±ÂìçÁî®Êà∑‰ΩìÈ™å`,\r\n        action: 'Á¶ÅÁî®‰∏çÂ∏∏Áî®ÁöÑÂäüËÉΩÔºåÂêØÁî®ËôöÊãüÊªöÂä®',\r\n        autoFixable: true,\r\n        fix: () => {\r\n          // Á¶ÅÁî®ÈùûÊ†∏ÂøÉÂäüËÉΩ\r\n          this.features.disable('video')\r\n          this.features.disable('audio')\r\n          this.features.disable('collaboration')\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊü•ÂÜÖÂ≠ò\r\n   */\r\n  private checkMemory(metrics: PerformanceMetrics): void {\r\n    if (metrics.memoryUsage > this.config.thresholds.maxMemory) {\r\n      this.suggestions.push({\r\n        type: 'memory',\r\n        severity: metrics.memoryUsage > 150 ? 'critical' : 'warning',\r\n        message: `ÂÜÖÂ≠ò‰ΩøÁî®ËøáÈ´ò (${metrics.memoryUsage}MB)`,\r\n        action: 'Ê∏ÖÁêÜÁºìÂ≠òÔºåÁ¶ÅÁî®‰∏çÂøÖË¶ÅÁöÑÂäüËÉΩ',\r\n        autoFixable: true,\r\n        fix: () => {\r\n          // Ê∏ÖÁêÜÁºìÂ≠ò\r\n          const iconManager = require('../icons/IconManager').getIconManager()\r\n          if (iconManager) {\r\n            // Ê∏ÖÁêÜÂõæÊ†áÁºìÂ≠òÁöÑÊñπÊ≥ïÈúÄË¶ÅÊö¥Èú≤\r\n          }\r\n\r\n          // Á¶ÅÁî®È´òÂÜÖÂ≠òÂäüËÉΩ\r\n          this.features.disable('collaboration')\r\n          this.features.disable('version-control')\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊü•Âä†ËΩΩÊó∂Èó¥\r\n   */\r\n  private checkLoadTime(metrics: PerformanceMetrics): void {\r\n    if (metrics.loadTime > this.config.thresholds.maxLoadTime) {\r\n      this.suggestions.push({\r\n        type: 'loading',\r\n        severity: metrics.loadTime > 3000 ? 'critical' : 'warning',\r\n        message: `Âä†ËΩΩÊó∂Èó¥ËøáÈïø (${metrics.loadTime}ms)`,\r\n        action: 'ÂêØÁî®ÊáíÂä†ËΩΩÔºåÂáèÂ∞ëÂàùÂßãÂä†ËΩΩÁöÑÂäüËÉΩ',\r\n        autoFixable: true,\r\n        fix: () => {\r\n          // Â∞ÜÊõ¥Â§öÂäüËÉΩËÆæÁΩÆ‰∏∫ÊáíÂä†ËΩΩ\r\n          const allFeatures = this.features.getAllFeatures()\r\n          allFeatures.forEach((f) => {\r\n            if (!['basic-editing', 'selection', 'history', 'bold', 'italic'].includes(f.id))\r\n              f.lazy = true\r\n          })\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê£ÄÊü•ÂäüËÉΩ‰ΩøÁî®\r\n   */\r\n  private checkFeatureUsage(featureStats: any, loaderStats: any): void {\r\n    // Ê£ÄÊü•Â∑≤ÂêØÁî®‰ΩÜÊú™‰ΩøÁî®ÁöÑÂäüËÉΩ\r\n    const enabledButNotLoaded = featureStats.enabled - featureStats.loaded\r\n\r\n    if (enabledButNotLoaded > 5) {\r\n      this.suggestions.push({\r\n        type: 'feature',\r\n        severity: 'info',\r\n        message: `Êúâ${enabledButNotLoaded}‰∏™Â∑≤ÂêØÁî®ÁöÑÂäüËÉΩÊú™Ë¢´‰ΩøÁî®`,\r\n        action: 'ËÄÉËôëÁ¶ÅÁî®Ëøô‰∫õÂäüËÉΩ‰ª•ËäÇÁúÅËµÑÊ∫ê',\r\n        autoFixable: false,\r\n      })\r\n    }\r\n\r\n    // Ê£ÄÊü•Âä†ËΩΩÈòüÂàó\r\n    if (loaderStats.queued > 3) {\r\n      this.suggestions.push({\r\n        type: 'loading',\r\n        severity: 'warning',\r\n        message: `Âä†ËΩΩÈòüÂàóËøáÈïø (${loaderStats.queued}‰∏™)`,\r\n        action: 'Â¢ûÂä†Âπ∂ÂèëÂä†ËΩΩÊï∞ÈáèÊàñÂáèÂ∞ëÂêØÁî®ÁöÑÂäüËÉΩ',\r\n        autoFixable: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ëá™Âä®‰øÆÂ§ç\r\n   */\r\n  private autoFix(): void {\r\n    const fixable = this.suggestions.filter(s => s.autoFixable)\r\n\r\n    fixable.forEach((suggestion) => {\r\n      if (suggestion.fix) {\r\n        try {\r\n          suggestion.fix()\r\n          this.emit('auto-fixed', suggestion)\r\n        }\r\n        catch (error) {\r\n          console.error('Auto-fix failed:', error)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Ëé∑ÂèñÂª∫ËÆÆ\r\n   */\r\n  getSuggestions(): OptimizationSuggestion[] {\r\n    return [...this.suggestions]\r\n  }\r\n\r\n  /**\r\n   * Â∫îÁî®Âª∫ËÆÆ\r\n   */\r\n  applySuggestion(index: number): void {\r\n    const suggestion = this.suggestions[index]\r\n\r\n    if (suggestion && suggestion.fix) {\r\n      suggestion.fix()\r\n      this.emit('suggestion-applied', suggestion)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÁîüÊàê‰ºòÂåñÊä•Âëä\r\n   */\r\n  generateReport(): string {\r\n    let report = 'Ëá™Âä®‰ºòÂåñÊä•Âëä\\n'\r\n    report += '============\\n\\n'\r\n\r\n    const metrics = this.monitor.getMetrics()\r\n    report += 'ÂΩìÂâçÊÄßËÉΩ:\\n'\r\n    report += `  FPS: ${metrics.fps}\\n`\r\n    report += `  ÂÜÖÂ≠ò: ${metrics.memoryUsage}MB\\n`\r\n    report += `  Âä†ËΩΩÊó∂Èó¥: ${metrics.loadTime}ms\\n\\n`\r\n\r\n    if (this.suggestions.length === 0) {\r\n      report += '‚úÖ ÊÄßËÉΩËâØÂ•ΩÔºåÊó†ÈúÄ‰ºòÂåñ\\n'\r\n    }\r\n    else {\r\n      report += `‰ºòÂåñÂª∫ËÆÆ (${this.suggestions.length}Êù°):\\n`\r\n\r\n      const critical = this.suggestions.filter(s => s.severity === 'critical')\r\n      const warnings = this.suggestions.filter(s => s.severity === 'warning')\r\n      const info = this.suggestions.filter(s => s.severity === 'info')\r\n\r\n      if (critical.length > 0) {\r\n        report += `\\nüî¥ ‰∏•Èáç (${critical.length}):\\n`\r\n        critical.forEach((s) => {\r\n          report += `  ‚Ä¢ ${s.message}\\n`\r\n          report += `    ‚Üí ${s.action}\\n`\r\n        })\r\n      }\r\n\r\n      if (warnings.length > 0) {\r\n        report += `\\nüü° Ë≠¶Âëä (${warnings.length}):\\n`\r\n        warnings.forEach((s) => {\r\n          report += `  ‚Ä¢ ${s.message}\\n`\r\n          report += `    ‚Üí ${s.action}\\n`\r\n        })\r\n      }\r\n\r\n      if (info.length > 0) {\r\n        report += `\\nüü¢ ÊèêÁ§∫ (${info.length}):\\n`\r\n        info.forEach((s) => {\r\n          report += `  ‚Ä¢ ${s.message}\\n`\r\n        })\r\n      }\r\n    }\r\n\r\n    return report\r\n  }\r\n\r\n  /**\r\n   * ÈîÄÊØÅ\r\n   */\r\n  destroy(): void {\r\n    this.stop()\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n\r\n// ÂÖ®Â±ÄÂÆû‰æã\r\nlet optimizerInstance: AutoOptimizer | null = null\r\n\r\n/**\r\n * Ëé∑ÂèñËá™Âä®‰ºòÂåñÂô®\r\n */\r\nexport function getAutoOptimizer(config?: Partial<AutoOptimizerConfig>): AutoOptimizer {\r\n  if (!optimizerInstance)\r\n    optimizerInstance = new AutoOptimizer(config)\r\n\r\n  return optimizerInstance\r\n}\r\n\r\n/**\r\n * ÂêØÂä®Ëá™Âä®‰ºòÂåñ\r\n */\r\nexport function startAutoOptimization(config?: Partial<AutoOptimizerConfig>): void {\r\n  getAutoOptimizer(config).start()\r\n}\r\n\r\n/**\r\n * ÂÅúÊ≠¢Ëá™Âä®‰ºòÂåñ\r\n */\r\nexport function stopAutoOptimization(): void {\r\n  if (optimizerInstance)\r\n    optimizerInstance.stop()\r\n}\r\n"],"names":["AutoOptimizer","EventEmitter","constructor","config","monitor","getPerformanceMonitor","features","getFeatureFlags","loader","getLazyLoader","checkTimer","suggestions","enabled","checkInterval","autoFix","thresholds","minFPS","maxMemory","maxLoadTime","start","setInterval","check","stop","clearInterval","metrics","getMetrics","featureStats","getStats","loaderStats","checkFPS","checkMemory","checkLoadTime","checkFeatureUsage","length","emit","fps","push","type","severity","message","action","autoFixable","fix","disable","memoryUsage","require","getIconManager","loadTime","allFeatures","getAllFeatures","forEach","f","includes","id","lazy","enabledButNotLoaded","loaded","queued","fixable","filter","s","suggestion","error","console","getSuggestions","applySuggestion","index","generateReport","report","critical","warnings","info","destroy","removeAllListeners","optimizerInstance","getAutoOptimizer","startAutoOptimization","stopAutoOptimization"],"mappings":"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"}