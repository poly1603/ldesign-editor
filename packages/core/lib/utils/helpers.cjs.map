{"version":3,"file":"helpers.cjs","sources":["../../src/utils/helpers.ts"],"sourcesContent":["/**\r\n * 通用工具函数\r\n * 提供防抖、节流、缓存等常用功能\r\n */\r\n\r\n/**\r\n * 防抖函数\r\n * 在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number,\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null\r\n\r\n  return function (this: any, ...args: Parameters<T>) {\r\n    const context = this\r\n\r\n    if (timeout)\r\n      clearTimeout(timeout)\r\n\r\n    timeout = setTimeout(() => {\r\n      func.apply(context, args)\r\n      timeout = null\r\n    }, wait)\r\n  }\r\n}\r\n\r\n/**\r\n * 节流函数\r\n * 规定在一个单位时间内，只能触发一次函数\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number,\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean = false\r\n  let lastResult: ReturnType<T>\r\n\r\n  return function (this: any, ...args: Parameters<T>): any {\r\n    const context = this\r\n\r\n    if (!inThrottle) {\r\n      lastResult = func.apply(context, args)\r\n      inThrottle = true\r\n\r\n      setTimeout(() => {\r\n        inThrottle = false\r\n      }, limit)\r\n    }\r\n\r\n    return lastResult\r\n  }\r\n}\r\n\r\n/**\r\n * 简单的LRU缓存实现\r\n */\r\nexport class LRUCache<K, V> {\r\n  private maxSize: number\r\n  private cache: Map<K, V>\r\n\r\n  constructor(maxSize: number = 100) {\r\n    this.maxSize = maxSize\r\n    this.cache = new Map()\r\n  }\r\n\r\n  get(key: K): V | undefined {\r\n    if (!this.cache.has(key))\r\n      return undefined\r\n\r\n    // 更新访问顺序\r\n    const value = this.cache.get(key)!\r\n    this.cache.delete(key)\r\n    this.cache.set(key, value)\r\n\r\n    return value\r\n  }\r\n\r\n  set(key: K, value: V): void {\r\n    // 如果已存在，先删除\r\n    if (this.cache.has(key))\r\n      this.cache.delete(key)\r\n\r\n    // 如果超过容量，删除最旧的项\r\n    if (this.cache.size >= this.maxSize) {\r\n      const firstKey = this.cache.keys().next().value\r\n      this.cache.delete(firstKey)\r\n    }\r\n\r\n    this.cache.set(key, value)\r\n  }\r\n\r\n  has(key: K): boolean {\r\n    return this.cache.has(key)\r\n  }\r\n\r\n  delete(key: K): boolean {\r\n    return this.cache.delete(key)\r\n  }\r\n\r\n  clear(): void {\r\n    this.cache.clear()\r\n  }\r\n\r\n  size(): number {\r\n    return this.cache.size\r\n  }\r\n}\r\n\r\n/**\r\n * 延迟执行\r\n */\r\nexport function delay(ms: number): Promise<void> {\r\n  return new Promise(resolve => setTimeout(resolve, ms))\r\n}\r\n\r\n/**\r\n * 重试函数\r\n */\r\nexport async function retry<T>(\r\n  fn: () => Promise<T>,\r\n  options: {\r\n    maxAttempts?: number\r\n    delay?: number\r\n    backoff?: number\r\n    onRetry?: (attempt: number, error: Error) => void\r\n  } = {},\r\n): Promise<T> {\r\n  const {\r\n    maxAttempts = 3,\r\n    delay: retryDelay = 1000,\r\n    backoff = 2,\r\n    onRetry,\r\n  } = options\r\n\r\n  let lastError: Error\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    try {\r\n      return await fn()\r\n    }\r\n    catch (error) {\r\n      lastError = error as Error\r\n\r\n      if (attempt < maxAttempts) {\r\n        if (onRetry)\r\n          onRetry(attempt, lastError)\r\n\r\n        const waitTime = retryDelay * backoff ** (attempt - 1)\r\n        await delay(waitTime)\r\n      }\r\n    }\r\n  }\r\n\r\n  throw lastError!\r\n}\r\n\r\n/**\r\n * 批处理函数\r\n */\r\nexport class Batcher<T, R> {\r\n  private batch: T[] = []\r\n  private timer: ReturnType<typeof setTimeout> | null = null\r\n  private processFn: (items: T[]) => Promise<R[]>\r\n  private maxSize: number\r\n  private maxWait: number\r\n\r\n  constructor(\r\n    processFn: (items: T[]) => Promise<R[]>,\r\n    options: { maxSize?: number, maxWait?: number } = {},\r\n  ) {\r\n    this.processFn = processFn\r\n    this.maxSize = options.maxSize || 10\r\n    this.maxWait = options.maxWait || 100\r\n  }\r\n\r\n  add(item: T): Promise<R> {\r\n    return new Promise((resolve, reject) => {\r\n      this.batch.push(item)\r\n\r\n      const process = async () => {\r\n        if (this.timer) {\r\n          clearTimeout(this.timer)\r\n          this.timer = null\r\n        }\r\n\r\n        const items = [...this.batch]\r\n        this.batch = []\r\n\r\n        try {\r\n          const results = await this.processFn(items)\r\n          const index = items.indexOf(item)\r\n          resolve(results[index])\r\n        }\r\n        catch (error) {\r\n          reject(error)\r\n        }\r\n      }\r\n\r\n      if (this.batch.length >= this.maxSize)\r\n        process()\r\n      else if (!this.timer)\r\n        this.timer = setTimeout(process, this.maxWait)\r\n    })\r\n  }\r\n\r\n  flush(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      if (this.timer) {\r\n        clearTimeout(this.timer)\r\n        this.timer = null\r\n      }\r\n\r\n      if (this.batch.length > 0) {\r\n        const items = [...this.batch]\r\n        this.batch = []\r\n        this.processFn(items).finally(() => resolve())\r\n      }\r\n      else {\r\n        resolve()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 深度克隆\r\n */\r\nexport function deepClone<T>(obj: T): T {\r\n  if (obj === null || typeof obj !== 'object')\r\n    return obj\r\n\r\n  if (obj instanceof Date)\r\n    return new Date(obj.getTime()) as any\r\n\r\n  if (Array.isArray(obj))\r\n    return obj.map(item => deepClone(item)) as any\r\n\r\n  if (obj instanceof Map) {\r\n    const map = new Map()\r\n    obj.forEach((value, key) => {\r\n      map.set(key, deepClone(value))\r\n    })\r\n    return map as any\r\n  }\r\n\r\n  if (obj instanceof Set) {\r\n    const set = new Set()\r\n    obj.forEach((value) => {\r\n      set.add(deepClone(value))\r\n    })\r\n    return set as any\r\n  }\r\n\r\n  const cloned = {} as T\r\n  for (const key in obj) {\r\n    if (obj.hasOwnProperty(key))\r\n      cloned[key] = deepClone(obj[key])\r\n  }\r\n\r\n  return cloned\r\n}\r\n\r\n/**\r\n * 对象合并\r\n */\r\nexport function deepMerge<T extends object>(target: T, ...sources: Partial<T>[]): T {\r\n  if (!sources.length)\r\n    return target\r\n\r\n  const source = sources.shift()\r\n\r\n  if (source) {\r\n    for (const key in source) {\r\n      if (source.hasOwnProperty(key)) {\r\n        const sourceValue = source[key]\r\n        const targetValue = target[key]\r\n\r\n        if (sourceValue && typeof sourceValue === 'object' && !Array.isArray(sourceValue)) {\r\n          if (!targetValue || typeof targetValue !== 'object')\r\n            target[key] = {} as any\r\n\r\n          deepMerge(target[key] as any, sourceValue)\r\n        }\r\n        else {\r\n          target[key] = sourceValue as any\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return deepMerge(target, ...sources)\r\n}\r\n\r\n/**\r\n * 唯一ID生成器\r\n */\r\nlet idCounter = 0\r\nexport function generateId(prefix: string = 'id'): string {\r\n  return `${prefix}-${Date.now()}-${++idCounter}`\r\n}\r\n\r\n/**\r\n * 范围限制\r\n */\r\nexport function clamp(value: number, min: number, max: number): number {\r\n  return Math.min(Math.max(value, min), max)\r\n}\r\n\r\n/**\r\n * 检查是否为空\r\n */\r\nexport function isEmpty(value: any): boolean {\r\n  if (value === null || value === undefined)\r\n    return true\r\n  if (typeof value === 'string')\r\n    return value.trim() === ''\r\n  if (Array.isArray(value))\r\n    return value.length === 0\r\n  if (typeof value === 'object')\r\n    return Object.keys(value).length === 0\r\n  return false\r\n}\r\n\r\n/**\r\n * 格式化文件大小\r\n */\r\nexport function formatFileSize(bytes: number): string {\r\n  if (bytes === 0)\r\n    return '0 B'\r\n\r\n  const units = ['B', 'KB', 'MB', 'GB', 'TB']\r\n  const k = 1024\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n\r\n  return `${(bytes / k ** i).toFixed(2)} ${units[i]}`\r\n}\r\n\r\n/**\r\n * 格式化时间\r\n */\r\nexport function formatDuration(ms: number): string {\r\n  if (ms < 1000)\r\n    return `${ms.toFixed(0)}ms`\r\n  if (ms < 60000)\r\n    return `${(ms / 1000).toFixed(2)}s`\r\n  if (ms < 3600000)\r\n    return `${(ms / 60000).toFixed(2)}m`\r\n  return `${(ms / 3600000).toFixed(2)}h`\r\n}\r\n"],"names":["debounce","func","wait","timeout","args","context","clearTimeout","setTimeout","apply","throttle","limit","inThrottle","lastResult","LRUCache","constructor","maxSize","cache","Map","get","key","has","undefined","value","delete","set","size","firstKey","keys","next","clear","delay","ms","Promise","resolve","retry","fn","options","maxAttempts","retryDelay","backoff","onRetry","lastError","attempt","error","waitTime","Batcher","processFn","batch","timer","maxWait","add","item","reject","push","process","items","results","index","indexOf","length","flush","finally","deepClone","obj","Date","getTime","Array","isArray","map","forEach","Set","cloned","hasOwnProperty","deepMerge","target","sources","source","shift","sourceValue","targetValue","idCounter","generateId","prefix","now","clamp","min","max","Math","isEmpty","trim","Object","formatFileSize","bytes","units","k","i","floor","log","toFixed","formatDuration"],"mappings":"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"}