{"version":3,"file":"FindReplaceDialog.cjs","sources":["../../src/ui/FindReplaceDialog.ts"],"sourcesContent":["/**\r\n * 查找替换对话框 - 增强版\r\n * 支持模糊查找、实时预览、批量替换等功能\r\n */\r\n\r\nexport interface FindReplaceOptions {\r\n  onFind?: (searchText: string, options: SearchOptions) => void\r\n  onReplace?: (searchText: string, replaceText: string, options: SearchOptions) => void\r\n  onReplaceAll?: (searchText: string, replaceText: string, options: SearchOptions) => void\r\n  onClose?: () => void\r\n  initialText?: string // 初始查找文本\r\n}\r\n\r\nexport interface SearchOptions {\r\n  caseSensitive: boolean\r\n  wholeWord: boolean\r\n  useRegex: boolean\r\n  fuzzySearch: boolean // 模糊查找\r\n}\r\n\r\nexport interface SearchResult {\r\n  count: number\r\n  current: number\r\n  matches: Array<{\r\n    text: string\r\n    index: number\r\n    length: number\r\n  }>\r\n}\r\n\r\n/**\r\n * 创建增强版查找替换对话框\r\n */\r\nexport function createFindReplaceDialog(options: FindReplaceOptions): HTMLElement {\r\n  const { onFind, onReplace, onReplaceAll, onClose } = options\r\n\r\n  // 不创建遮罩层，直接创建对话框\r\n  const dialog = document.createElement('div')\r\n  dialog.className = 'editor-dialog editor-find-dialog enhanced no-overlay'\r\n  dialog.style.cssText = `\r\n    position: fixed;\r\n    top: 60px;\r\n    right: 20px;\r\n    z-index: 1000;\r\n    background: white;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 16px rgba(0,0,0,0.15);\r\n    min-width: 400px;\r\n    max-width: 500px;\r\n    animation: slideIn 0.3s ease-out;\r\n  `\r\n\r\n  // 拖拽功能变量\r\n  let isDragging = false\r\n  let dragStartX = 0\r\n  let dragStartY = 0\r\n  let dialogStartX = 0\r\n  let dialogStartY = 0\r\n\r\n  // 拖拽事件处理\r\n  const startDrag = (e: MouseEvent) => {\r\n    isDragging = true\r\n    dragStartX = e.clientX\r\n    dragStartY = e.clientY\r\n    const rect = dialog.getBoundingClientRect()\r\n    dialogStartX = rect.left\r\n    dialogStartY = rect.top\r\n    dialog.style.cursor = 'grabbing'\r\n    e.preventDefault()\r\n  }\r\n\r\n  const onDrag = (e: MouseEvent) => {\r\n    if (!isDragging)\r\n      return\r\n    const deltaX = e.clientX - dragStartX\r\n    const deltaY = e.clientY - dragStartY\r\n    dialog.style.left = `${dialogStartX + deltaX}px`\r\n    dialog.style.top = `${dialogStartY + deltaY}px`\r\n    dialog.style.right = 'auto'\r\n  }\r\n\r\n  const stopDrag = () => {\r\n    if (isDragging) {\r\n      isDragging = false\r\n      dialog.style.cursor = 'move'\r\n    }\r\n  }\r\n\r\n  // 绑定拖拽事件\r\n  document.addEventListener('mousemove', onDrag)\r\n  document.addEventListener('mouseup', stopDrag)\r\n\r\n  // 标题栏（可拖拽）\r\n  const header = document.createElement('div')\r\n  header.className = 'editor-dialog-header'\r\n  header.style.cssText = 'cursor: move; user-select: none;'\r\n  header.innerHTML = `\r\n    <div class=\"editor-dialog-title\">\r\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n        <circle cx=\"11\" cy=\"11\" r=\"8\"/>\r\n        <path d=\"m21 21-4.35-4.35\"/>\r\n      </svg>\r\n      <span>查找和替换</span>\r\n    </div>\r\n    <button class=\"editor-dialog-close\" type=\"button\" aria-label=\"关闭\">\r\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n      </svg>\r\n    </button>\r\n  `\r\n  dialog.appendChild(header)\r\n\r\n  // 绑定标题栏拖拽\r\n  header.addEventListener('mousedown', startDrag)\r\n\r\n  // 清理函数\r\n  const cleanup = () => {\r\n    onClose?.()\r\n    dialog.remove()\r\n    document.removeEventListener('mousemove', onDrag)\r\n    document.removeEventListener('mouseup', stopDrag)\r\n  }\r\n\r\n  // 关闭按钮事件\r\n  const closeBtn = header.querySelector('.editor-dialog-close') as HTMLButtonElement\r\n  closeBtn.addEventListener('click', cleanup)\r\n\r\n  // 内容区域\r\n  const content = document.createElement('div')\r\n  content.className = 'editor-find-content'\r\n\r\n  // 查找输入区域\r\n  const findGroup = document.createElement('div')\r\n  findGroup.className = 'editor-find-input-group'\r\n\r\n  const findLabel = document.createElement('label')\r\n  findLabel.textContent = '查找'\r\n  findGroup.appendChild(findLabel)\r\n\r\n  const findInputWrapper = document.createElement('div')\r\n  findInputWrapper.className = 'editor-find-input-wrapper'\r\n\r\n  const findInput = document.createElement('input')\r\n  findInput.type = 'text'\r\n  findInput.id = 'find-input'\r\n  findInput.className = 'editor-find-input'\r\n  findInput.placeholder = '输入要查找的文本（支持模糊搜索）'\r\n  findInput.value = options.initialText || ''\r\n\r\n  // 查找结果计数\r\n  const findCounter = document.createElement('span')\r\n  findCounter.className = 'editor-find-counter'\r\n  findCounter.textContent = ''\r\n\r\n  // 查找导航按钮\r\n  const findNav = document.createElement('div')\r\n  findNav.className = 'editor-find-nav'\r\n  findNav.innerHTML = `\r\n    <button type=\"button\" class=\"find-nav-btn\" id=\"find-prev\" title=\"上一个 (Shift+Enter)\">\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n        <polyline points=\"15 18 9 12 15 6\"/>\r\n      </svg>\r\n    </button>\r\n    <button type=\"button\" class=\"find-nav-btn\" id=\"find-next\" title=\"下一个 (Enter)\">\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n        <polyline points=\"9 18 15 12 9 6\"/>\r\n      </svg>\r\n    </button>\r\n  `\r\n\r\n  findInputWrapper.appendChild(findInput)\r\n  findInputWrapper.appendChild(findCounter)\r\n  findInputWrapper.appendChild(findNav)\r\n  findGroup.appendChild(findInputWrapper)\r\n  content.appendChild(findGroup)\r\n\r\n  // 替换输入区域\r\n  const replaceGroup = document.createElement('div')\r\n  replaceGroup.className = 'editor-find-input-group'\r\n\r\n  const replaceLabel = document.createElement('label')\r\n  replaceLabel.textContent = '替换为'\r\n  replaceGroup.appendChild(replaceLabel)\r\n\r\n  const replaceInputWrapper = document.createElement('div')\r\n  replaceInputWrapper.className = 'editor-find-input-wrapper'\r\n\r\n  const replaceInput = document.createElement('input')\r\n  replaceInput.type = 'text'\r\n  replaceInput.id = 'replace-input'\r\n  replaceInput.className = 'editor-find-input'\r\n  replaceInput.placeholder = '输入替换文本'\r\n\r\n  // 替换预览\r\n  const replacePreview = document.createElement('span')\r\n  replacePreview.className = 'editor-replace-preview'\r\n  replacePreview.style.display = 'none'\r\n\r\n  replaceInputWrapper.appendChild(replaceInput)\r\n  replaceInputWrapper.appendChild(replacePreview)\r\n  replaceGroup.appendChild(replaceInputWrapper)\r\n  content.appendChild(replaceGroup)\r\n\r\n  // 选项区域\r\n  const optionsDiv = document.createElement('div')\r\n  optionsDiv.className = 'editor-find-options'\r\n\r\n  const caseSensitiveCheckbox = createCheckbox('case-sensitive', '区分大小写', 'A')\r\n  const wholeWordCheckbox = createCheckbox('whole-word', '全字匹配', 'W')\r\n  const regexCheckbox = createCheckbox('use-regex', '正则表达式', '.*')\r\n  const fuzzyCheckbox = createCheckbox('fuzzy-search', '模糊搜索', '≈')\r\n\r\n  optionsDiv.appendChild(caseSensitiveCheckbox)\r\n  optionsDiv.appendChild(wholeWordCheckbox)\r\n  optionsDiv.appendChild(regexCheckbox)\r\n  optionsDiv.appendChild(fuzzyCheckbox)\r\n\r\n  // 正则和模糊搜索互斥\r\n  const regexInput = regexCheckbox.querySelector('input') as HTMLInputElement\r\n  const fuzzyInput = fuzzyCheckbox.querySelector('input') as HTMLInputElement\r\n\r\n  regexInput.addEventListener('change', () => {\r\n    if (regexInput.checked)\r\n      fuzzyInput.checked = false\r\n  })\r\n\r\n  fuzzyInput.addEventListener('change', () => {\r\n    if (fuzzyInput.checked)\r\n      regexInput.checked = false\r\n  })\r\n\r\n  content.appendChild(optionsDiv)\r\n\r\n  // 结果显示区域\r\n  const resultDiv = document.createElement('div')\r\n  resultDiv.className = 'editor-find-result'\r\n  resultDiv.style.display = 'none'\r\n  content.appendChild(resultDiv)\r\n\r\n  // 高级选项（折叠面板）\r\n  const advancedSection = document.createElement('details')\r\n  advancedSection.className = 'editor-find-advanced'\r\n  advancedSection.innerHTML = `\r\n    <summary>高级选项</summary>\r\n    <div class=\"editor-find-advanced-content\">\r\n      <div class=\"editor-find-scope\">\r\n        <label>搜索范围：</label>\r\n        <select id=\"search-scope\">\r\n          <option value=\"all\">全文档</option>\r\n          <option value=\"selection\">选中文本</option>\r\n          <option value=\"current-block\">当前段落</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"editor-find-history\">\r\n        <label>搜索历史：</label>\r\n        <select id=\"search-history\">\r\n          <option value=\"\">-- 选择历史记录 --</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  `\r\n  content.appendChild(advancedSection)\r\n\r\n  dialog.appendChild(content)\r\n\r\n  // 按钮组\r\n  const actions = document.createElement('div')\r\n  actions.className = 'editor-dialog-actions'\r\n\r\n  const findBtn = document.createElement('button')\r\n  findBtn.type = 'button'\r\n  findBtn.className = 'editor-dialog-button editor-dialog-button-primary'\r\n  findBtn.innerHTML = '<span>查找全部</span><kbd>Ctrl+Enter</kbd>'\r\n\r\n  const replaceBtn = document.createElement('button')\r\n  replaceBtn.type = 'button'\r\n  replaceBtn.className = 'editor-dialog-button editor-dialog-button-warning'\r\n  replaceBtn.innerHTML = '<span>替换</span>'\r\n\r\n  const replaceAllBtn = document.createElement('button')\r\n  replaceAllBtn.type = 'button'\r\n  replaceAllBtn.className = 'editor-dialog-button editor-dialog-button-danger'\r\n  replaceAllBtn.innerHTML = '<span>全部替换</span><kbd>Ctrl+Shift+Enter</kbd>'\r\n\r\n  const cancelBtn = document.createElement('button')\r\n  cancelBtn.type = 'button'\r\n  cancelBtn.className = 'editor-dialog-button editor-dialog-button-cancel'\r\n  cancelBtn.textContent = '取消'\r\n\r\n  // 获取搜索选项\r\n  function getSearchOptions(): SearchOptions {\r\n    return {\r\n      caseSensitive: (document.getElementById('case-sensitive') as HTMLInputElement)?.checked || false,\r\n      wholeWord: (document.getElementById('whole-word') as HTMLInputElement)?.checked || false,\r\n      useRegex: (document.getElementById('use-regex') as HTMLInputElement)?.checked || false,\r\n      fuzzySearch: (document.getElementById('fuzzy-search') as HTMLInputElement)?.checked || false,\r\n    }\r\n  }\r\n\r\n  // 当前搜索结果\r\n  const currentSearchResult: SearchResult = { count: 0, current: 0, matches: [] }\r\n  const searchHistory: string[] = loadSearchHistory()\r\n\r\n  // 显示结果\r\n  function showResult(message: string, type: 'info' | 'success' | 'warning' | 'error' = 'info') {\r\n    resultDiv.textContent = message\r\n    resultDiv.className = `editor-find-result editor-find-result-${type}`\r\n    resultDiv.style.display = 'block'\r\n\r\n    // 3秒后自动隐藏\r\n    setTimeout(() => {\r\n      resultDiv.style.display = 'none'\r\n    }, 3000)\r\n  }\r\n\r\n  // 更新查找计数\r\n  function updateFindCounter(current: number, total: number) {\r\n    if (total === 0) {\r\n      findCounter.textContent = '无结果'\r\n      findCounter.className = 'editor-find-counter no-results'\r\n    }\r\n    else {\r\n      findCounter.textContent = `${current}/${total}`\r\n      findCounter.className = 'editor-find-counter'\r\n    }\r\n  }\r\n\r\n  // 实时搜索\r\n  let searchDebounceTimer: ReturnType<typeof setTimeout> | null = null\r\n\r\n  findInput.addEventListener('input', () => {\r\n    if (searchDebounceTimer)\r\n      clearTimeout(searchDebounceTimer)\r\n\r\n    searchDebounceTimer = setTimeout(() => {\r\n      const searchText = findInput.value\r\n      if (searchText) {\r\n        const searchOptions = getSearchOptions()\r\n        onFind?.(searchText, searchOptions)\r\n        saveToHistory(searchText)\r\n      }\r\n      else {\r\n        updateFindCounter(0, 0)\r\n      }\r\n    }, 300) // 300ms 防抖\r\n  })\r\n\r\n  // 查找按钮\r\n  findBtn.addEventListener('click', () => {\r\n    const searchText = findInput.value\r\n    if (!searchText) {\r\n      showResult('请输入要查找的文本', 'warning')\r\n      return\r\n    }\r\n\r\n    const searchOptions = getSearchOptions()\r\n    onFind?.(searchText, searchOptions)\r\n    saveToHistory(searchText)\r\n  })\r\n\r\n  // 上一个/下一个按钮\r\n  const prevBtn = findNav.querySelector('#find-prev') as HTMLButtonElement\r\n  const nextBtn = findNav.querySelector('#find-next') as HTMLButtonElement\r\n\r\n  prevBtn.addEventListener('click', () => {\r\n    if (currentSearchResult.count > 0) {\r\n      currentSearchResult.current = currentSearchResult.current > 1\r\n        ? currentSearchResult.current - 1\r\n        : currentSearchResult.count\r\n      updateFindCounter(currentSearchResult.current, currentSearchResult.count)\r\n      highlightCurrentMatch()\r\n    }\r\n  })\r\n\r\n  nextBtn.addEventListener('click', () => {\r\n    if (currentSearchResult.count > 0) {\r\n      currentSearchResult.current = currentSearchResult.current < currentSearchResult.count\r\n        ? currentSearchResult.current + 1\r\n        : 1\r\n      updateFindCounter(currentSearchResult.current, currentSearchResult.count)\r\n      highlightCurrentMatch()\r\n    }\r\n  })\r\n\r\n  // 替换按钮\r\n  replaceBtn.addEventListener('click', () => {\r\n    const searchText = findInput.value\r\n    const replaceText = replaceInput.value || ''\r\n\r\n    if (!searchText) {\r\n      showResult('请输入要查找的文本', 'warning')\r\n      return\r\n    }\r\n\r\n    const searchOptions = getSearchOptions()\r\n    onReplace?.(searchText, replaceText, searchOptions)\r\n    showResult('替换成功', 'success')\r\n  })\r\n\r\n  // 全部替换按钮\r\n  replaceAllBtn.addEventListener('click', () => {\r\n    const searchText = findInput.value\r\n    const replaceText = replaceInput.value || ''\r\n\r\n    if (!searchText) {\r\n      showResult('请输入要查找的文本', 'warning')\r\n      return\r\n    }\r\n\r\n    // 显示确认对话框，包含替换数量预览\r\n    const confirmDialog = document.createElement('div')\r\n    confirmDialog.className = 'editor-confirm-dialog'\r\n    confirmDialog.innerHTML = `\r\n      <div class=\"editor-confirm-content\">\r\n        <p>确定要将所有 <strong>\"${searchText}\"</strong> 替换为 <strong>\"${replaceText || '(空)'}\"</strong> 吗？</p>\r\n        <p class=\"editor-confirm-count\">将影响 ${currentSearchResult.count} 处</p>\r\n      </div>\r\n      <div class=\"editor-confirm-actions\">\r\n        <button type=\"button\" class=\"confirm-yes\">确定替换</button>\r\n        <button type=\"button\" class=\"confirm-no\">取消</button>\r\n      </div>\r\n    `\r\n\r\n    dialog.appendChild(confirmDialog)\r\n\r\n    const yesBtn = confirmDialog.querySelector('.confirm-yes') as HTMLButtonElement\r\n    const noBtn = confirmDialog.querySelector('.confirm-no') as HTMLButtonElement\r\n\r\n    yesBtn.addEventListener('click', () => {\r\n      const searchOptions = getSearchOptions()\r\n      onReplaceAll?.(searchText, replaceText, searchOptions)\r\n      showResult(`成功替换 ${currentSearchResult.count} 处`, 'success')\r\n      confirmDialog.remove()\r\n    })\r\n\r\n    noBtn.addEventListener('click', () => {\r\n      confirmDialog.remove()\r\n    })\r\n  })\r\n\r\n  // 关闭按钮\r\n  cancelBtn.addEventListener('click', () => {\r\n    onClose?.()\r\n    dialog.remove()\r\n  })\r\n\r\n  actions.appendChild(findBtn)\r\n  actions.appendChild(replaceBtn)\r\n  actions.appendChild(replaceAllBtn)\r\n  actions.appendChild(cancelBtn)\r\n  dialog.appendChild(actions)\r\n\r\n  document.body.appendChild(dialog)\r\n\r\n  // 键盘快捷键处理\r\n  const handleKeyDown = (e: KeyboardEvent) => {\r\n    if (e.key === 'Escape') {\r\n      onClose?.()\r\n      dialog.remove()\r\n      document.removeEventListener('keydown', handleKeyDown)\r\n    }\r\n    else if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey) {\r\n      // Enter - 查找下一个\r\n      if (document.activeElement === findInput) {\r\n        e.preventDefault()\r\n        nextBtn.click()\r\n      }\r\n    }\r\n    else if (e.key === 'Enter' && e.shiftKey) {\r\n      // Shift+Enter - 查找上一个\r\n      e.preventDefault()\r\n      prevBtn.click()\r\n    }\r\n    else if (e.key === 'Enter' && e.ctrlKey && !e.shiftKey) {\r\n      // Ctrl+Enter - 查找全部\r\n      e.preventDefault()\r\n      findBtn.click()\r\n    }\r\n    else if (e.key === 'Enter' && e.ctrlKey && e.shiftKey) {\r\n      // Ctrl+Shift+Enter - 全部替换\r\n      e.preventDefault()\r\n      replaceAllBtn.click()\r\n    }\r\n    else if ((e.ctrlKey || e.metaKey) && e.key === 'h') {\r\n      // Ctrl/Cmd+H - 切换到替换模式\r\n      e.preventDefault()\r\n      replaceInput.focus()\r\n    }\r\n  }\r\n  document.addEventListener('keydown', handleKeyDown)\r\n\r\n  // 辅助函数：高亮当前匹配\r\n  function highlightCurrentMatch() {\r\n    const highlights = document.querySelectorAll('.editor-highlight')\r\n    highlights.forEach((h, index) => {\r\n      h.classList.toggle('editor-highlight-active', index === currentSearchResult.current - 1)\r\n    })\r\n\r\n    // 滚动到当前匹配\r\n    if (highlights[currentSearchResult.current - 1]) {\r\n      highlights[currentSearchResult.current - 1].scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'center',\r\n      })\r\n    }\r\n  }\r\n\r\n  // 保存搜索历史\r\n  function saveToHistory(text: string) {\r\n    if (!searchHistory.includes(text)) {\r\n      searchHistory.unshift(text)\r\n      if (searchHistory.length > 10)\r\n        searchHistory.pop()\r\n      localStorage.setItem('editor-search-history', JSON.stringify(searchHistory))\r\n      updateHistoryDropdown()\r\n    }\r\n  }\r\n\r\n  // 加载搜索历史\r\n  function loadSearchHistory(): string[] {\r\n    try {\r\n      return JSON.parse(localStorage.getItem('editor-search-history') || '[]')\r\n    }\r\n    catch {\r\n      return []\r\n    }\r\n  }\r\n\r\n  // 更新历史下拉框\r\n  function updateHistoryDropdown() {\r\n    const historySelect = document.getElementById('search-history') as HTMLSelectElement\r\n    if (historySelect) {\r\n      historySelect.innerHTML = '<option value=\"\">-- 选择历史记录 --</option>'\r\n      searchHistory.forEach((item) => {\r\n        const option = document.createElement('option')\r\n        option.value = item\r\n        option.textContent = item.length > 30 ? `${item.substring(0, 30)}...` : item\r\n        historySelect.appendChild(option)\r\n      })\r\n    }\r\n  }\r\n\r\n  // 历史选择事件\r\n  const historySelect = document.getElementById('search-history') as HTMLSelectElement\r\n  if (historySelect) {\r\n    updateHistoryDropdown()\r\n    historySelect.addEventListener('change', () => {\r\n      if (historySelect.value) {\r\n        findInput.value = historySelect.value\r\n        findInput.dispatchEvent(new Event('input'))\r\n      }\r\n    })\r\n  }\r\n\r\n  // ESC键关闭\r\n  dialog.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape')\r\n      cleanup()\r\n  })\r\n\r\n  return dialog\r\n}\r\n\r\n/**\r\n * 创建增强版复选框\r\n */\r\nfunction createCheckbox(id: string, label: string, icon?: string): HTMLElement {\r\n  const wrapper = document.createElement('div')\r\n  wrapper.className = 'editor-find-checkbox'\r\n\r\n  const checkbox = document.createElement('input')\r\n  checkbox.type = 'checkbox'\r\n  checkbox.id = id\r\n  checkbox.className = 'editor-checkbox-input'\r\n\r\n  const labelElement = document.createElement('label')\r\n  labelElement.htmlFor = id\r\n  labelElement.className = 'editor-checkbox-label'\r\n\r\n  // 添加图标\r\n  if (icon) {\r\n    const iconSpan = document.createElement('span')\r\n    iconSpan.className = 'checkbox-icon'\r\n    iconSpan.textContent = icon\r\n    labelElement.appendChild(iconSpan)\r\n  }\r\n\r\n  const labelText = document.createElement('span')\r\n  labelText.textContent = label\r\n  labelElement.appendChild(labelText)\r\n\r\n  wrapper.appendChild(checkbox)\r\n  wrapper.appendChild(labelElement)\r\n\r\n  return wrapper\r\n}\r\n\r\n/**\r\n * 显示查找替换对话框\r\n */\r\nexport function showFindReplaceDialog(options: FindReplaceOptions): void {\r\n  // 移除已存在的对话框\r\n  const existing = document.querySelector('.editor-find-dialog')\r\n  if (existing)\r\n    existing.remove()\r\n\r\n  const dialog = createFindReplaceDialog(options)\r\n  document.body.appendChild(dialog)\r\n\r\n  // 聚焦到查找输入框\r\n  setTimeout(() => {\r\n    const findInput = dialog.querySelector('#find-input') as HTMLInputElement\r\n    findInput?.focus()\r\n  }, 100)\r\n}\r\n\r\n// 默认导出\r\nexport default showFindReplaceDialog\r\n"],"names":["createFindReplaceDialog","options","onFind","onReplace","onReplaceAll","onClose","dialog","document","createElement","className","style","cssText","isDragging","dragStartX","dragStartY","dialogStartX","dialogStartY","startDrag","e","clientX","clientY","rect","getBoundingClientRect","left","top","cursor","preventDefault","onDrag","deltaX","deltaY","right","stopDrag","addEventListener","header","innerHTML","appendChild","cleanup","remove","removeEventListener","closeBtn","querySelector","content","findGroup","findLabel","textContent","findInputWrapper","findInput","type","id","placeholder","value","initialText","findCounter","findNav","replaceGroup","replaceLabel","replaceInputWrapper","replaceInput","replacePreview","display","optionsDiv","caseSensitiveCheckbox","createCheckbox","wholeWordCheckbox","regexCheckbox","fuzzyCheckbox","regexInput","fuzzyInput","checked","resultDiv","advancedSection","actions","findBtn","replaceBtn","replaceAllBtn","cancelBtn","getSearchOptions","caseSensitive","getElementById","wholeWord","useRegex","fuzzySearch","currentSearchResult","count","searchHistory","loadSearchHistory","showResult","message","setTimeout","updateFindCounter","current","total","searchDebounceTimer","clearTimeout","searchText","searchOptions","saveToHistory","prevBtn","nextBtn","replaceText","confirmDialog","yesBtn","noBtn","body","handleKeyDown","key","shiftKey","ctrlKey","activeElement","click","metaKey","focus","text","includes","unshift","length","pop","localStorage","setItem","JSON","stringify","updateHistoryDropdown","parse","getItem","historySelect","forEach","item","option","substring","dispatchEvent","Event","label","icon","wrapper","checkbox","labelElement","htmlFor","iconSpan","labelText","showFindReplaceDialog","existing"],"mappings":"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"}