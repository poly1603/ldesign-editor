{"version":3,"file":"defaultToolbar.cjs","sources":["../../src/ui/defaultToolbar.ts"],"sourcesContent":["/**\r\n * 默认工具栏配置\r\n * 包含所有常用的编辑器功能按钮\r\n */\r\n\r\nimport type { ToolbarItem } from '../types'\r\n\r\n/**\r\n * 创建执行命令的函数\r\n */\r\nfunction execCommand(command: string, value?: string | boolean) {\r\n  return () => {\r\n    document.execCommand(command, false, value as any)\r\n    return true\r\n  }\r\n}\r\n\r\n/**\r\n * 检查命令状态\r\n */\r\nfunction isCommandActive(command: string) {\r\n  return () => document.queryCommandState(command)\r\n}\r\n\r\n/**\r\n * 默认工具栏配置\r\n */\r\nexport const DEFAULT_TOOLBAR_ITEMS: ToolbarItem[] = [\r\n  // 历史操作\r\n  {\r\n    name: 'undo',\r\n    title: '撤销 (Ctrl+Z)',\r\n    icon: 'undo',\r\n    command: execCommand('undo'),\r\n  },\r\n  {\r\n    name: 'redo',\r\n    title: '重做 (Ctrl+Y)',\r\n    icon: 'redo',\r\n    command: execCommand('redo'),\r\n  },\r\n\r\n  // 文本格式\r\n  {\r\n    name: 'bold',\r\n    title: '粗体 (Ctrl+B)',\r\n    icon: 'bold',\r\n    command: execCommand('bold'),\r\n    active: isCommandActive('bold'),\r\n  },\r\n  {\r\n    name: 'italic',\r\n    title: '斜体 (Ctrl+I)',\r\n    icon: 'italic',\r\n    command: execCommand('italic'),\r\n    active: isCommandActive('italic'),\r\n  },\r\n  {\r\n    name: 'underline',\r\n    title: '下划线 (Ctrl+U)',\r\n    icon: 'underline',\r\n    command: execCommand('underline'),\r\n    active: isCommandActive('underline'),\r\n  },\r\n  {\r\n    name: 'strike',\r\n    title: '删除线',\r\n    icon: 'strikethrough',\r\n    command: execCommand('strikeThrough'),\r\n    active: isCommandActive('strikeThrough'),\r\n  },\r\n  {\r\n    name: 'inlineCode',\r\n    title: '行内代码 (Ctrl+`)',\r\n    icon: 'code',\r\n    command: () => {\r\n      const selection = window.getSelection()\r\n      if (!selection || selection.rangeCount === 0)\r\n        return false\r\n\r\n      const range = selection.getRangeAt(0)\r\n      const text = range.toString()\r\n\r\n      if (text) {\r\n        // 检查是否已经是代码\r\n        const parent = range.commonAncestorContainer.parentElement\r\n        if (parent && parent.tagName === 'CODE') {\r\n          // 移除代码标记\r\n          const textNode = document.createTextNode(text)\r\n          parent.parentNode?.replaceChild(textNode, parent)\r\n        }\r\n        else {\r\n          // 添加代码标记\r\n          document.execCommand('insertHTML', false, `<code style=\"padding: 2px 4px; margin: 0 2px; background-color: rgba(135, 131, 120, 0.15); border-radius: 3px; font-size: 85%; font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;\">${text}</code>`)\r\n        }\r\n      }\r\n      return true\r\n    },\r\n    active: () => {\r\n      const selection = window.getSelection()\r\n      if (!selection || selection.rangeCount === 0)\r\n        return false\r\n      const parent = selection.getRangeAt(0).commonAncestorContainer.parentElement\r\n      return parent?.tagName === 'CODE'\r\n    },\r\n  },\r\n  {\r\n    name: 'superscript',\r\n    title: '上标',\r\n    icon: 'superscript',\r\n    command: execCommand('superscript'),\r\n    active: isCommandActive('superscript'),\r\n  },\r\n  {\r\n    name: 'subscript',\r\n    title: '下标',\r\n    icon: 'subscript',\r\n    command: execCommand('subscript'),\r\n    active: isCommandActive('subscript'),\r\n  },\r\n\r\n  // 标题（下拉）\r\n  {\r\n    name: 'heading',\r\n    title: '标题/正文',\r\n    icon: 'heading-1',\r\n    // 由 Toolbar.ts 以下拉方式处理\r\n    command: () => true,\r\n  },\r\n\r\n  // 引用和代码块\r\n  {\r\n    name: 'blockquote',\r\n    title: '引用',\r\n    icon: 'quote',\r\n    command: execCommand('formatBlock', '<blockquote>'),\r\n  },\r\n  {\r\n    name: 'codeblock',\r\n    title: '代码块',\r\n    icon: 'code-2',\r\n    command: 'insertCodeBlock', // 使用插件命令\r\n  },\r\n\r\n  // 列表\r\n  {\r\n    name: 'bulletList',\r\n    title: '无序列表',\r\n    icon: 'list',\r\n    command: execCommand('insertUnorderedList'),\r\n    active: isCommandActive('insertUnorderedList'),\r\n  },\r\n  {\r\n    name: 'orderedList',\r\n    title: '有序列表',\r\n    icon: 'list-ordered',\r\n    command: execCommand('insertOrderedList'),\r\n    active: isCommandActive('insertOrderedList'),\r\n  },\r\n  {\r\n    name: 'taskList',\r\n    title: '任务列表',\r\n    icon: 'list-checks',\r\n    command: () => {\r\n      const html = '<ul><li><input type=\"checkbox\"> 任务项</li></ul>'\r\n      document.execCommand('insertHTML', false, html)\r\n      return true\r\n    },\r\n  },\r\n\r\n  // 缩进\r\n  {\r\n    name: 'outdent',\r\n    title: '减少缩进',\r\n    icon: 'indent-decrease',\r\n    command: execCommand('outdent'),\r\n  },\r\n  {\r\n    name: 'indent',\r\n    title: '增加缩进',\r\n    icon: 'indent-increase',\r\n    command: execCommand('indent'),\r\n  },\r\n\r\n  // 对齐（下拉）\r\n  {\r\n    name: 'align',\r\n    title: '对齐方式',\r\n    icon: 'align-left',\r\n    // 由 Toolbar.ts 以下拉方式处理\r\n    command: () => true,\r\n  },\r\n\r\n  // 插入\r\n  {\r\n    name: 'emoji',\r\n    title: '插入表情',\r\n    icon: 'emoji',\r\n    command: 'insertEmoji', // 使用命令名称，由EmojiPlugin处理\r\n  },\r\n  {\r\n    name: 'link',\r\n    title: '插入链接',\r\n    icon: 'link',\r\n    command: () => {\r\n      const url = prompt('请输入链接地址:')\r\n      if (url)\r\n        document.execCommand('createLink', false, url)\r\n\r\n      return true\r\n    },\r\n  },\r\n  {\r\n    name: 'unlink',\r\n    title: '移除链接',\r\n    icon: 'unlink',\r\n    command: execCommand('unlink'),\r\n  },\r\n  {\r\n    name: 'image',\r\n    title: '插入图片',\r\n    icon: 'image',\r\n    command: 'insertImage', // 使用命令名称，由MediaDialogPlugin处理\r\n  },\r\n  {\r\n    name: 'video',\r\n    title: '插入视频',\r\n    icon: 'video',\r\n    command: 'insertVideo', // 使用命令名称，由MediaDialogPlugin处理\r\n  },\r\n  {\r\n    name: 'audio',\r\n    title: '插入音频',\r\n    icon: 'audio',\r\n    command: 'insertAudio', // 使用命令名称，由MediaDialogPlugin处理\r\n  },\r\n  {\r\n    name: 'file',\r\n    title: '插入文件',\r\n    icon: 'file',\r\n    command: () => {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.onchange = (e) => {\r\n        const file = (e.target as HTMLInputElement).files?.[0]\r\n        if (file) {\r\n          const fileUrl = URL.createObjectURL(file)\r\n          const fileSize = (file.size / 1024).toFixed(2) // KB\r\n          const fileHtml = `\r\n            <a href=\"${fileUrl}\" download=\"${file.name}\" style=\"display: inline-flex; align-items: center; padding: 8px 12px; background: #f3f4f6; border-radius: 6px; text-decoration: none; color: #374151;\">\r\n              <svg style=\"margin-right: 8px; width: 16px; height: 16px;\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n                <polyline points=\"14 2 14 8 20 8\"/>\r\n                <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n                <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n                <polyline points=\"10 9 9 9 8 9\"/>\r\n              </svg>\r\n              <span>${file.name}</span>\r\n              <span style=\"margin-left: 8px; color: #6b7280; font-size: 0.875em;\">(${fileSize} KB)</span>\r\n            </a>\r\n          `\r\n          document.execCommand('insertHTML', false, fileHtml)\r\n        }\r\n      }\r\n      input.click()\r\n      return true\r\n    },\r\n  },\r\n  {\r\n    name: 'table',\r\n    title: '插入表格',\r\n    icon: 'table',\r\n    command: 'insertTable', // 使用命令名称，由 TablePlugin 处理\r\n  },\r\n  {\r\n    name: 'horizontalRule',\r\n    title: '水平线',\r\n    icon: 'minus',\r\n    command: execCommand('insertHorizontalRule'),\r\n  },\r\n\r\n  // 字体\r\n  {\r\n    name: 'fontSize',\r\n    title: '字体大小',\r\n    icon: 'type',\r\n    command: () => true, // 由 Toolbar.ts 特殊处理\r\n  },\r\n  {\r\n    name: 'fontFamily',\r\n    title: '字体',\r\n    icon: 'a-large-small',\r\n    command: () => true, // 由 Toolbar.ts 特殊处理\r\n  },\r\n\r\n  // 颜色\r\n  {\r\n    name: 'textColor',\r\n    title: '文字颜色',\r\n    icon: 'palette',\r\n    command: () => {\r\n      const color = prompt('请输入颜色值 (如: #ff0000 或 red):')\r\n      if (color)\r\n        document.execCommand('foreColor', false, color)\r\n\r\n      return true\r\n    },\r\n  },\r\n  {\r\n    name: 'backgroundColor',\r\n    title: '背景颜色',\r\n    icon: 'paint-bucket',\r\n    command: () => {\r\n      const color = prompt('请输入颜色值 (如: #ffff00 或 yellow):')\r\n      if (color)\r\n        document.execCommand('hiliteColor', false, color)\r\n\r\n      return true\r\n    },\r\n  },\r\n\r\n  // 清除格式\r\n  {\r\n    name: 'removeFormat',\r\n    title: '清除格式',\r\n    icon: 'eraser',\r\n    command: execCommand('removeFormat'),\r\n  },\r\n\r\n  // 全屏\r\n  {\r\n    name: 'fullscreen',\r\n    title: '全屏',\r\n    icon: 'maximize',\r\n    command: () => {\r\n      const editor = document.querySelector('.ldesign-editor')\r\n      if (editor) {\r\n        editor.classList.toggle('fullscreen')\r\n\r\n        // 添加全屏样式\r\n        if (!document.getElementById('fullscreen-style')) {\r\n          const style = document.createElement('style')\r\n          style.id = 'fullscreen-style'\r\n          style.textContent = `\r\n            .ldesign-editor.fullscreen {\r\n              position: fixed !important;\r\n              top: 0 !important;\r\n              left: 0 !important;\r\n              right: 0 !important;\r\n              bottom: 0 !important;\r\n              width: 100% !important;\r\n              height: 100% !important;\r\n              z-index: 9999 !important;\r\n              background: white !important;\r\n            }\r\n            .ldesign-editor.fullscreen .ldesign-editor-content {\r\n              height: calc(100vh - 60px) !important;\r\n              overflow-y: auto !important;\r\n            }\r\n          `\r\n          document.head.appendChild(style)\r\n        }\r\n      }\r\n      return true\r\n    },\r\n  },\r\n\r\n  // 查找替换\r\n  {\r\n    name: 'search',\r\n    title: '查找',\r\n    icon: 'search',\r\n    command: () => {\r\n      console.log('[Search] Button clicked, showing find dialog')\r\n      // 使用全局函数打开查找对话框\r\n      if ((window as any).openFindDialog) {\r\n        (window as any).openFindDialog()\r\n      }\r\n      else {\r\n        // 动态导入查找替换对话框\r\n        import('../plugins/utils/find-replace').then((module) => {\r\n          if (module.showFindReplaceDialog) {\r\n            console.log('[Search] Calling showFindReplaceDialog')\r\n            // 传递 editor 对象到查找替换对话框\r\n            module.showFindReplaceDialog((window as any).editor)\r\n          }\r\n        }).catch((err) => {\r\n          console.error('[Search] Failed to load find-replace module:', err)\r\n          // 备用方案：使用简单的 prompt\r\n          const text = prompt('查找内容:')\r\n          if (text && (window as any).find)\r\n            (window as any).find(text)\r\n        })\r\n      }\r\n      return true\r\n    },\r\n  },\r\n\r\n  // AI 功能下拉菜单\r\n  {\r\n    name: 'ai',\r\n    title: 'AI 助手',\r\n    icon: 'sparkles',\r\n    command: () => true, // 由 Toolbar.ts 以下拉方式处理\r\n  },\r\n\r\n  // 字数统计\r\n  {\r\n    name: 'wordCount',\r\n    title: '字数统计',\r\n    icon: 'file-text',\r\n    command: () => {\r\n      // 获取编辑器内容\r\n      const editorContent = document.querySelector('.ldesign-editor-content')\r\n      if (!editorContent)\r\n        return false\r\n\r\n      const text = editorContent.textContent || ''\r\n\r\n      // 统计字数\r\n      const words = text.trim() ? text.trim().split(/\\s+/).length : 0\r\n      const characters = text.length\r\n      const charactersNoSpaces = text.replace(/\\s/g, '').length\r\n      const paragraphs = text.split(/\\n{2,}/).filter(p => p.trim()).length\r\n      const lines = text.split('\\n').length\r\n\r\n      // 创建弹窗显示统计结果\r\n      const overlay = document.createElement('div')\r\n      overlay.style.cssText = `\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: rgba(0, 0, 0, 0.5);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        z-index: 10000;\r\n      `\r\n\r\n      const dialog = document.createElement('div')\r\n      dialog.style.cssText = `\r\n        background: white;\r\n        border-radius: 8px;\r\n        padding: 24px;\r\n        min-width: 300px;\r\n        box-shadow: 0 10px 40px rgba(0,0,0,0.2);\r\n      `\r\n\r\n      dialog.innerHTML = `\r\n        <h3 style=\"margin: 0 0 20px 0; font-size: 18px; font-weight: 600; display: flex; align-items: center; gap: 8px;\">\r\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n            <polyline points=\"14 2 14 8 20 8\"/>\r\n            <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n            <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n            <polyline points=\"10 9 9 9 8 9\"/>\r\n          </svg>\r\n          字数统计\r\n        </h3>\r\n        <div style=\"line-height: 1.8;\">\r\n          <div><strong>字数：</strong> ${words}</div>\r\n          <div><strong>字符（含空格）：</strong> ${characters}</div>\r\n          <div><strong>字符（不含空格）：</strong> ${charactersNoSpaces}</div>\r\n          <div><strong>段落数：</strong> ${paragraphs}</div>\r\n          <div><strong>行数：</strong> ${lines}</div>\r\n        </div>\r\n        <button style=\"\r\n          margin-top: 20px;\r\n          padding: 8px 16px;\r\n          background: #4f46e5;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          width: 100%;\r\n        \" onclick=\"this.closest('div').parentElement.remove()\">关闭</button>\r\n      `\r\n\r\n      overlay.appendChild(dialog)\r\n      document.body.appendChild(overlay)\r\n\r\n      // 点击遮罩层关闭\r\n      overlay.addEventListener('click', (e) => {\r\n        if (e.target === overlay)\r\n          overlay.remove()\r\n      })\r\n\r\n      return true\r\n    },\r\n  },\r\n]\r\n\r\n/**\r\n * 分组的工具栏配置\r\n */\r\nexport const TOOLBAR_GROUPS = {\r\n  history: ['undo', 'redo'],\r\n  format: ['bold', 'italic', 'underline', 'strike', 'inlineCode', 'superscript', 'subscript'],\r\n  heading: ['heading'],\r\n  block: ['blockquote', 'codeblock'],\r\n  list: ['bulletList', 'orderedList', 'taskList'],\r\n  indent: ['outdent', 'indent'],\r\n  align: ['align'],\r\n  insert: ['emoji', 'link', 'unlink', 'image', 'video', 'audio', 'file', 'table', 'horizontalRule'],\r\n  font: ['fontSize', 'fontFamily'],\r\n  color: ['textColor', 'backgroundColor'],\r\n  ai: ['ai'], // AI功能下拉菜单\r\n  tools: ['removeFormat', 'fullscreen', 'search', 'wordCount'],\r\n}\r\n\r\n/**\r\n * 获取带分隔符的工具栏项\r\n */\r\nexport function getToolbarItemsWithSeparators(): ToolbarItem[] {\r\n  const result: ToolbarItem[] = []\r\n  const groups = Object.values(TOOLBAR_GROUPS)\r\n\r\n  groups.forEach((group, index) => {\r\n    group.forEach((name) => {\r\n      const item = DEFAULT_TOOLBAR_ITEMS.find(i => i.name === name)\r\n      if (item)\r\n        result.push(item)\r\n    })\r\n\r\n    // 在组之间添加分隔符（最后一组除外）\r\n    if (index < groups.length - 1) {\r\n      result.push({\r\n        name: `separator-${index}`,\r\n        title: '',\r\n        icon: '',\r\n        command: () => true,\r\n        isSeparator: true,\r\n      } as any)\r\n    }\r\n  })\r\n\r\n  return result\r\n}\r\n"],"names":["execCommand","command","value","document","isCommandActive","queryCommandState","DEFAULT_TOOLBAR_ITEMS","name","title","icon","active","selection","window","getSelection","rangeCount","range","getRangeAt","text","toString","parent","commonAncestorContainer","parentElement","tagName","textNode","createTextNode","parentNode","replaceChild","html","url","prompt","input","createElement","type","onchange","e","file","target","files","fileUrl","URL","createObjectURL","fileSize","size","toFixed","fileHtml","click","color","editor","querySelector","classList","toggle","getElementById","style","id","textContent","head","appendChild","console","log","openFindDialog","then","module","showFindReplaceDialog","catch","err","error","find","editorContent","words","trim","split","length","characters","charactersNoSpaces","replace","paragraphs","filter","p","lines","overlay","cssText","dialog","innerHTML","body","addEventListener","remove"],"mappings":"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"}