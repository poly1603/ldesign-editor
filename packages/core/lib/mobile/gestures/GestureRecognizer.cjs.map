{"version":3,"file":"GestureRecognizer.cjs","sources":["../../../src/mobile/gestures/GestureRecognizer.ts"],"sourcesContent":["/**\r\n * 手势识别器\r\n * 识别和处理各种触摸手势\r\n */\r\n\r\nimport { EventEmitter } from '../../core/EventEmitter'\r\nimport { createLogger } from '../../utils/logger'\r\n\r\nconst logger = createLogger('GestureRecognizer')\r\n\r\nexport interface Touch {\r\n  identifier: number\r\n  pageX: number\r\n  pageY: number\r\n  clientX: number\r\n  clientY: number\r\n  screenX: number\r\n  screenY: number\r\n  target: EventTarget\r\n  timestamp: number\r\n}\r\n\r\nexport interface GestureEvent {\r\n  type: string\r\n  touches: Touch[]\r\n  center: { x: number, y: number }\r\n  deltaX: number\r\n  deltaY: number\r\n  deltaTime: number\r\n  distance: number\r\n  angle: number\r\n  velocity: { x: number, y: number }\r\n  scale: number\r\n  rotation: number\r\n  target: EventTarget\r\n  preventDefault: () => void\r\n}\r\n\r\nexport interface GestureRecognizerOptions {\r\n  /** 触摸开始延迟（ms） */\r\n  touchStartDelay?: number\r\n  /** 长按阈值（ms） */\r\n  longPressThreshold?: number\r\n  /** 双击间隔（ms） */\r\n  doubleTapInterval?: number\r\n  /** 滑动阈值（px） */\r\n  swipeThreshold?: number\r\n  /** 捏合阈值 */\r\n  pinchThreshold?: number\r\n  /** 是否阻止默认行为 */\r\n  preventDefault?: boolean\r\n  /** 是否停止事件传播 */\r\n  stopPropagation?: boolean\r\n}\r\n\r\ninterface TouchInfo {\r\n  identifier: number\r\n  startX: number\r\n  startY: number\r\n  startTime: number\r\n  currentX: number\r\n  currentY: number\r\n  previousX: number\r\n  previousY: number\r\n  velocityX: number\r\n  velocityY: number\r\n}\r\n\r\nexport class GestureRecognizer extends EventEmitter {\r\n  private element: HTMLElement\r\n  private options: Required<GestureRecognizerOptions>\r\n  private touches: Map<number, TouchInfo> = new Map()\r\n  private isGesturing = false\r\n  private lastTapTime = 0\r\n  private lastTapX = 0\r\n  private lastTapY = 0\r\n  private longPressTimer?: number\r\n  private initialDistance = 0\r\n  private initialAngle = 0\r\n  private gestureStartTime = 0\r\n\r\n  constructor(element: HTMLElement, options: GestureRecognizerOptions = {}) {\r\n    super()\r\n    this.element = element\r\n    this.options = {\r\n      touchStartDelay: 0,\r\n      longPressThreshold: 500,\r\n      doubleTapInterval: 300,\r\n      swipeThreshold: 30,\r\n      pinchThreshold: 0.1,\r\n      preventDefault: true,\r\n      stopPropagation: false,\r\n      ...options,\r\n    }\r\n\r\n    this.setupEventListeners()\r\n  }\r\n\r\n  /**\r\n   * 设置事件监听器\r\n   */\r\n  private setupEventListeners(): void {\r\n    // 触摸事件\r\n    this.element.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: false })\r\n    this.element.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false })\r\n    this.element.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: false })\r\n    this.element.addEventListener('touchcancel', this.handleTouchCancel.bind(this), { passive: false })\r\n\r\n    // 鼠标事件（用于开发测试）\r\n    if (process.env.NODE_ENV === 'development') {\r\n      let mouseDown = false\r\n\r\n      this.element.addEventListener('mousedown', (e) => {\r\n        mouseDown = true\r\n        this.handleTouchStart({\r\n          touches: [{\r\n            identifier: 0,\r\n            pageX: e.pageX,\r\n            pageY: e.pageY,\r\n            clientX: e.clientX,\r\n            clientY: e.clientY,\r\n            screenX: e.screenX,\r\n            screenY: e.screenY,\r\n            target: e.target,\r\n          }],\r\n          preventDefault: () => e.preventDefault(),\r\n          stopPropagation: () => e.stopPropagation(),\r\n        } as any)\r\n      })\r\n\r\n      document.addEventListener('mousemove', (e) => {\r\n        if (!mouseDown)\r\n          return\r\n        this.handleTouchMove({\r\n          touches: [{\r\n            identifier: 0,\r\n            pageX: e.pageX,\r\n            pageY: e.pageY,\r\n            clientX: e.clientX,\r\n            clientY: e.clientY,\r\n            screenX: e.screenX,\r\n            screenY: e.screenY,\r\n            target: e.target,\r\n          }],\r\n          preventDefault: () => e.preventDefault(),\r\n          stopPropagation: () => e.stopPropagation(),\r\n        } as any)\r\n      })\r\n\r\n      document.addEventListener('mouseup', (e) => {\r\n        if (!mouseDown)\r\n          return\r\n        mouseDown = false\r\n        this.handleTouchEnd({\r\n          touches: [],\r\n          changedTouches: [{\r\n            identifier: 0,\r\n            pageX: e.pageX,\r\n            pageY: e.pageY,\r\n            clientX: e.clientX,\r\n            clientY: e.clientY,\r\n            screenX: e.screenX,\r\n            screenY: e.screenY,\r\n            target: e.target,\r\n          }],\r\n          preventDefault: () => e.preventDefault(),\r\n          stopPropagation: () => e.stopPropagation(),\r\n        } as any)\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理触摸开始\r\n   */\r\n  private handleTouchStart(e: TouchEvent): void {\r\n    if (this.options.preventDefault)\r\n      e.preventDefault()\r\n    if (this.options.stopPropagation)\r\n      e.stopPropagation()\r\n\r\n    const timestamp = Date.now()\r\n\r\n    // 更新触摸点信息\r\n    Array.from(e.touches).forEach((touch) => {\r\n      this.touches.set(touch.identifier, {\r\n        identifier: touch.identifier,\r\n        startX: touch.pageX,\r\n        startY: touch.pageY,\r\n        startTime: timestamp,\r\n        currentX: touch.pageX,\r\n        currentY: touch.pageY,\r\n        previousX: touch.pageX,\r\n        previousY: touch.pageY,\r\n        velocityX: 0,\r\n        velocityY: 0,\r\n      })\r\n    })\r\n\r\n    // 手势开始\r\n    if (!this.isGesturing) {\r\n      this.isGesturing = true\r\n      this.gestureStartTime = timestamp\r\n\r\n      const gestureEvent = this.createGestureEvent('gesturestart', e)\r\n      this.emit('gesturestart', gestureEvent)\r\n    }\r\n\r\n    // 检测点击\r\n    if (e.touches.length === 1) {\r\n      const touch = e.touches[0]\r\n\r\n      // 检测双击\r\n      const timeDiff = timestamp - this.lastTapTime\r\n      const xDiff = Math.abs(touch.pageX - this.lastTapX)\r\n      const yDiff = Math.abs(touch.pageY - this.lastTapY)\r\n\r\n      if (timeDiff < this.options.doubleTapInterval && xDiff < 30 && yDiff < 30) {\r\n        this.emit('doubletap', this.createGestureEvent('doubletap', e))\r\n        this.lastTapTime = 0\r\n      }\r\n      else {\r\n        this.lastTapTime = timestamp\r\n        this.lastTapX = touch.pageX\r\n        this.lastTapY = touch.pageY\r\n      }\r\n\r\n      // 设置长按定时器\r\n      this.longPressTimer = window.setTimeout(() => {\r\n        const touchInfo = this.touches.get(touch.identifier)\r\n        if (touchInfo) {\r\n          const moveDistance = Math.sqrt(\r\n            (touchInfo.currentX - touchInfo.startX) ** 2\r\n            + (touchInfo.currentY - touchInfo.startY) ** 2,\r\n          )\r\n\r\n          // 如果移动距离很小，触发长按\r\n          if (moveDistance < 10)\r\n            this.emit('longpress', this.createGestureEvent('longpress', e))\r\n        }\r\n      }, this.options.longPressThreshold)\r\n    }\r\n\r\n    // 双指手势初始化\r\n    if (e.touches.length === 2) {\r\n      const [touch1, touch2] = Array.from(e.touches)\r\n      this.initialDistance = this.getDistance(touch1, touch2)\r\n      this.initialAngle = this.getAngle(touch1, touch2)\r\n\r\n      this.emit('pinchstart', this.createGestureEvent('pinchstart', e))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理触摸移动\r\n   */\r\n  private handleTouchMove(e: TouchEvent): void {\r\n    if (this.options.preventDefault)\r\n      e.preventDefault()\r\n    if (this.options.stopPropagation)\r\n      e.stopPropagation()\r\n\r\n    // 取消长按定时器\r\n    if (this.longPressTimer) {\r\n      clearTimeout(this.longPressTimer)\r\n      this.longPressTimer = undefined\r\n    }\r\n\r\n    const timestamp = Date.now()\r\n\r\n    // 更新触摸点信息\r\n    Array.from(e.touches).forEach((touch) => {\r\n      const touchInfo = this.touches.get(touch.identifier)\r\n      if (touchInfo) {\r\n        touchInfo.previousX = touchInfo.currentX\r\n        touchInfo.previousY = touchInfo.currentY\r\n        touchInfo.currentX = touch.pageX\r\n        touchInfo.currentY = touch.pageY\r\n\r\n        // 计算速度\r\n        const deltaTime = timestamp - touchInfo.startTime\r\n        if (deltaTime > 0) {\r\n          touchInfo.velocityX = (touchInfo.currentX - touchInfo.startX) / deltaTime * 1000\r\n          touchInfo.velocityY = (touchInfo.currentY - touchInfo.startY) / deltaTime * 1000\r\n        }\r\n      }\r\n    })\r\n\r\n    // 发送移动事件\r\n    const gestureEvent = this.createGestureEvent('gesturemove', e)\r\n    this.emit('gesturemove', gestureEvent)\r\n\r\n    // 单指滑动\r\n    if (e.touches.length === 1)\r\n      this.emit('pan', gestureEvent)\r\n\r\n    // 双指缩放和旋转\r\n    if (e.touches.length === 2) {\r\n      const [touch1, touch2] = Array.from(e.touches)\r\n      const currentDistance = this.getDistance(touch1, touch2)\r\n      const currentAngle = this.getAngle(touch1, touch2)\r\n\r\n      const scale = currentDistance / this.initialDistance\r\n      const rotation = currentAngle - this.initialAngle\r\n\r\n      const pinchEvent = {\r\n        ...gestureEvent,\r\n        scale,\r\n        rotation,\r\n      }\r\n\r\n      this.emit('pinch', pinchEvent)\r\n\r\n      // 检测缩放和旋转\r\n      if (Math.abs(scale - 1) > this.options.pinchThreshold)\r\n        this.emit('pinchzoom', pinchEvent)\r\n\r\n      if (Math.abs(rotation) > 5)\r\n        this.emit('rotate', pinchEvent)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理触摸结束\r\n   */\r\n  private handleTouchEnd(e: TouchEvent): void {\r\n    if (this.options.preventDefault)\r\n      e.preventDefault()\r\n    if (this.options.stopPropagation)\r\n      e.stopPropagation()\r\n\r\n    // 取消长按定时器\r\n    if (this.longPressTimer) {\r\n      clearTimeout(this.longPressTimer)\r\n      this.longPressTimer = undefined\r\n    }\r\n\r\n    const timestamp = Date.now()\r\n\r\n    // 处理结束的触摸点\r\n    Array.from(e.changedTouches).forEach((touch) => {\r\n      const touchInfo = this.touches.get(touch.identifier)\r\n      if (touchInfo) {\r\n        // 检测滑动\r\n        const deltaX = touchInfo.currentX - touchInfo.startX\r\n        const deltaY = touchInfo.currentY - touchInfo.startY\r\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY)\r\n        const duration = timestamp - touchInfo.startTime\r\n\r\n        if (distance > this.options.swipeThreshold && duration < 300) {\r\n          const direction = this.getSwipeDirection(deltaX, deltaY)\r\n          const swipeEvent = this.createGestureEvent('swipe', e)\r\n\r\n          this.emit('swipe', swipeEvent)\r\n          this.emit(`swipe${direction}`, swipeEvent)\r\n        }\r\n\r\n        // 检测点击\r\n        if (distance < 10 && duration < 200)\r\n          this.emit('tap', this.createGestureEvent('tap', e))\r\n\r\n        this.touches.delete(touch.identifier)\r\n      }\r\n    })\r\n\r\n    // 双指手势结束\r\n    if (e.touches.length < 2 && this.touches.size === 1)\r\n      this.emit('pinchend', this.createGestureEvent('pinchend', e))\r\n\r\n    // 手势结束\r\n    if (e.touches.length === 0) {\r\n      this.isGesturing = false\r\n      this.emit('gestureend', this.createGestureEvent('gestureend', e))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理触摸取消\r\n   */\r\n  private handleTouchCancel(e: TouchEvent): void {\r\n    this.handleTouchEnd(e)\r\n  }\r\n\r\n  /**\r\n   * 创建手势事件\r\n   */\r\n  private createGestureEvent(type: string, e: TouchEvent): GestureEvent {\r\n    const touches = Array.from(e.touches).map(touch => ({\r\n      identifier: touch.identifier,\r\n      pageX: touch.pageX,\r\n      pageY: touch.pageY,\r\n      clientX: touch.clientX,\r\n      clientY: touch.clientY,\r\n      screenX: touch.screenX,\r\n      screenY: touch.screenY,\r\n      target: touch.target,\r\n      timestamp: Date.now(),\r\n    }))\r\n\r\n    const center = this.getCenter(touches)\r\n    const touchInfos = Array.from(this.touches.values())\r\n\r\n    let deltaX = 0\r\n    let deltaY = 0\r\n    let distance = 0\r\n    let angle = 0\r\n    let velocity = { x: 0, y: 0 }\r\n    let scale = 1\r\n    let rotation = 0\r\n\r\n    if (touchInfos.length > 0) {\r\n      const avgDeltaX = touchInfos.reduce((sum, t) => sum + (t.currentX - t.startX), 0) / touchInfos.length\r\n      const avgDeltaY = touchInfos.reduce((sum, t) => sum + (t.currentY - t.startY), 0) / touchInfos.length\r\n      deltaX = avgDeltaX\r\n      deltaY = avgDeltaY\r\n      distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY)\r\n      angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI\r\n\r\n      const avgVelocityX = touchInfos.reduce((sum, t) => sum + t.velocityX, 0) / touchInfos.length\r\n      const avgVelocityY = touchInfos.reduce((sum, t) => sum + t.velocityY, 0) / touchInfos.length\r\n      velocity = { x: avgVelocityX, y: avgVelocityY }\r\n    }\r\n\r\n    if (touches.length === 2 && this.initialDistance > 0) {\r\n      const currentDistance = this.getDistance(touches[0], touches[1])\r\n      scale = currentDistance / this.initialDistance\r\n\r\n      const currentAngle = this.getAngle(touches[0], touches[1])\r\n      rotation = currentAngle - this.initialAngle\r\n    }\r\n\r\n    return {\r\n      type,\r\n      touches,\r\n      center,\r\n      deltaX,\r\n      deltaY,\r\n      deltaTime: Date.now() - this.gestureStartTime,\r\n      distance,\r\n      angle,\r\n      velocity,\r\n      scale,\r\n      rotation,\r\n      target: e.target!,\r\n      preventDefault: () => e.preventDefault(),\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取两点间距离\r\n   */\r\n  private getDistance(touch1: Touch | TouchInfo, touch2: Touch | TouchInfo): number {\r\n    const x1 = 'pageX' in touch1 ? touch1.pageX : touch1.currentX\r\n    const y1 = 'pageY' in touch1 ? touch1.pageY : touch1.currentY\r\n    const x2 = 'pageX' in touch2 ? touch2.pageX : touch2.currentX\r\n    const y2 = 'pageY' in touch2 ? touch2.pageY : touch2.currentY\r\n\r\n    return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)\r\n  }\r\n\r\n  /**\r\n   * 获取两点间角度\r\n   */\r\n  private getAngle(touch1: Touch | TouchInfo, touch2: Touch | TouchInfo): number {\r\n    const x1 = 'pageX' in touch1 ? touch1.pageX : touch1.currentX\r\n    const y1 = 'pageY' in touch1 ? touch1.pageY : touch1.currentY\r\n    const x2 = 'pageX' in touch2 ? touch2.pageX : touch2.currentX\r\n    const y2 = 'pageY' in touch2 ? touch2.pageY : touch2.currentY\r\n\r\n    return Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI\r\n  }\r\n\r\n  /**\r\n   * 获取触摸点中心\r\n   */\r\n  private getCenter(touches: Touch[]): { x: number, y: number } {\r\n    if (touches.length === 0)\r\n      return { x: 0, y: 0 }\r\n\r\n    const sumX = touches.reduce((sum, touch) => sum + touch.pageX, 0)\r\n    const sumY = touches.reduce((sum, touch) => sum + touch.pageY, 0)\r\n\r\n    return {\r\n      x: sumX / touches.length,\r\n      y: sumY / touches.length,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取滑动方向\r\n   */\r\n  private getSwipeDirection(deltaX: number, deltaY: number): string {\r\n    const absX = Math.abs(deltaX)\r\n    const absY = Math.abs(deltaY)\r\n\r\n    if (absX > absY)\r\n      return deltaX > 0 ? 'right' : 'left'\r\n    else\r\n      return deltaY > 0 ? 'down' : 'up'\r\n  }\r\n\r\n  /**\r\n   * 销毁手势识别器\r\n   */\r\n  destroy(): void {\r\n    this.element.removeEventListener('touchstart', this.handleTouchStart.bind(this))\r\n    this.element.removeEventListener('touchmove', this.handleTouchMove.bind(this))\r\n    this.element.removeEventListener('touchend', this.handleTouchEnd.bind(this))\r\n    this.element.removeEventListener('touchcancel', this.handleTouchCancel.bind(this))\r\n\r\n    if (this.longPressTimer)\r\n      clearTimeout(this.longPressTimer)\r\n\r\n    this.touches.clear()\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n"],"names":["createLogger","GestureRecognizer","EventEmitter","constructor","element","options","touches","Map","isGesturing","lastTapTime","lastTapX","lastTapY","initialDistance","initialAngle","gestureStartTime","touchStartDelay","longPressThreshold","doubleTapInterval","swipeThreshold","pinchThreshold","preventDefault","stopPropagation","setupEventListeners","addEventListener","handleTouchStart","bind","passive","handleTouchMove","handleTouchEnd","handleTouchCancel","process","env","NODE_ENV","mouseDown","e","identifier","pageX","pageY","clientX","clientY","screenX","screenY","target","document","changedTouches","timestamp","Date","now","Array","from","forEach","touch","set","startX","startY","startTime","currentX","currentY","previousX","previousY","velocityX","velocityY","gestureEvent","createGestureEvent","emit","length","timeDiff","xDiff","Math","abs","yDiff","longPressTimer","window","setTimeout","touchInfo","get","moveDistance","sqrt","touch1","touch2","getDistance","getAngle","clearTimeout","undefined","deltaTime","currentDistance","currentAngle","scale","rotation","pinchEvent","deltaX","deltaY","distance","duration","direction","getSwipeDirection","swipeEvent","delete","size","type","map","center","getCenter","touchInfos","values","angle","velocity","x","y","avgDeltaX","reduce","sum","t","avgDeltaY","atan2","PI","avgVelocityX","avgVelocityY","x1","y1","x2","y2","sumX","sumY","absX","absY","destroy","removeEventListener","clear","removeAllListeners"],"mappings":"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"}