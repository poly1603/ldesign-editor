{"version":3,"file":"MediaContextMenuPlugin.cjs","sources":["../../../../src/plugins/media/media-context-menu/MediaContextMenuPlugin.ts"],"sourcesContent":["import type { MenuItem } from '../../../ui/ContextMenuSystem'\r\nimport type { Editor } from '../../../core/Editor'\r\nimport type { Plugin } from '../../../types'\r\nimport { getContextMenuManager, registerContextMenu } from '../../../core/ContextMenuManager'\r\nimport { getLucideIcon } from '../../../utils/icons'\r\nimport { MediaPropertiesDialog } from './MediaPropertiesDialog'\r\n\r\n/**\r\n * Media Context Menu Plugin\r\n * Provides right-click context menus for images, videos, and audio elements\r\n */\r\nexport class MediaContextMenuPlugin implements Plugin {\r\n  name = 'MediaContextMenu'\r\n  editor: Editor | null = null\r\n  private propertiesDialog: MediaPropertiesDialog | null = null\r\n  private registeredMenuIds: string[] = []\r\n\r\n  install(editor: Editor): void {\r\n    this.editor = editor\r\n    this.propertiesDialog = new MediaPropertiesDialog(editor)\r\n\r\n    // Register menus with the global ContextMenuManager so they take precedence\r\n    this.registerWithManager()\r\n    this.bindEvents()\r\n    console.log('[MediaContextMenu] Plugin installed')\r\n  }\r\n\r\n  // Register media menus with the shared manager (high priority)\r\n  private registerWithManager() {\r\n    if (!this.editor)\r\n      return\r\n\r\n    const manager = getContextMenuManager()\r\n    if (this.editor.contentElement)\r\n      manager.setContainer(this.editor.contentElement)\r\n\r\n    // Image menu\r\n    registerContextMenu({\r\n      id: 'media-image-menu',\r\n      selector: '.ldesign-editor-content img',\r\n      priority: 20, // higher than paragraph/table\r\n      items: ctx => this.getImageMenuItems(ctx.element as HTMLImageElement) as unknown as MenuItem[],\r\n    })\r\n\r\n    // Video menu\r\n    registerContextMenu({\r\n      id: 'media-video-menu',\r\n      selector: '.ldesign-editor-content video',\r\n      priority: 20,\r\n      items: ctx => this.getVideoMenuItems(ctx.element as HTMLVideoElement) as unknown as MenuItem[],\r\n    })\r\n\r\n    // Audio menu\r\n    registerContextMenu({\r\n      id: 'media-audio-menu',\r\n      selector: '.ldesign-editor-content audio',\r\n      priority: 20,\r\n      items: ctx => this.getAudioMenuItems(ctx.element as HTMLAudioElement) as unknown as MenuItem[],\r\n    })\r\n\r\n    this.registeredMenuIds = ['media-image-menu', 'media-video-menu', 'media-audio-menu']\r\n  }\r\n\r\n  private bindEvents() {\r\n    if (!this.editor || !this.editor.contentElement)\r\n      return\r\n\r\n    // Only keep double-click behavior. Context menu is handled by ContextMenuManager now.\r\n    this.editor.contentElement.addEventListener('dblclick', (e) => {\r\n      const target = e.target as HTMLElement\r\n      if (this.isMediaElement(target)) {\r\n        e.preventDefault()\r\n        this.openProperties(target)\r\n      }\r\n    })\r\n  }\r\n\r\n  private isMediaElement(element: HTMLElement): boolean {\r\n    const tagName = element.tagName.toLowerCase()\r\n    return tagName === 'img' || tagName === 'video' || tagName === 'audio'\r\n  }\r\n\r\n  private getMenuItemsForElement(element: HTMLElement): MenuItem[] {\r\n    const tagName = element.tagName.toLowerCase()\r\n\r\n    switch (tagName) {\r\n      case 'img':\r\n        return this.getImageMenuItems(element as HTMLImageElement) as unknown as MenuItem[]\r\n      case 'video':\r\n        return this.getVideoMenuItems(element as HTMLVideoElement) as unknown as MenuItem[]\r\n      case 'audio':\r\n        return this.getAudioMenuItems(element as HTMLAudioElement) as unknown as MenuItem[]\r\n      default:\r\n        return []\r\n    }\r\n  }\r\n\r\n  private getImageMenuItems(img: HTMLImageElement): MenuItem[] {\r\n    return [\r\n      {\r\n        id: 'properties',\r\n        label: '图片属性',\r\n        icon: getLucideIcon('settings'),\r\n        shortcut: 'Alt+Enter',\r\n        action: ctx => this.openProperties(ctx?.element || ctx),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'filters',\r\n        label: '滤镜效果',\r\n        icon: getLucideIcon('palette'),\r\n        submenu: [\r\n          {\r\n            id: 'filter-none',\r\n            label: '无滤镜',\r\n            checked: !img.style.filter,\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, ''),\r\n          },\r\n          { divider: true },\r\n          {\r\n            id: 'filter-grayscale',\r\n            label: '黑白',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'grayscale(100%)'),\r\n          },\r\n          {\r\n            id: 'filter-sepia',\r\n            label: '复古',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'sepia(100%)'),\r\n          },\r\n          {\r\n            id: 'filter-blur',\r\n            label: '模糊',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'blur(3px)'),\r\n          },\r\n          {\r\n            id: 'filter-brightness',\r\n            label: '增亮',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'brightness(1.5)'),\r\n          },\r\n          {\r\n            id: 'filter-contrast',\r\n            label: '高对比度',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'contrast(1.5)'),\r\n          },\r\n          {\r\n            id: 'filter-invert',\r\n            label: '反色',\r\n            action: ctx => this.applyFilter(ctx?.element || ctx, 'invert(100%)'),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'size',\r\n        label: '尺寸',\r\n        icon: getLucideIcon('maximize'),\r\n        submenu: [\r\n          {\r\n            id: 'size-small',\r\n            label: 'Text',\r\n            action: ctx => this.setImageSize(ctx?.element || ctx, '25%'),\r\n          },\r\n          {\r\n            id: 'size-medium',\r\n            label: 'Text',\r\n            action: ctx => this.setImageSize(ctx?.element || ctx, '50%'),\r\n          },\r\n          {\r\n            id: 'size-large',\r\n            label: 'Text',\r\n            action: ctx => this.setImageSize(ctx?.element || ctx, '75%'),\r\n          },\r\n          {\r\n            id: 'size-full',\r\n            label: '原始大小',\r\n            action: ctx => this.setImageSize(ctx?.element || ctx, 'auto'),\r\n          },\r\n          { divider: true },\r\n          {\r\n            id: 'size-custom',\r\n            label: 'Text',\r\n            action: ctx => this.openSizeDialog(ctx?.element || ctx),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'align',\r\n        label: '对齐方式',\r\n        icon: getLucideIcon('alignJustify'),\r\n        submenu: [\r\n          {\r\n            id: 'align-left',\r\n            label: '左对齐',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'left'),\r\n          },\r\n          {\r\n            id: 'align-center',\r\n            label: '居中',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'center'),\r\n          },\r\n          {\r\n            id: 'align-right',\r\n            label: '右对齐',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'right'),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'float',\r\n        label: '文字环绕',\r\n        icon: getLucideIcon('wrapText'),\r\n        submenu: [\r\n          {\r\n            id: 'float-none',\r\n            label: '无环绕',\r\n            checked: !img.style.float,\r\n            action: ctx => this.setFloat(ctx?.element || ctx, 'none'),\r\n          },\r\n          {\r\n            id: 'float-left',\r\n            label: '左侧环绕',\r\n            action: ctx => this.setFloat(ctx?.element || ctx, 'left'),\r\n          },\r\n          {\r\n            id: 'float-right',\r\n            label: '右侧环绕',\r\n            action: ctx => this.setFloat(ctx?.element || ctx, 'right'),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'border',\r\n        label: '边框',\r\n        icon: getLucideIcon('square'),\r\n        submenu: [\r\n          {\r\n            id: 'border-none',\r\n            label: '无边框',\r\n            checked: !img.style.border,\r\n            action: ctx => this.setBorder(ctx?.element || ctx, 'none'),\r\n          },\r\n          {\r\n            id: 'border-thin',\r\n            label: '细边框',\r\n            action: ctx => this.setBorder(ctx?.element || ctx, '1px solid #ccc'),\r\n          },\r\n          {\r\n            id: 'border-medium',\r\n            label: '中等边框',\r\n            action: ctx => this.setBorder(ctx?.element || ctx, '2px solid #999'),\r\n          },\r\n          {\r\n            id: 'border-thick',\r\n            label: '粗边框',\r\n            action: ctx => this.setBorder(ctx?.element || ctx, '3px solid #666'),\r\n          },\r\n          {\r\n            id: 'border-rounded',\r\n            label: '圆角边框',\r\n            action: (ctx) => {\r\n              const target = ctx?.element || ctx\r\n              this.setBorder(target, '2px solid #999');\r\n              (target as HTMLElement).style.borderRadius = '8px'\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'shadow',\r\n        label: '阴影',\r\n        icon: getLucideIcon('droplet'),\r\n        submenu: [\r\n          {\r\n            id: 'shadow-none',\r\n            label: '无阴影',\r\n            checked: !img.style.boxShadow,\r\n            action: ctx => this.setShadow(ctx?.element || ctx, 'none'),\r\n          },\r\n          {\r\n            id: 'shadow-small',\r\n            label: '小阴影',\r\n            action: ctx => this.setShadow(ctx?.element || ctx, '0 2px 4px rgba(0,0,0,0.1)'),\r\n          },\r\n          {\r\n            id: 'shadow-medium',\r\n            label: '中等阴影',\r\n            action: ctx => this.setShadow(ctx?.element || ctx, '0 4px 8px rgba(0,0,0,0.15)'),\r\n          },\r\n          {\r\n            id: 'shadow-large',\r\n            label: '大阴影',\r\n            action: ctx => this.setShadow(ctx?.element || ctx, '0 8px 16px rgba(0,0,0,0.2)'),\r\n          },\r\n        ],\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'copy-image',\r\n        label: '复制图片',\r\n        icon: getLucideIcon('copy'),\r\n        shortcut: 'Ctrl+C',\r\n        action: ctx => this.copyImage((ctx?.element || ctx) as HTMLImageElement),\r\n      },\r\n      {\r\n        id: 'save-as',\r\n        label: 'Text',\r\n        icon: getLucideIcon('download'),\r\n        shortcut: 'Ctrl+S',\r\n        action: ctx => this.saveImage((ctx?.element || ctx) as HTMLImageElement),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'delete',\r\n        label: '删除',\r\n        icon: getLucideIcon('trash2'),\r\n        shortcut: 'Delete',\r\n        action: ctx => this.deleteElement(ctx?.element || ctx),\r\n      },\r\n    ]\r\n  }\r\n\r\n  private getVideoMenuItems(video: HTMLVideoElement): MenuItem[] {\r\n    return [\r\n      {\r\n        id: 'properties',\r\n        label: '视频属性',\r\n        icon: getLucideIcon('settings'),\r\n        shortcut: 'Alt+Enter',\r\n        action: ctx => this.openProperties(ctx?.element || ctx),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'playback',\r\n        label: '播放控制',\r\n        icon: getLucideIcon('play'),\r\n        submenu: [\r\n          {\r\n            id: 'play-pause',\r\n            label: video.paused ? '播放' : '暂停',\r\n            action: ctx => this.togglePlayPause((ctx?.element || ctx) as HTMLVideoElement),\r\n          },\r\n          {\r\n            id: 'mute',\r\n            label: video.muted ? '取消静音' : '静音',\r\n            action: ctx => this.toggleMute((ctx?.element || ctx) as HTMLVideoElement),\r\n          },\r\n          { divider: true },\r\n          {\r\n            id: 'speed-0.5',\r\n            label: '0.5x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLVideoElement, 0.5),\r\n          },\r\n          {\r\n            id: 'speed-1',\r\n            label: '正常速度',\r\n            checked: video.playbackRate === 1,\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLVideoElement, 1),\r\n          },\r\n          {\r\n            id: 'speed-1.5',\r\n            label: '1.5x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLVideoElement, 1.5),\r\n          },\r\n          {\r\n            id: 'speed-2',\r\n            label: '2x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLVideoElement, 2),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'size',\r\n        label: '尺寸',\r\n        icon: getLucideIcon('maximize'),\r\n        submenu: [\r\n          {\r\n            id: 'size-small',\r\n            label: 'Text',\r\n            action: ctx => this.setVideoSize(ctx?.element || ctx, 320),\r\n          },\r\n          {\r\n            id: 'size-medium',\r\n            label: 'Text',\r\n            action: ctx => this.setVideoSize(ctx?.element || ctx, 640),\r\n          },\r\n          {\r\n            id: 'size-large',\r\n            label: 'Text',\r\n            action: ctx => this.setVideoSize(ctx?.element || ctx, 960),\r\n          },\r\n          {\r\n            id: 'size-full',\r\n            label: '全宽',\r\n            action: ctx => this.setVideoSize(ctx?.element || ctx, -1),\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        id: 'align',\r\n        label: '对齐方式',\r\n        icon: getLucideIcon('alignJustify'),\r\n        submenu: [\r\n          {\r\n            id: 'align-left',\r\n            label: '左对齐',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'left'),\r\n          },\r\n          {\r\n            id: 'align-center',\r\n            label: '居中',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'center'),\r\n          },\r\n          {\r\n            id: 'align-right',\r\n            label: '右对齐',\r\n            action: ctx => this.setAlignment(ctx?.element || ctx, 'right'),\r\n          },\r\n        ],\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'loop',\r\n        label: '循环播放',\r\n        icon: getLucideIcon('repeat'),\r\n        checked: video.loop,\r\n        action: ctx => this.toggleLoop((ctx?.element || ctx) as HTMLVideoElement),\r\n      },\r\n      {\r\n        id: 'controls',\r\n        label: '显示控件',\r\n        icon: getLucideIcon('eye'),\r\n        checked: video.controls,\r\n        action: ctx => this.toggleControls((ctx?.element || ctx) as HTMLVideoElement),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'delete',\r\n        label: '删除',\r\n        icon: getLucideIcon('trash2'),\r\n        shortcut: 'Delete',\r\n        action: ctx => this.deleteElement(ctx?.element || ctx),\r\n      },\r\n    ]\r\n  }\r\n\r\n  private getAudioMenuItems(audio: HTMLAudioElement): MenuItem[] {\r\n    return [\r\n      {\r\n        id: 'properties',\r\n        label: '音频属性',\r\n        icon: getLucideIcon('settings'),\r\n        shortcut: 'Alt+Enter',\r\n        action: ctx => this.openProperties(ctx?.element || ctx),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'playback',\r\n        label: '播放控制',\r\n        icon: getLucideIcon('music'),\r\n        submenu: [\r\n          {\r\n            id: 'play-pause',\r\n            label: audio.paused ? '播放' : '暂停',\r\n            action: ctx => this.togglePlayPause((ctx?.element || ctx) as HTMLAudioElement),\r\n          },\r\n          {\r\n            id: 'mute',\r\n            label: audio.muted ? '取消静音' : '静音',\r\n            action: ctx => this.toggleMute((ctx?.element || ctx) as HTMLAudioElement),\r\n          },\r\n          { divider: true },\r\n          {\r\n            id: 'speed-0.5',\r\n            label: '0.5x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLAudioElement, 0.5),\r\n          },\r\n          {\r\n            id: 'speed-1',\r\n            label: '正常速度',\r\n            checked: audio.playbackRate === 1,\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLAudioElement, 1),\r\n          },\r\n          {\r\n            id: 'speed-1.5',\r\n            label: '1.5x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLAudioElement, 1.5),\r\n          },\r\n          {\r\n            id: 'speed-2',\r\n            label: '2x 速度',\r\n            action: ctx => this.setPlaybackSpeed((ctx?.element || ctx) as HTMLAudioElement, 2),\r\n          },\r\n        ],\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'loop',\r\n        label: '循环播放',\r\n        icon: getLucideIcon('repeat'),\r\n        checked: audio.loop,\r\n        action: ctx => this.toggleLoop((ctx?.element || ctx) as HTMLAudioElement),\r\n      },\r\n      {\r\n        id: 'controls',\r\n        label: '显示控件',\r\n        icon: getLucideIcon('eye'),\r\n        checked: audio.controls,\r\n        action: ctx => this.toggleControls((ctx?.element || ctx) as HTMLAudioElement),\r\n      },\r\n      { divider: true },\r\n      {\r\n        id: 'delete',\r\n        label: '删除',\r\n        icon: getLucideIcon('trash2'),\r\n        shortcut: 'Delete',\r\n        action: ctx => this.deleteElement(ctx?.element || ctx),\r\n      },\r\n    ]\r\n  }\r\n\r\n  // Image-specific actions\r\n  private applyFilter(target: HTMLElement, filter: string) {\r\n    target.style.filter = filter\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Applied filter:', filter)\r\n  }\r\n\r\n  private setImageSize(target: HTMLElement, size: string) {\r\n    if (size === 'auto') {\r\n      target.style.width = ''\r\n      target.style.height = ''\r\n    }\r\n    else {\r\n      target.style.width = size\r\n      target.style.height = 'auto'\r\n    }\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set image size:', size)\r\n  }\r\n\r\n  private setAlignment(target: HTMLElement, align: string) {\r\n    target.style.display = 'block'\r\n    if (align === 'center') {\r\n      target.style.marginLeft = 'auto'\r\n      target.style.marginRight = 'auto'\r\n    }\r\n    else if (align === 'left') {\r\n      target.style.marginLeft = '0'\r\n      target.style.marginRight = 'auto'\r\n    }\r\n    else if (align === 'right') {\r\n      target.style.marginLeft = 'auto'\r\n      target.style.marginRight = '0'\r\n    }\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set alignment:', align)\r\n  }\r\n\r\n  private setFloat(target: HTMLElement, float: string) {\r\n    if (float === 'none') {\r\n      target.style.float = ''\r\n      target.style.margin = ''\r\n    }\r\n    else {\r\n      target.style.float = float\r\n      target.style.margin = '10px'\r\n      if (float === 'left')\r\n        target.style.marginLeft = '0'\r\n      else\r\n        target.style.marginRight = '0'\r\n    }\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set float:', float)\r\n  }\r\n\r\n  private setBorder(target: HTMLElement, border: string) {\r\n    target.style.border = border\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set border:', border)\r\n  }\r\n\r\n  private setShadow(target: HTMLElement, shadow: string) {\r\n    target.style.boxShadow = shadow\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set shadow:', shadow)\r\n  }\r\n\r\n  private copyImage(img: HTMLImageElement) {\r\n    // Create a canvas to copy the image\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = img.naturalWidth\r\n    canvas.height = img.naturalHeight\r\n    const ctx = canvas.getContext('2d')\r\n    if (ctx) {\r\n      ctx.drawImage(img, 0, 0)\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          const item = new ClipboardItem({ 'image/png': blob })\r\n          navigator.clipboard.write([item]).then(() => {\r\n            console.log('[MediaContextMenu] Image copied to clipboard')\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  private saveImage(img: HTMLImageElement) {\r\n    const link = document.createElement('a')\r\n    link.href = img.src\r\n    link.download = img.alt || 'image.png'\r\n    link.click()\r\n    console.log('[MediaContextMenu] Image download initiated')\r\n  }\r\n\r\n  // Video/Audio-specific actions\r\n  private togglePlayPause(media: HTMLVideoElement | HTMLAudioElement) {\r\n    if (media.paused)\r\n      media.play()\r\n    else\r\n      media.pause()\r\n\r\n    console.log('[MediaContextMenu] Toggle play/pause:', !media.paused)\r\n  }\r\n\r\n  private toggleMute(media: HTMLVideoElement | HTMLAudioElement) {\r\n    media.muted = !media.muted\r\n    console.log('[MediaContextMenu] Toggle mute:', media.muted)\r\n  }\r\n\r\n  private setPlaybackSpeed(media: HTMLVideoElement | HTMLAudioElement, speed: number) {\r\n    media.playbackRate = speed\r\n    console.log('[MediaContextMenu] Set playback speed:', speed)\r\n  }\r\n\r\n  private setVideoSize(target: HTMLElement, width: number) {\r\n    if (width === -1)\r\n      target.style.width = '100%'\r\n    else\r\n      target.style.width = `${width}px`\r\n\r\n    target.style.height = 'auto'\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Set video size:', width)\r\n  }\r\n\r\n  private toggleLoop(media: HTMLVideoElement | HTMLAudioElement) {\r\n    media.loop = !media.loop\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Toggle loop:', media.loop)\r\n  }\r\n\r\n  private toggleControls(media: HTMLVideoElement | HTMLAudioElement) {\r\n    media.controls = !media.controls\r\n    this.editor?.emit('input')\r\n    console.log('[MediaContextMenu] Toggle controls:', media.controls)\r\n  }\r\n\r\n  // Common actions\r\n  private deleteElement(target: HTMLElement) {\r\n    if (confirm('确定要删除这个元素吗？')) {\r\n      target.remove()\r\n      this.editor?.emit('input')\r\n      console.log('[MediaContextMenu] Element deleted')\r\n    }\r\n  }\r\n\r\n  private openSizeDialog(target: HTMLElement) {\r\n    const width = prompt('请输入宽度?(例如: 300px, 50%, auto):', target.style.width || 'auto')\r\n    if (width !== null) {\r\n      const height = prompt('请输入高度?(例如: 200px, auto):', target.style.height || 'auto')\r\n      if (height !== null) {\r\n        target.style.width = width\r\n        target.style.height = height\r\n        this.editor?.emit('input')\r\n        console.log('[MediaContextMenu] Custom size set:', width, height)\r\n      }\r\n    }\r\n  }\r\n\r\n  private openProperties(target: HTMLElement) {\r\n    if (this.propertiesDialog)\r\n      this.propertiesDialog.open(target)\r\n  }\r\n\r\n  destroy(): void {\r\n    // Unregister menus from manager\r\n    if (this.registeredMenuIds.length) {\r\n      try {\r\n        const manager = getContextMenuManager()\r\n        this.registeredMenuIds.forEach((id) => {\r\n          try { (manager as any).unregister(id) }\r\n          catch {}\r\n        })\r\n      }\r\n      catch {}\r\n      this.registeredMenuIds = []\r\n    }\r\n    if (this.propertiesDialog) {\r\n      this.propertiesDialog.destroy()\r\n      this.propertiesDialog = null\r\n    }\r\n    console.log('[MediaContextMenu] Plugin destroyed')\r\n  }\r\n}\r\n\r\n// Export the plugin\r\nexport default MediaContextMenuPlugin\r\n"],"names":["MediaContextMenuPlugin","name","editor","propertiesDialog","registeredMenuIds","install","MediaPropertiesDialog","registerWithManager","bindEvents","console","log","manager","getContextMenuManager","contentElement","setContainer","registerContextMenu","id","selector","priority","items","ctx","getImageMenuItems","element","getVideoMenuItems","getAudioMenuItems","addEventListener","e","target","isMediaElement","preventDefault","openProperties","tagName","toLowerCase","getMenuItemsForElement","img","label","icon","getLucideIcon","shortcut","action","divider","submenu","checked","style","filter","applyFilter","setImageSize","openSizeDialog","setAlignment","float","setFloat","border","setBorder","borderRadius","boxShadow","setShadow","copyImage","saveImage","deleteElement","video","paused","togglePlayPause","muted","toggleMute","setPlaybackSpeed","playbackRate","setVideoSize","loop","toggleLoop","controls","toggleControls","audio","emit","size","width","height","align","display","marginLeft","marginRight","margin","shadow","canvas","document","createElement","naturalWidth","naturalHeight","getContext","drawImage","toBlob","blob","item","ClipboardItem","navigator","clipboard","write","then","link","href","src","download","alt","click","media","play","pause","speed","confirm","remove","prompt","open","destroy","length","forEach","unregister"],"mappings":";;;;;;;;;;;;;;;;;AAWO,MAAMA,sBAAAA,CAAyC;AAAA,EAA/C,WAAA,GAAA;AACLC,IAAAA,IAAAA,CAAAA,IAAAA,GAAO,kBAAA;AACPC,IAAAA,IAAAA,CAAAA,MAAAA,GAAwB,IAAA;AACxB,IAAA,IAAA,CAAQC,gBAAAA,GAAiD,IAAA;AACzD,IAAA,IAAA,CAAQC,oBAA8B,EAAA;AAAA,EAAA;AAAA,EAEtCC,QAAQH,MAAAA,EAAsB;AAC5B,IAAA,IAAA,CAAKA,MAAAA,GAASA,MAAAA;AACd,IAAA,IAAA,CAAKC,gBAAAA,GAAmB,IAAIG,2CAAAA,CAAsBJ,MAAM,CAAA;AAGxD,IAAA,IAAA,CAAKK,mBAAAA,EAAoB;AACzB,IAAA,IAAA,CAAKC,UAAAA,EAAW;AAChBC,IAAAA,OAAAA,CAAQC,IAAI,qCAAqC,CAAA;AAAA,EACnD;AAAA;AAAA,EAGQH,mBAAAA,GAAsB;AAC5B,IAAA,IAAI,CAAC,IAAA,CAAKL,MAAAA;AACR,MAAA;AAEF,IAAA,MAAMS,UAAUC,wCAAAA,EAAsB;AACtC,IAAA,IAAI,KAAKV,MAAAA,CAAOW,cAAAA;AACdF,MAAAA,OAAAA,CAAQG,YAAAA,CAAa,IAAA,CAAKZ,MAAAA,CAAOW,cAAc,CAAA;AAGjDE,IAAAA,sCAAAA,CAAoB;AAAA,MAClBC,EAAAA,EAAI,kBAAA;AAAA,MACJC,QAAAA,EAAU,6BAAA;AAAA,MACVC,QAAAA,EAAU,EAAA;AAAA;AAAA,MACVC,KAAAA,EAAOC,CAAAA,GAAAA,KAAO,IAAA,CAAKC,iBAAAA,CAAkBD,IAAIE,OAA2B;AAAA,KACrE,CAAA;AAGDP,IAAAA,sCAAAA,CAAoB;AAAA,MAClBC,EAAAA,EAAI,kBAAA;AAAA,MACJC,QAAAA,EAAU,+BAAA;AAAA,MACVC,QAAAA,EAAU,EAAA;AAAA,MACVC,KAAAA,EAAOC,CAAAA,GAAAA,KAAO,IAAA,CAAKG,iBAAAA,CAAkBH,IAAIE,OAA2B;AAAA,KACrE,CAAA;AAGDP,IAAAA,sCAAAA,CAAoB;AAAA,MAClBC,EAAAA,EAAI,kBAAA;AAAA,MACJC,QAAAA,EAAU,+BAAA;AAAA,MACVC,QAAAA,EAAU,EAAA;AAAA,MACVC,KAAAA,EAAOC,CAAAA,GAAAA,KAAO,IAAA,CAAKI,iBAAAA,CAAkBJ,IAAIE,OAA2B;AAAA,KACrE,CAAA;AAED,IAAA,IAAA,CAAKlB,iBAAAA,GAAoB,CAAC,kBAAA,EAAoB,kBAAA,EAAoB,kBAAkB,CAAA;AAAA,EACtF;AAAA,EAEQI,UAAAA,GAAa;AACnB,IAAA,IAAI,CAAC,IAAA,CAAKN,MAAAA,IAAU,CAAC,KAAKA,MAAAA,CAAOW,cAAAA;AAC/B,MAAA;AAGF,IAAA,IAAA,CAAKX,MAAAA,CAAOW,cAAAA,CAAeY,gBAAAA,CAAiB,UAAA,EAAaC,CAAAA,CAAAA,KAAM;AAC7D,MAAA,MAAMC,SAASD,CAAAA,CAAEC,MAAAA;AACjB,MAAA,IAAI,IAAA,CAAKC,cAAAA,CAAeD,MAAM,CAAA,EAAG;AAC/BD,QAAAA,CAAAA,CAAEG,cAAAA,EAAe;AACjB,QAAA,IAAA,CAAKC,eAAeH,MAAM,CAAA;AAAA,MAC5B;AAAA,IACF,CAAC,CAAA;AAAA,EACH;AAAA,EAEQC,eAAeN,OAAAA,EAA+B;AACpD,IAAA,MAAMS,OAAAA,GAAUT,OAAAA,CAAQS,OAAAA,CAAQC,WAAAA,EAAY;AAC5C,IAAA,OAAOD,OAAAA,KAAY,KAAA,IAASA,OAAAA,KAAY,OAAA,IAAWA,OAAAA,KAAY,OAAA;AAAA,EACjE;AAAA,EAEQE,uBAAuBX,OAAAA,EAAkC;AAC/D,IAAA,MAAMS,OAAAA,GAAUT,OAAAA,CAAQS,OAAAA,CAAQC,WAAAA,EAAY;AAE5C,IAAA,QAAQD,OAAAA;AAAO,MACb,KAAK,KAAA;AACH,QAAA,OAAO,IAAA,CAAKV,kBAAkBC,OAA2B,CAAA;AAAA,MAC3D,KAAK,OAAA;AACH,QAAA,OAAO,IAAA,CAAKC,kBAAkBD,OAA2B,CAAA;AAAA,MAC3D,KAAK,OAAA;AACH,QAAA,OAAO,IAAA,CAAKE,kBAAkBF,OAA2B,CAAA;AAAA,MAC3D;AACE,QAAA,OAAO,EAAA;AAAA;AACX,EACF;AAAA,EAEQD,kBAAkBa,GAAAA,EAAmC;AAC3D,IAAA,OAAO,CACL;AAAA,MACElB,EAAAA,EAAI,YAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BC,QAAAA,EAAU,WAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKU,cAAAA,CAAeV,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACxD,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,SAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,SAAS,CAAA;AAAA,MAC7BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPO,OAAAA,EAAS,CAACR,GAAAA,CAAIS,KAAAA,CAAMC,MAAAA;AAAAA,QACpBL,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,EAAE;AAAA,OACzD,EACA;AAAA,QAAEoB,OAAAA,EAAS;AAAA,OAAK,EAChB;AAAA,QACExB,EAAAA,EAAI,kBAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,iBAAiB;AAAA,OACxE,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,aAAa;AAAA,OACpE,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,WAAW;AAAA,OAClE,EACA;AAAA,QACEJ,EAAAA,EAAI,mBAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,iBAAiB;AAAA,OACxE,EACA;AAAA,QACEJ,EAAAA,EAAI,iBAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,eAAe;AAAA,OACtE,EACA;AAAA,QACEJ,EAAAA,EAAI,eAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyB,YAAYzB,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,cAAc;AAAA,OACpE;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,MAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK0B,aAAa1B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,KAAK;AAAA,OAC7D,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK0B,aAAa1B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,KAAK;AAAA,OAC7D,EACA;AAAA,QACEJ,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK0B,aAAa1B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,KAAK;AAAA,OAC7D,EACA;AAAA,QACEJ,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK0B,aAAa1B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC9D,EACA;AAAA,QAAEoB,OAAAA,EAAS;AAAA,OAAK,EAChB;AAAA,QACExB,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK2B,cAAAA,CAAe3B,GAAAA,EAAKE,WAAWF,GAAG;AAAA,OACvD;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,OAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,cAAc,CAAA;AAAA,MAClCI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC9D,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,QAAQ;AAAA,OAChE,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,OAAO;AAAA,OAC9D;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,OAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPO,OAAAA,EAAS,CAACR,GAAAA,CAAIS,KAAAA,CAAMM,KAAAA;AAAAA,QACpBV,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8B,SAAS9B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC1D,EACA;AAAA,QACEJ,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8B,SAAS9B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC1D,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8B,SAAS9B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,OAAO;AAAA,OAC1D;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,QAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPO,OAAAA,EAAS,CAACR,GAAAA,CAAIS,KAAAA,CAAMQ,MAAAA;AAAAA,QACpBZ,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgC,UAAUhC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC3D,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgC,UAAUhC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,gBAAgB;AAAA,OACrE,EACA;AAAA,QACEJ,EAAAA,EAAI,eAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgC,UAAUhC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,gBAAgB;AAAA,OACrE,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgC,UAAUhC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,gBAAgB;AAAA,OACrE,EACA;AAAA,QACEJ,EAAAA,EAAI,gBAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAASnB,CAAAA,GAAAA,KAAQ;AACf,UAAA,MAAMO,MAAAA,GAASP,KAAKE,OAAAA,IAAWF,GAAAA;AAC/B,UAAA,IAAA,CAAKgC,SAAAA,CAAUzB,QAAQ,gBAAgB,CAAA;AACvC,UAACA,MAAAA,CAAuBgB,MAAMU,YAAAA,GAAe,KAAA;AAAA,QAC/C;AAAA,OACD;AAAA,KAEL,EACA;AAAA,MACErC,EAAAA,EAAI,QAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,SAAS,CAAA;AAAA,MAC7BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPO,OAAAA,EAAS,CAACR,GAAAA,CAAIS,KAAAA,CAAMW,SAAAA;AAAAA,QACpBf,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKmC,UAAUnC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC3D,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKmC,UAAUnC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,2BAA2B;AAAA,OAChF,EACA;AAAA,QACEJ,EAAAA,EAAI,eAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKmC,UAAUnC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,4BAA4B;AAAA,OACjF,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKmC,UAAUnC,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,4BAA4B;AAAA,OAChF;AAAA,KAEL,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,YAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,MAAM,CAAA;AAAA,MAC1BC,QAAAA,EAAU,QAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKoC,SAAAA,CAAWpC,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KACzE,EACA;AAAA,MACEJ,EAAAA,EAAI,SAAA;AAAA,MACJmB,KAAAA,EAAO,MAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BC,QAAAA,EAAU,QAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKqC,SAAAA,CAAWrC,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KACzE,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,QAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BC,QAAAA,EAAU,QAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKsC,aAAAA,CAActC,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACtD,CAAA;AAAA,EAEL;AAAA,EAEQG,kBAAkBoC,KAAAA,EAAqC;AAC7D,IAAA,OAAO,CACL;AAAA,MACE3C,EAAAA,EAAI,YAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BC,QAAAA,EAAU,WAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKU,cAAAA,CAAeV,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACxD,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,UAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,MAAM,CAAA;AAAA,MAC1BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAOwB,KAAAA,CAAMC,MAAAA,GAAS,cAAA,GAAO,cAAA;AAAA,QAC7BrB,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyC,eAAAA,CAAiBzC,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,OAC/E,EACA;AAAA,QACEJ,EAAAA,EAAI,MAAA;AAAA,QACJmB,KAAAA,EAAOwB,KAAAA,CAAMG,KAAAA,GAAQ,0BAAA,GAAS,cAAA;AAAA,QAC9BvB,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK2C,UAAAA,CAAY3C,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,OAC1E,EACA;AAAA,QAAEoB,OAAAA,EAAS;AAAA,OAAK,EAChB;AAAA,QACExB,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,mBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,GAAG;AAAA,OACrF,EACA;AAAA,QACEJ,EAAAA,EAAI,SAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPO,OAAAA,EAASiB,MAAMM,YAAAA,KAAiB,CAAA;AAAA,QAChC1B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,CAAC;AAAA,OACnF,EACA;AAAA,QACEJ,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,mBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,GAAG;AAAA,OACrF,EACA;AAAA,QACEJ,EAAAA,EAAI,SAAA;AAAA,QACJmB,KAAAA,EAAO,iBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,CAAC;AAAA,OAClF;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,MAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8C,aAAa9C,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,GAAG;AAAA,OAC3D,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8C,aAAa9C,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,GAAG;AAAA,OAC3D,EACA;AAAA,QACEJ,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,MAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8C,aAAa9C,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,GAAG;AAAA,OAC3D,EACA;AAAA,QACEJ,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK8C,aAAa9C,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,EAAE;AAAA,OACzD;AAAA,KAEL,EACA;AAAA,MACEJ,EAAAA,EAAI,OAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,cAAc,CAAA;AAAA,MAClCI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,MAAM;AAAA,OAC9D,EACA;AAAA,QACEJ,EAAAA,EAAI,cAAA;AAAA,QACJmB,KAAAA,EAAO,cAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,QAAQ;AAAA,OAChE,EACA;AAAA,QACEJ,EAAAA,EAAI,aAAA;AAAA,QACJmB,KAAAA,EAAO,oBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4B,aAAa5B,GAAAA,EAAKE,OAAAA,IAAWF,KAAK,OAAO;AAAA,OAC9D;AAAA,KAEL,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,MAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BK,SAASiB,KAAAA,CAAMQ,IAAAA;AAAAA,MACf5B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgD,UAAAA,CAAYhD,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KAC1E,EACA;AAAA,MACEJ,EAAAA,EAAI,UAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,KAAK,CAAA;AAAA,MACzBK,SAASiB,KAAAA,CAAMU,QAAAA;AAAAA,MACf9B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKkD,cAAAA,CAAgBlD,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KAC9E,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,QAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BC,QAAAA,EAAU,QAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKsC,aAAAA,CAActC,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACtD,CAAA;AAAA,EAEL;AAAA,EAEQI,kBAAkB+C,KAAAA,EAAqC;AAC7D,IAAA,OAAO,CACL;AAAA,MACEvD,EAAAA,EAAI,YAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,UAAU,CAAA;AAAA,MAC9BC,QAAAA,EAAU,WAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKU,cAAAA,CAAeV,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACxD,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,UAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,OAAO,CAAA;AAAA,MAC3BI,SAAS,CACP;AAAA,QACEzB,EAAAA,EAAI,YAAA;AAAA,QACJmB,KAAAA,EAAOoC,KAAAA,CAAMX,MAAAA,GAAS,cAAA,GAAO,cAAA;AAAA,QAC7BrB,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKyC,eAAAA,CAAiBzC,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,OAC/E,EACA;AAAA,QACEJ,EAAAA,EAAI,MAAA;AAAA,QACJmB,KAAAA,EAAOoC,KAAAA,CAAMT,KAAAA,GAAQ,0BAAA,GAAS,cAAA;AAAA,QAC9BvB,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK2C,UAAAA,CAAY3C,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,OAC1E,EACA;AAAA,QAAEoB,OAAAA,EAAS;AAAA,OAAK,EAChB;AAAA,QACExB,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,mBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,GAAG;AAAA,OACrF,EACA;AAAA,QACEJ,EAAAA,EAAI,SAAA;AAAA,QACJmB,KAAAA,EAAO,0BAAA;AAAA,QACPO,OAAAA,EAAS6B,MAAMN,YAAAA,KAAiB,CAAA;AAAA,QAChC1B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,CAAC;AAAA,OACnF,EACA;AAAA,QACEJ,EAAAA,EAAI,WAAA;AAAA,QACJmB,KAAAA,EAAO,mBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,GAAG;AAAA,OACrF,EACA;AAAA,QACEJ,EAAAA,EAAI,SAAA;AAAA,QACJmB,KAAAA,EAAO,iBAAA;AAAA,QACPI,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAK4C,iBAAkB5C,GAAAA,EAAKE,OAAAA,IAAWF,KAA0B,CAAC;AAAA,OAClF;AAAA,KAEL,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,MAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BK,SAAS6B,KAAAA,CAAMJ,IAAAA;AAAAA,MACf5B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKgD,UAAAA,CAAYhD,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KAC1E,EACA;AAAA,MACEJ,EAAAA,EAAI,UAAA;AAAA,MACJmB,KAAAA,EAAO,0BAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,KAAK,CAAA;AAAA,MACzBK,SAAS6B,KAAAA,CAAMF,QAAAA;AAAAA,MACf9B,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKkD,cAAAA,CAAgBlD,GAAAA,EAAKE,WAAWF,GAAwB;AAAA,KAC9E,EACA;AAAA,MAAEoB,OAAAA,EAAS;AAAA,KAAK,EAChB;AAAA,MACExB,EAAAA,EAAI,QAAA;AAAA,MACJmB,KAAAA,EAAO,cAAA;AAAA,MACPC,IAAAA,EAAMC,qBAAc,QAAQ,CAAA;AAAA,MAC5BC,QAAAA,EAAU,QAAA;AAAA,MACVC,QAAQnB,CAAAA,GAAAA,KAAO,IAAA,CAAKsC,aAAAA,CAActC,GAAAA,EAAKE,WAAWF,GAAG;AAAA,KACtD,CAAA;AAAA,EAEL;AAAA;AAAA,EAGQyB,WAAAA,CAAYlB,QAAqBiB,MAAAA,EAAgB;AACvDjB,IAAAA,MAAAA,CAAOgB,MAAMC,MAAAA,GAASA,MAAAA;AACtB,IAAA,IAAA,CAAK1C,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,sCAAsCkC,MAAM,CAAA;AAAA,EAC1D;AAAA,EAEQE,YAAAA,CAAanB,QAAqB8C,IAAAA,EAAc;AACtD,IAAA,IAAIA,SAAS,MAAA,EAAQ;AACnB9C,MAAAA,MAAAA,CAAOgB,MAAM+B,KAAAA,GAAQ,EAAA;AACrB/C,MAAAA,MAAAA,CAAOgB,MAAMgC,MAAAA,GAAS,EAAA;AAAA,IACxB,CAAA,MACK;AACHhD,MAAAA,MAAAA,CAAOgB,MAAM+B,KAAAA,GAAQD,IAAAA;AACrB9C,MAAAA,MAAAA,CAAOgB,MAAMgC,MAAAA,GAAS,MAAA;AAAA,IACxB;AACA,IAAA,IAAA,CAAKzE,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,sCAAsC+D,IAAI,CAAA;AAAA,EACxD;AAAA,EAEQzB,YAAAA,CAAarB,QAAqBiD,KAAAA,EAAe;AACvDjD,IAAAA,MAAAA,CAAOgB,MAAMkC,OAAAA,GAAU,OAAA;AACvB,IAAA,IAAID,UAAU,QAAA,EAAU;AACtBjD,MAAAA,MAAAA,CAAOgB,MAAMmC,UAAAA,GAAa,MAAA;AAC1BnD,MAAAA,MAAAA,CAAOgB,MAAMoC,WAAAA,GAAc,MAAA;AAAA,IAC7B,CAAA,MAAA,IACSH,UAAU,MAAA,EAAQ;AACzBjD,MAAAA,MAAAA,CAAOgB,MAAMmC,UAAAA,GAAa,GAAA;AAC1BnD,MAAAA,MAAAA,CAAOgB,MAAMoC,WAAAA,GAAc,MAAA;AAAA,IAC7B,CAAA,MAAA,IACSH,UAAU,OAAA,EAAS;AAC1BjD,MAAAA,MAAAA,CAAOgB,MAAMmC,UAAAA,GAAa,MAAA;AAC1BnD,MAAAA,MAAAA,CAAOgB,MAAMoC,WAAAA,GAAc,GAAA;AAAA,IAC7B;AACA,IAAA,IAAA,CAAK7E,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,qCAAqCkE,KAAK,CAAA;AAAA,EACxD;AAAA,EAEQ1B,QAAAA,CAASvB,QAAqBsB,KAAAA,EAAe;AACnD,IAAA,IAAIA,UAAU,MAAA,EAAQ;AACpBtB,MAAAA,MAAAA,CAAOgB,MAAMM,KAAAA,GAAQ,EAAA;AACrBtB,MAAAA,MAAAA,CAAOgB,MAAMqC,MAAAA,GAAS,EAAA;AAAA,IACxB,CAAA,MACK;AACHrD,MAAAA,MAAAA,CAAOgB,MAAMM,KAAAA,GAAQA,KAAAA;AACrBtB,MAAAA,MAAAA,CAAOgB,MAAMqC,MAAAA,GAAS,MAAA;AACtB,MAAA,IAAI/B,KAAAA,KAAU,MAAA;AACZtB,QAAAA,MAAAA,CAAOgB,MAAMmC,UAAAA,GAAa,GAAA;AAAA;AAE1BnD,QAAAA,MAAAA,CAAOgB,MAAMoC,WAAAA,GAAc,GAAA;AAAA,IAC/B;AACA,IAAA,IAAA,CAAK7E,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,iCAAiCuC,KAAK,CAAA;AAAA,EACpD;AAAA,EAEQG,SAAAA,CAAUzB,QAAqBwB,MAAAA,EAAgB;AACrDxB,IAAAA,MAAAA,CAAOgB,MAAMQ,MAAAA,GAASA,MAAAA;AACtB,IAAA,IAAA,CAAKjD,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,kCAAkCyC,MAAM,CAAA;AAAA,EACtD;AAAA,EAEQI,SAAAA,CAAU5B,QAAqBsD,MAAAA,EAAgB;AACrDtD,IAAAA,MAAAA,CAAOgB,MAAMW,SAAAA,GAAY2B,MAAAA;AACzB,IAAA,IAAA,CAAK/E,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,kCAAkCuE,MAAM,CAAA;AAAA,EACtD;AAAA,EAEQzB,UAAUtB,GAAAA,EAAuB;AAEvC,IAAA,MAAMgD,MAAAA,GAASC,QAAAA,CAASC,aAAAA,CAAc,QAAQ,CAAA;AAC9CF,IAAAA,MAAAA,CAAOR,QAAQxC,GAAAA,CAAImD,YAAAA;AACnBH,IAAAA,MAAAA,CAAOP,SAASzC,GAAAA,CAAIoD,aAAAA;AACpB,IAAA,MAAMlE,GAAAA,GAAM8D,MAAAA,CAAOK,UAAAA,CAAW,IAAI,CAAA;AAClC,IAAA,IAAInE,GAAAA,EAAK;AACPA,MAAAA,GAAAA,CAAIoE,SAAAA,CAAUtD,GAAAA,EAAK,CAAA,EAAG,CAAC,CAAA;AACvBgD,MAAAA,MAAAA,CAAOO,OAAQC,CAAAA,IAAAA,KAAS;AACtB,QAAA,IAAIA,IAAAA,EAAM;AACR,UAAA,MAAMC,IAAAA,GAAO,IAAIC,aAAAA,CAAc;AAAA,YAAE,WAAA,EAAaF;AAAAA,WAAM,CAAA;AACpDG,UAAAA,SAAAA,CAAUC,UAAUC,KAAAA,CAAM,CAACJ,IAAI,CAAC,CAAA,CAAEK,KAAK,MAAM;AAC3CvF,YAAAA,OAAAA,CAAQC,IAAI,8CAA8C,CAAA;AAAA,UAC5D,CAAC,CAAA;AAAA,QACH;AAAA,MACF,CAAC,CAAA;AAAA,IACH;AAAA,EACF;AAAA,EAEQ+C,UAAUvB,GAAAA,EAAuB;AACvC,IAAA,MAAM+D,IAAAA,GAAOd,QAAAA,CAASC,aAAAA,CAAc,GAAG,CAAA;AACvCa,IAAAA,IAAAA,CAAKC,OAAOhE,GAAAA,CAAIiE,GAAAA;AAChBF,IAAAA,IAAAA,CAAKG,QAAAA,GAAWlE,IAAImE,GAAAA,IAAO,WAAA;AAC3BJ,IAAAA,IAAAA,CAAKK,KAAAA,EAAM;AACX7F,IAAAA,OAAAA,CAAQC,IAAI,6CAA6C,CAAA;AAAA,EAC3D;AAAA;AAAA,EAGQmD,gBAAgB0C,KAAAA,EAA4C;AAClE,IAAA,IAAIA,KAAAA,CAAM3C,MAAAA;AACR2C,MAAAA,KAAAA,CAAMC,IAAAA,EAAK;AAAA;AAEXD,MAAAA,KAAAA,CAAME,KAAAA,EAAM;AAEdhG,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,uCAAA,EAAyC,CAAC6F,KAAAA,CAAM3C,MAAM,CAAA;AAAA,EACpE;AAAA,EAEQG,WAAWwC,KAAAA,EAA4C;AAC7DA,IAAAA,KAAAA,CAAMzC,KAAAA,GAAQ,CAACyC,KAAAA,CAAMzC,KAAAA;AACrBrD,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,iCAAA,EAAmC6F,KAAAA,CAAMzC,KAAK,CAAA;AAAA,EAC5D;AAAA,EAEQE,gBAAAA,CAAiBuC,OAA4CG,KAAAA,EAAe;AAClFH,IAAAA,KAAAA,CAAMtC,YAAAA,GAAeyC,KAAAA;AACrBjG,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,0CAA0CgG,KAAK,CAAA;AAAA,EAC7D;AAAA,EAEQxC,YAAAA,CAAavC,QAAqB+C,KAAAA,EAAe;AACvD,IAAA,IAAIA,KAAAA,KAAU,EAAA;AACZ/C,MAAAA,MAAAA,CAAOgB,MAAM+B,KAAAA,GAAQ,MAAA;AAAA;AAErB/C,MAAAA,MAAAA,CAAOgB,KAAAA,CAAM+B,KAAAA,GAAQ,CAAA,EAAGA,KAAK,CAAA,EAAA,CAAA;AAE/B/C,IAAAA,MAAAA,CAAOgB,MAAMgC,MAAAA,GAAS,MAAA;AACtB,IAAA,IAAA,CAAKzE,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,sCAAsCgE,KAAK,CAAA;AAAA,EACzD;AAAA,EAEQN,WAAWmC,KAAAA,EAA4C;AAC7DA,IAAAA,KAAAA,CAAMpC,IAAAA,GAAO,CAACoC,KAAAA,CAAMpC,IAAAA;AACpB,IAAA,IAAA,CAAKjE,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,iCAAA,EAAmC6F,KAAAA,CAAMpC,IAAI,CAAA;AAAA,EAC3D;AAAA,EAEQG,eAAeiC,KAAAA,EAA4C;AACjEA,IAAAA,KAAAA,CAAMlC,QAAAA,GAAW,CAACkC,KAAAA,CAAMlC,QAAAA;AACxB,IAAA,IAAA,CAAKnE,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,IAAAA,OAAAA,CAAQC,GAAAA,CAAI,qCAAA,EAAuC6F,KAAAA,CAAMlC,QAAQ,CAAA;AAAA,EACnE;AAAA;AAAA,EAGQX,cAAc/B,MAAAA,EAAqB;AACzC,IAAA,IAAIgF,OAAAA,CAAQ,oEAAa,CAAA,EAAG;AAC1BhF,MAAAA,MAAAA,CAAOiF,MAAAA,EAAO;AACd,MAAA,IAAA,CAAK1G,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,MAAAA,OAAAA,CAAQC,IAAI,oCAAoC,CAAA;AAAA,IAClD;AAAA,EACF;AAAA,EAEQqC,eAAepB,MAAAA,EAAqB;AAC1C,IAAA,MAAM+C,QAAQmC,MAAAA,CAAO,kEAAA,EAAiClF,MAAAA,CAAOgB,KAAAA,CAAM+B,SAAS,MAAM,CAAA;AAClF,IAAA,IAAIA,UAAU,IAAA,EAAM;AAClB,MAAA,MAAMC,SAASkC,MAAAA,CAAO,6DAAA,EAA4BlF,MAAAA,CAAOgB,KAAAA,CAAMgC,UAAU,MAAM,CAAA;AAC/E,MAAA,IAAIA,WAAW,IAAA,EAAM;AACnBhD,QAAAA,MAAAA,CAAOgB,MAAM+B,KAAAA,GAAQA,KAAAA;AACrB/C,QAAAA,MAAAA,CAAOgB,MAAMgC,MAAAA,GAASA,MAAAA;AACtB,QAAA,IAAA,CAAKzE,MAAAA,EAAQsE,KAAK,OAAO,CAAA;AACzB/D,QAAAA,OAAAA,CAAQC,GAAAA,CAAI,qCAAA,EAAuCgE,KAAAA,EAAOC,MAAM,CAAA;AAAA,MAClE;AAAA,IACF;AAAA,EACF;AAAA,EAEQ7C,eAAeH,MAAAA,EAAqB;AAC1C,IAAA,IAAI,IAAA,CAAKxB,gBAAAA;AACP,MAAA,IAAA,CAAKA,gBAAAA,CAAiB2G,KAAKnF,MAAM,CAAA;AAAA,EACrC;AAAA,EAEAoF,OAAAA,GAAgB;AAEd,IAAA,IAAI,IAAA,CAAK3G,kBAAkB4G,MAAAA,EAAQ;AACjC,MAAA,IAAI;AACF,QAAA,MAAMrG,UAAUC,wCAAAA,EAAsB;AACtC,QAAA,IAAA,CAAKR,iBAAAA,CAAkB6G,QAASjG,CAAAA,EAAAA,KAAO;AACrC,UAAA,IAAI;AAAE,YAACL,OAAAA,CAAgBuG,WAAWlG,EAAE,CAAA;AAAA,UAAE,CAAA,CAAA,MAChC;AAAA,UAAC;AAAA,QACT,CAAC,CAAA;AAAA,MACH,CAAA,CAAA,MACM;AAAA,MAAC;AACP,MAAA,IAAA,CAAKZ,oBAAoB,EAAA;AAAA,IAC3B;AACA,IAAA,IAAI,KAAKD,gBAAAA,EAAkB;AACzB,MAAA,IAAA,CAAKA,iBAAiB4G,OAAAA,EAAQ;AAC9B,MAAA,IAAA,CAAK5G,gBAAAA,GAAmB,IAAA;AAAA,IAC1B;AACAM,IAAAA,OAAAA,CAAQC,IAAI,qCAAqC,CAAA;AAAA,EACnD;AACF;;;;;;;;"}