{"version":3,"file":"media-commands.cjs","sources":["../../../src/plugins/media/media-commands.ts"],"sourcesContent":["/**\r\n * åª’ä½“å‘½ä»¤æ’ä»¶\r\n * æ³¨å†Œæ‰€æœ‰åª’ä½“ç›¸å…³çš„å‘½ä»¤\r\n */\r\n\r\nimport type { Plugin } from '../../types'\r\n\r\nconst MediaCommandsPlugin: Plugin = {\r\n  name: 'MediaCommands',\r\n  install(editor: any) {\r\n    // æ³¨å†Œæ’å…¥å›¾ç‰‡å‘½ä»¤\r\n    editor.commands.register('insertImage', () => {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = 'image/*'\r\n      input.onchange = (e: any) => {\r\n        const file = e.target.files[0]\r\n        if (file) {\r\n          const reader = new FileReader()\r\n          reader.onload = (e: any) => {\r\n            const img = document.createElement('img')\r\n            img.src = e.target.result\r\n            img.style.maxWidth = '100%'\r\n            editor.insertHTML(img.outerHTML)\r\n          }\r\n          reader.readAsDataURL(file)\r\n        }\r\n      }\r\n      input.click()\r\n      return true\r\n    })\r\n\r\n    // æ³¨å†Œæ’å…¥è§†é¢‘å‘½ä»¤\r\n    editor.commands.register('insertVideo', () => {\r\n      const url = prompt('Enter video URL:')\r\n      if (url) {\r\n        const video = document.createElement('video')\r\n        video.src = url\r\n        video.controls = true\r\n        video.style.maxWidth = '100%'\r\n        editor.insertHTML(video.outerHTML)\r\n      }\r\n      return true\r\n    })\r\n\r\n    // æ³¨å†Œæ’å…¥éŸ³é¢‘å‘½ä»¤\r\n    editor.commands.register('insertAudio', () => {\r\n      const url = prompt('Enter audio URL:')\r\n      if (url) {\r\n        const audio = document.createElement('audio')\r\n        audio.src = url\r\n        audio.controls = true\r\n        editor.insertHTML(audio.outerHTML)\r\n      }\r\n      return true\r\n    })\r\n\r\n    // æ³¨å†Œæ’å…¥è¡¨æ ¼å‘½ä»¤ - æ˜¾ç¤ºç½‘æ ¼é€‰æ‹©å™¨\r\n    editor.commands.register('insertTable', () => {\r\n      console.log('[MediaCommands] insertTable called - showing grid selector')\r\n\r\n      // è·å–è¡¨æ ¼æŒ‰é’®\r\n      const tableButton = document.querySelector('[data-name=\"table\"]') as HTMLElement\r\n      if (!tableButton) {\r\n        console.error('[MediaCommands] Table button not found')\r\n        return false\r\n      }\r\n\r\n      // è·å–ç¼–è¾‘å™¨å†…å®¹åŒºåŸŸ\r\n      const editorContent = document.querySelector('.ldesign-editor-content') as HTMLElement\r\n      if (!editorContent) {\r\n        console.error('[MediaCommands] Editor content not found')\r\n        return false\r\n      }\r\n\r\n      // ä¿å­˜å½“å‰é€‰åŒº\r\n      const selection = window.getSelection()\r\n      let savedRange: Range | null = null\r\n\r\n      if (selection && selection.rangeCount > 0) {\r\n        const range = selection.getRangeAt(0)\r\n        if (editorContent.contains(range.commonAncestorContainer))\r\n          savedRange = range.cloneRange()\r\n      }\r\n\r\n      // ç§»é™¤å·²å­˜åœ¨çš„é€‰æ‹©å™¨\r\n      const existing = document.querySelector('.table-grid-selector')\r\n      if (existing)\r\n        existing.remove()\r\n\r\n      // åˆ›å»ºç½‘æ ¼é€‰æ‹©å™¨\r\n      const selector = document.createElement('div')\r\n      selector.className = 'table-grid-selector'\r\n      selector.style.cssText = `\r\n        position: fixed;\r\n        background: white;\r\n        border: 1px solid #ddd;\r\n        border-radius: 8px;\r\n        box-shadow: 0 4px 20px rgba(0,0,0,0.15);\r\n        padding: 12px;\r\n        z-index: 999999;\r\n      `\r\n\r\n      // æ ‡é¢˜\r\n      const title = document.createElement('div')\r\n      title.style.cssText = 'font-size: 13px; color: #666; margin-bottom: 8px; text-align: center;'\r\n      title.textContent = 'é€‰æ‹©è¡¨æ ¼å¤§å°'\r\n      selector.appendChild(title)\r\n\r\n      // ç½‘æ ¼\r\n      const grid = document.createElement('div')\r\n      grid.style.cssText = `\r\n        display: grid;\r\n        grid-template-columns: repeat(10, 24px);\r\n        grid-template-rows: repeat(10, 24px);\r\n        gap: 2px;\r\n        background: #f5f5f5;\r\n        padding: 4px;\r\n        border-radius: 4px;\r\n        margin-bottom: 8px;\r\n      `\r\n\r\n      // å°ºå¯¸æ˜¾ç¤º\r\n      const sizeDisplay = document.createElement('div')\r\n      sizeDisplay.style.cssText = 'text-align: center; font-weight: bold; padding: 6px; background: #f0f0f0; border-radius: 4px;'\r\n      sizeDisplay.textContent = '0 Ã— 0'\r\n\r\n      // åˆ›å»ºå•å…ƒæ ¼\r\n      const cells: HTMLElement[] = []\r\n      for (let row = 0; row < 10; row++) {\r\n        for (let col = 0; col < 10; col++) {\r\n          const cell = document.createElement('div')\r\n          cell.style.cssText = `\r\n            background: white;\r\n            border: 1px solid #e0e0e0;\r\n            cursor: pointer;\r\n            transition: all 0.1s;\r\n          `\r\n          cell.dataset.row = String(row + 1)\r\n          cell.dataset.col = String(col + 1)\r\n\r\n          // é¼ æ ‡æ‚¬åœ\r\n          cell.addEventListener('mouseenter', () => {\r\n            const r = Number.parseInt(cell.dataset.row!)\r\n            const c = Number.parseInt(cell.dataset.col!)\r\n\r\n            cells.forEach((cellEl, idx) => {\r\n              const cellRow = Math.floor(idx / 10) + 1\r\n              const cellCol = (idx % 10) + 1\r\n              if (cellRow <= r && cellCol <= c) {\r\n                cellEl.style.background = '#2196F3'\r\n                cellEl.style.borderColor = '#1976D2'\r\n              }\r\n              else {\r\n                cellEl.style.background = 'white'\r\n                cellEl.style.borderColor = '#e0e0e0'\r\n              }\r\n            })\r\n\r\n            sizeDisplay.textContent = `${r} Ã— ${c}`\r\n          })\r\n\r\n          // ç‚¹å‡»é€‰æ‹©\r\n          cell.addEventListener('click', () => {\r\n            const rows = Number.parseInt(cell.dataset.row!)\r\n            const cols = Number.parseInt(cell.dataset.col!)\r\n\r\n            console.log(`[MediaCommands] Creating ${rows}Ã—${cols} table`)\r\n\r\n            // åˆ›å»ºè¡¨æ ¼\r\n            const table = document.createElement('table')\r\n            table.style.borderCollapse = 'collapse'\r\n            table.style.width = '100%'\r\n            table.style.margin = '10px 0'\r\n\r\n            // è¡¨å¤´\r\n            const thead = document.createElement('thead')\r\n            const headerRow = document.createElement('tr')\r\n            for (let j = 0; j < cols; j++) {\r\n              const th = document.createElement('th')\r\n              th.style.border = '1px solid #ddd'\r\n              th.style.padding = '8px'\r\n              th.style.backgroundColor = '#f5f5f5'\r\n              th.textContent = `åˆ— ${j + 1}`\r\n              th.contentEditable = 'true'\r\n              headerRow.appendChild(th)\r\n            }\r\n            thead.appendChild(headerRow)\r\n            table.appendChild(thead)\r\n\r\n            // è¡¨ä½“\r\n            const tbody = document.createElement('tbody')\r\n            for (let i = 0; i < rows; i++) {\r\n              const tr = document.createElement('tr')\r\n              for (let j = 0; j < cols; j++) {\r\n                const td = document.createElement('td')\r\n                td.style.border = '1px solid #ddd'\r\n                td.style.padding = '8px'\r\n                td.innerHTML = '&nbsp;'\r\n                td.contentEditable = 'true'\r\n                tr.appendChild(td)\r\n              }\r\n              tbody.appendChild(tr)\r\n            }\r\n            table.appendChild(tbody)\r\n\r\n            // æ’å…¥åˆ°ç¼–è¾‘å™¨\r\n            editorContent.focus()\r\n\r\n            if (savedRange) {\r\n              selection!.removeAllRanges()\r\n              selection!.addRange(savedRange)\r\n\r\n              try {\r\n                savedRange.deleteContents()\r\n                savedRange.insertNode(table)\r\n              }\r\n              catch (error) {\r\n                editorContent.appendChild(table)\r\n              }\r\n            }\r\n            else {\r\n              editorContent.appendChild(table)\r\n            }\r\n\r\n            // æ·»åŠ æ®µè½\r\n            const p = document.createElement('p')\r\n            p.innerHTML = '<br>'\r\n            table.parentNode?.insertBefore(p, table.nextSibling)\r\n\r\n            // è§¦å‘æ›´æ–°\r\n            editorContent.dispatchEvent(new Event('input', { bubbles: true }))\r\n\r\n            // å…³é—­é€‰æ‹©å™¨\r\n            selector.remove()\r\n          })\r\n\r\n          cells.push(cell)\r\n          grid.appendChild(cell)\r\n        }\r\n      }\r\n\r\n      // é¼ æ ‡ç¦»å¼€ç½‘æ ¼\r\n      grid.addEventListener('mouseleave', () => {\r\n        cells.forEach((cell) => {\r\n          cell.style.background = 'white'\r\n          cell.style.borderColor = '#e0e0e0'\r\n        })\r\n        sizeDisplay.textContent = '0 Ã— 0'\r\n      })\r\n\r\n      selector.appendChild(grid)\r\n      selector.appendChild(sizeDisplay)\r\n\r\n      // æ·»åŠ åˆ°é¡µé¢\r\n      document.body.appendChild(selector)\r\n\r\n      // å®šä½\r\n      const rect = tableButton.getBoundingClientRect()\r\n      let left = rect.left\r\n      let top = rect.bottom + 5\r\n\r\n      if (left + 268 > window.innerWidth)\r\n        left = window.innerWidth - 268 - 10\r\n\r\n      if (top + 320 > window.innerHeight)\r\n        top = rect.top - 320 - 5\r\n\r\n      selector.style.left = `${left}px`\r\n      selector.style.top = `${top}px`\r\n\r\n      // ç‚¹å‡»å¤–éƒ¨å…³é—­\r\n      setTimeout(() => {\r\n        const closeHandler = (e: MouseEvent) => {\r\n          if (!selector.contains(e.target as Node) && e.target !== tableButton) {\r\n            selector.remove()\r\n            document.removeEventListener('click', closeHandler)\r\n          }\r\n        }\r\n        document.addEventListener('click', closeHandler)\r\n      }, 0)\r\n\r\n      console.log('âœ… [MediaCommands] Grid selector displayed')\r\n      return true\r\n    })\r\n\r\n    // æ³¨å†Œæ’å…¥ä»£ç å—å‘½ä»¤\r\n    editor.commands.register('insertCodeBlock', () => {\r\n      const pre = document.createElement('pre')\r\n      const code = document.createElement('code')\r\n      code.textContent = '// Enter your code here'\r\n      pre.appendChild(code)\r\n      pre.style.background = '#f4f4f4'\r\n      pre.style.padding = '10px'\r\n      pre.style.borderRadius = '4px'\r\n      editor.insertHTML(pre.outerHTML)\r\n      return true\r\n    })\r\n\r\n    // æ³¨å†Œæ’å…¥è¡¨æƒ…å‘½ä»¤\r\n    editor.commands.register('insertEmoji', () => {\r\n      const emojis = ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ¥°', 'ğŸ˜˜', 'ğŸ˜—']\r\n      const emoji = prompt(`Select emoji (1-16):\\n${emojis.map((e, i) => `${i + 1}: ${e}`).join(' ')}`)\r\n      if (emoji) {\r\n        const index = Number.parseInt(emoji) - 1\r\n        if (index >= 0 && index < emojis.length)\r\n          editor.insertHTML(emojis[index])\r\n      }\r\n      return true\r\n    })\r\n\r\n    console.log('[MediaCommandsPlugin] All media commands registered')\r\n  },\r\n}\r\n\r\nexport default MediaCommandsPlugin\r\n"],"names":["MediaCommandsPlugin","name","install","editor","commands","register","input","document","createElement","type","accept","onchange","e","file","target","files","reader","FileReader","onload","img","src","result","style","maxWidth","insertHTML","outerHTML","readAsDataURL","click","url","prompt","video","controls","audio","console","log","tableButton","querySelector","error","editorContent","selection","window","getSelection","savedRange","rangeCount","range","getRangeAt","contains","commonAncestorContainer","cloneRange","existing","remove","selector","className","cssText","title","textContent","appendChild","grid","sizeDisplay","cells","row","col","cell","dataset","String","addEventListener","r","Number","parseInt","c","forEach","cellEl","idx","cellRow","Math","floor","cellCol","background","borderColor","rows","cols","table","borderCollapse","width","margin","thead","headerRow","j","th","border","padding","backgroundColor","contentEditable","tbody","i","tr","td","innerHTML","focus","removeAllRanges","addRange","deleteContents","insertNode","p","parentNode","insertBefore","nextSibling","dispatchEvent","Event","bubbles","push","body","rect","getBoundingClientRect","left","top","bottom","innerWidth","innerHeight","setTimeout","closeHandler","removeEventListener","pre","code","borderRadius","emojis","emoji","map","join","index","length"],"mappings":"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"}