{"version":3,"file":"script.cjs","sources":["../../../src/plugins/formatting/script.ts"],"sourcesContent":["/**\r\n * 上标和下标插件\r\n */\r\n\r\nimport type { Command, Plugin } from '../../types'\r\nimport { createPlugin } from '../../core/Plugin'\r\n\r\n/**\r\n * 上标\r\n */\r\nconst superscript: Command = (state, dispatch) => {\r\n  if (!dispatch)\r\n    return true\r\n  document.execCommand('superscript', false)\r\n  return true\r\n}\r\n\r\n/**\r\n * 下标\r\n */\r\nconst subscript: Command = (state, dispatch) => {\r\n  if (!dispatch)\r\n    return true\r\n  document.execCommand('subscript', false)\r\n  return true\r\n}\r\n\r\n/**\r\n * 检查是否为上标\r\n */\r\nfunction isSuperscriptActive() {\r\n  return () => {\r\n    return document.queryCommandState('superscript')\r\n  }\r\n}\r\n\r\n/**\r\n * 检查是否为下标\r\n */\r\nfunction isSubscriptActive() {\r\n  return () => {\r\n    return document.queryCommandState('subscript')\r\n  }\r\n}\r\n\r\n/**\r\n * 上标插件\r\n */\r\nexport const SuperscriptPlugin: Plugin = createPlugin({\r\n  name: 'superscript',\r\n  commands: {\r\n    toggleSuperscript: superscript,\r\n  },\r\n  keys: {\r\n    'Mod-Shift-.': superscript,\r\n  },\r\n  toolbar: [{\r\n    name: 'superscript',\r\n    title: '上标',\r\n    icon: 'superscript',\r\n    command: superscript,\r\n    active: isSuperscriptActive(),\r\n  }],\r\n})\r\n\r\n/**\r\n * 下标插件\r\n */\r\nexport const SubscriptPlugin: Plugin = createPlugin({\r\n  name: 'subscript',\r\n  commands: {\r\n    toggleSubscript: subscript,\r\n  },\r\n  keys: {\r\n    'Mod-Shift-,': subscript,\r\n  },\r\n  toolbar: [{\r\n    name: 'subscript',\r\n    title: '下标',\r\n    icon: 'subscript',\r\n    command: subscript,\r\n    active: isSubscriptActive(),\r\n  }],\r\n})\r\n"],"names":["superscript","state","dispatch","document","execCommand","subscript","isSuperscriptActive","queryCommandState","isSubscriptActive","SuperscriptPlugin","createPlugin","name","commands","toggleSuperscript","keys","toolbar","title","icon","command","active","SubscriptPlugin","toggleSubscript"],"mappings":";;;;;;;;;;;;;AAUA,MAAMA,WAAAA,GAAuBA,CAACC,KAAAA,EAAOC,QAAAA,KAAa;AAChD,EAAA,IAAI,CAACA,QAAAA;AACH,IAAA,OAAO,IAAA;AACTC,EAAAA,QAAAA,CAASC,WAAAA,CAAY,eAAe,KAAK,CAAA;AACzC,EAAA,OAAO,IAAA;AACT,CAAA;AAKA,MAAMC,SAAAA,GAAqBA,CAACJ,KAAAA,EAAOC,QAAAA,KAAa;AAC9C,EAAA,IAAI,CAACA,QAAAA;AACH,IAAA,OAAO,IAAA;AACTC,EAAAA,QAAAA,CAASC,WAAAA,CAAY,aAAa,KAAK,CAAA;AACvC,EAAA,OAAO,IAAA;AACT,CAAA;AAKA,SAASE,mBAAAA,GAAsB;AAC7B,EAAA,OAAO,MAAM;AACX,IAAA,OAAOH,QAAAA,CAASI,kBAAkB,aAAa,CAAA;AAAA,EACjD,CAAA;AACF;AAKA,SAASC,iBAAAA,GAAoB;AAC3B,EAAA,OAAO,MAAM;AACX,IAAA,OAAOL,QAAAA,CAASI,kBAAkB,WAAW,CAAA;AAAA,EAC/C,CAAA;AACF;AAKO,MAAME,oBAA4BC,mBAAAA,CAAa;AAAA,EACpDC,IAAAA,EAAM,aAAA;AAAA,EACNC,QAAAA,EAAU;AAAA,IACRC,iBAAAA,EAAmBb;AAAAA,GACrB;AAAA,EACAc,IAAAA,EAAM;AAAA,IACJ,aAAA,EAAed;AAAAA,GACjB;AAAA,EACAe,SAAS,CAAC;AAAA,IACRJ,IAAAA,EAAM,aAAA;AAAA,IACNK,KAAAA,EAAO,cAAA;AAAA,IACPC,IAAAA,EAAM,aAAA;AAAA,IACNC,OAAAA,EAASlB,WAAAA;AAAAA,IACTmB,QAAQb,mBAAAA;AAAoB,GAC7B;AACH,CAAC;AAKM,MAAMc,kBAA0BV,mBAAAA,CAAa;AAAA,EAClDC,IAAAA,EAAM,WAAA;AAAA,EACNC,QAAAA,EAAU;AAAA,IACRS,eAAAA,EAAiBhB;AAAAA,GACnB;AAAA,EACAS,IAAAA,EAAM;AAAA,IACJ,aAAA,EAAeT;AAAAA,GACjB;AAAA,EACAU,SAAS,CAAC;AAAA,IACRJ,IAAAA,EAAM,WAAA;AAAA,IACNK,KAAAA,EAAO,cAAA;AAAA,IACPC,IAAAA,EAAM,WAAA;AAAA,IACNC,OAAAA,EAASb,SAAAA;AAAAA,IACTc,QAAQX,iBAAAA;AAAkB,GAC3B;AACH,CAAC;;;;;;;;"}