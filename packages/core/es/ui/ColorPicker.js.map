{"version":3,"file":"ColorPicker.js","sources":["../../src/ui/ColorPicker.ts"],"sourcesContent":["/**\r\n * 颜色选择器\r\n */\r\n\r\nimport { PRESET_COLORS } from '../plugins/formatting/color'\r\n\r\nexport interface ColorPickerOptions {\r\n  onSelect: (color: string) => void\r\n  colors?: string[]\r\n  customColors?: boolean\r\n  recentColors?: boolean\r\n}\r\n\r\n// 存储最近使用的颜色\r\nconst recentColorsList: string[] = []\r\nconst MAX_RECENT_COLORS = 10\r\n\r\n/**\r\n * 添加到最近使用的颜色\r\n */\r\nfunction addRecentColor(color: string): void {\r\n  // 移除已存在的颜色\r\n  const index = recentColorsList.indexOf(color)\r\n  if (index > -1)\r\n    recentColorsList.splice(index, 1)\r\n\r\n  // 添加到开头\r\n  recentColorsList.unshift(color)\r\n\r\n  // 限制数量\r\n  if (recentColorsList.length > MAX_RECENT_COLORS)\r\n    recentColorsList.pop()\r\n\r\n  // 保存到 localStorage\r\n  try {\r\n    localStorage.setItem('editor-recent-colors', JSON.stringify(recentColorsList))\r\n  }\r\n  catch (e) {\r\n    console.error('Failed to save recent colors:', e)\r\n  }\r\n}\r\n\r\n/**\r\n * 加载最近使用的颜色\r\n */\r\nfunction loadRecentColors(): void {\r\n  try {\r\n    const saved = localStorage.getItem('editor-recent-colors')\r\n    if (saved) {\r\n      const colors = JSON.parse(saved)\r\n      recentColorsList.length = 0\r\n      recentColorsList.push(...colors.slice(0, MAX_RECENT_COLORS))\r\n    }\r\n  }\r\n  catch (e) {\r\n    console.error('Failed to load recent colors:', e)\r\n  }\r\n}\r\n\r\n// 初始化时加载最近使用的颜色\r\nloadRecentColors()\r\n\r\n/**\r\n * 创建颜色选择器\r\n */\r\nexport function createColorPicker(options: ColorPickerOptions): HTMLElement {\r\n  const { onSelect, colors = PRESET_COLORS, customColors = true, recentColors = true } = options\r\n\r\n  const picker = document.createElement('div')\r\n  picker.className = 'editor-color-picker'\r\n\r\n  // 最近使用的颜色\r\n  if (recentColors && recentColorsList.length > 0) {\r\n    const recentTitle = document.createElement('div')\r\n    recentTitle.className = 'editor-color-section-title'\r\n    recentTitle.textContent = '最近使用'\r\n    picker.appendChild(recentTitle)\r\n\r\n    const recentContainer = document.createElement('div')\r\n    recentContainer.className = 'editor-color-preset editor-color-recent'\r\n\r\n    recentColorsList.forEach((color) => {\r\n      const colorItem = createColorButton(color, (selectedColor) => {\r\n        onSelect(selectedColor)\r\n        picker.remove()\r\n      })\r\n      recentContainer.appendChild(colorItem)\r\n    })\r\n\r\n    picker.appendChild(recentContainer)\r\n  }\r\n\r\n  // 预设颜色标题\r\n  const presetTitle = document.createElement('div')\r\n  presetTitle.className = 'editor-color-section-title'\r\n  presetTitle.textContent = '预设颜色'\r\n  picker.appendChild(presetTitle)\r\n\r\n  // 预设颜色\r\n  const presetContainer = document.createElement('div')\r\n  presetContainer.className = 'editor-color-preset'\r\n\r\n  colors.forEach((color) => {\r\n    const colorItem = createColorButton(color, (selectedColor) => {\r\n      addRecentColor(selectedColor)\r\n      onSelect(selectedColor)\r\n      picker.remove()\r\n    })\r\n    presetContainer.appendChild(colorItem)\r\n  })\r\n\r\n  picker.appendChild(presetContainer)\r\n\r\n  // 自定义颜色\r\n  if (customColors) {\r\n    const customTitle = document.createElement('div')\r\n    customTitle.className = 'editor-color-section-title'\r\n    customTitle.textContent = '自定义颜色'\r\n    picker.appendChild(customTitle)\r\n\r\n    const customContainer = document.createElement('div')\r\n    customContainer.className = 'editor-color-custom'\r\n\r\n    // HEX 输入框\r\n    const hexInputGroup = document.createElement('div')\r\n    hexInputGroup.className = 'editor-color-hex-group'\r\n\r\n    const hexLabel = document.createElement('label')\r\n    hexLabel.textContent = 'HEX:'\r\n    hexLabel.className = 'editor-color-hex-label'\r\n\r\n    const hexInput = document.createElement('input')\r\n    hexInput.type = 'text'\r\n    hexInput.className = 'editor-color-hex-input'\r\n    hexInput.placeholder = '#000000'\r\n    hexInput.maxLength = 7\r\n\r\n    const hexApplyBtn = document.createElement('button')\r\n    hexApplyBtn.type = 'button'\r\n    hexApplyBtn.className = 'editor-color-hex-apply'\r\n    hexApplyBtn.textContent = '应用'\r\n    hexApplyBtn.addEventListener('click', () => {\r\n      const color = hexInput.value.trim()\r\n      if (/^#[0-9A-F]{6}$/i.test(color)) {\r\n        addRecentColor(color)\r\n        onSelect(color)\r\n        picker.remove()\r\n      }\r\n      else {\r\n        hexInput.style.borderColor = '#ef4444'\r\n        setTimeout(() => {\r\n          hexInput.style.borderColor = ''\r\n        }, 1000)\r\n      }\r\n    })\r\n\r\n    hexInputGroup.appendChild(hexLabel)\r\n    hexInputGroup.appendChild(hexInput)\r\n    hexInputGroup.appendChild(hexApplyBtn)\r\n    customContainer.appendChild(hexInputGroup)\r\n\r\n    // 颜色选择器\r\n    const colorInputGroup = document.createElement('div')\r\n    colorInputGroup.className = 'editor-color-input-group'\r\n\r\n    const colorLabel = document.createElement('label')\r\n    colorLabel.textContent = '选择器:'\r\n    colorLabel.className = 'editor-color-input-label'\r\n\r\n    const colorInput = document.createElement('input')\r\n    colorInput.type = 'color'\r\n    colorInput.className = 'editor-color-input'\r\n    colorInput.value = '#000000'\r\n    colorInput.addEventListener('input', (e) => {\r\n      const color = (e.target as HTMLInputElement).value\r\n      hexInput.value = color\r\n    })\r\n    colorInput.addEventListener('change', (e) => {\r\n      const color = (e.target as HTMLInputElement).value\r\n      addRecentColor(color)\r\n      onSelect(color)\r\n      picker.remove()\r\n    })\r\n\r\n    colorInputGroup.appendChild(colorLabel)\r\n    colorInputGroup.appendChild(colorInput)\r\n    customContainer.appendChild(colorInputGroup)\r\n\r\n    picker.appendChild(customContainer)\r\n  }\r\n\r\n  return picker\r\n}\r\n\r\n/**\r\n * 创建颜色按钮\r\n */\r\nfunction createColorButton(color: string, onClick: (color: string) => void): HTMLButtonElement {\r\n  const button = document.createElement('button')\r\n  button.type = 'button'\r\n  button.className = 'editor-color-item'\r\n  button.style.backgroundColor = color\r\n  button.title = color\r\n\r\n  // 添加对比边框（用于浅色）\r\n  const rgb = hexToRgb(color)\r\n  if (rgb && (rgb.r + rgb.g + rgb.b) > 650)\r\n    button.style.border = '1px solid #e5e7eb'\r\n\r\n  button.addEventListener('click', (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    onClick(color)\r\n  })\r\n\r\n  return button\r\n}\r\n\r\n/**\r\n * HEX 转 RGB\r\n */\r\nfunction hexToRgb(hex: string): { r: number, g: number, b: number } | null {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n  return result\r\n    ? {\r\n      r: Number.parseInt(result[1], 16),\r\n      g: Number.parseInt(result[2], 16),\r\n      b: Number.parseInt(result[3], 16),\r\n    }\r\n    : null\r\n}\r\n\r\n/**\r\n * 显示颜色选择器\r\n */\r\nexport function showColorPicker(\r\n  button: HTMLElement,\r\n  options: ColorPickerOptions,\r\n): void {\r\n  // 移除已存在的选择器\r\n  const existing = document.querySelector('.editor-color-picker')\r\n  if (existing)\r\n    existing.remove()\r\n\r\n  const picker = createColorPicker(options)\r\n\r\n  // 定位选择器\r\n  const rect = button.getBoundingClientRect()\r\n  picker.style.position = 'absolute'\r\n  picker.style.top = `${rect.bottom + 5}px`\r\n  picker.style.left = `${rect.left}px`\r\n  picker.style.zIndex = '10000'\r\n\r\n  document.body.appendChild(picker)\r\n\r\n  // 点击外部关闭\r\n  const closeOnClickOutside = (e: MouseEvent) => {\r\n    if (!picker.contains(e.target as Node) && e.target !== button) {\r\n      picker.remove()\r\n      document.removeEventListener('click', closeOnClickOutside)\r\n    }\r\n  }\r\n\r\n  setTimeout(() => {\r\n    document.addEventListener('click', closeOnClickOutside)\r\n  }, 0)\r\n}\r\n"],"names":["recentColorsList","MAX_RECENT_COLORS","addRecentColor","color","index","indexOf","splice","unshift","length","pop","localStorage","setItem","JSON","stringify","e","console","error","loadRecentColors","saved","getItem","colors","parse","push","slice","createColorPicker","options","onSelect","PRESET_COLORS","customColors","recentColors","picker","document","createElement","className","recentTitle","textContent","appendChild","recentContainer","forEach","colorItem","createColorButton","selectedColor","remove","presetTitle","presetContainer","customTitle","customContainer","hexInputGroup","hexLabel","hexInput","type","placeholder","maxLength","hexApplyBtn","addEventListener","value","trim","test","style","borderColor","setTimeout","colorInputGroup","colorLabel","colorInput","target","onClick","button","backgroundColor","title","rgb","hexToRgb","r","g","b","border","preventDefault","stopPropagation","hex","result","exec","Number","parseInt","showColorPicker","existing","querySelector","rect","getBoundingClientRect","position","top","bottom","left","zIndex","body","closeOnClickOutside","contains","removeEventListener"],"mappings":"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"}