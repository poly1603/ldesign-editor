{"version":3,"file":"TableGridSelector.js","sources":["../../src/ui/TableGridSelector.ts"],"sourcesContent":["/**\r\n * 表格网格选择器\r\n * 提供类似 Word/Office 的表格插入体验\r\n */\r\n\r\nimport { showDropdown } from './Dropdown'\r\n\r\nexport interface TableGridSelectorOptions {\r\n  onSelect: (rows: number, cols: number) => void\r\n  maxRows?: number\r\n  maxCols?: number\r\n  button?: HTMLElement\r\n}\r\n\r\n/**\r\n * 显示表格网格选择器下拉框\r\n */\r\nexport function showTableGridSelector(options: TableGridSelectorOptions): void {\r\n  const {\r\n    onSelect,\r\n    maxRows = 10,\r\n    maxCols = 10,\r\n    button,\r\n  } = options\r\n\r\n  // 创建自定义内容容器\r\n  const container = document.createElement('div')\r\n  container.style.cssText = `\r\n    width: ${maxCols * 26 + 16}px;\r\n    padding: 8px;\r\n    user-select: none;\r\n  `\r\n\r\n  // 添加标题\r\n  const header = document.createElement('div')\r\n  header.style.cssText = `\r\n    font-size: 12px;\r\n    color: #6b7280;\r\n    margin-bottom: 8px;\r\n    text-align: center;\r\n  `\r\n  header.textContent = '选择表格大小'\r\n  container.appendChild(header)\r\n\r\n  // 创建网格容器\r\n  const gridContainer = document.createElement('div')\r\n  gridContainer.style.cssText = `\r\n    display: grid;\r\n    grid-template-columns: repeat(${maxCols}, 24px);\r\n    grid-template-rows: repeat(${maxRows}, 24px);\r\n    gap: 2px;\r\n    background: #f9fafb;\r\n    padding: 4px;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n  `\r\n\r\n  // 创建尺寸显示\r\n  const sizeDisplay = document.createElement('div')\r\n  sizeDisplay.style.cssText = `\r\n    text-align: center;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    color: #1f2937;\r\n    padding: 6px;\r\n    background: #f3f4f6;\r\n    border-radius: 4px;\r\n    margin-bottom: 4px;\r\n    min-height: 20px;\r\n  `\r\n  sizeDisplay.textContent = '移动鼠标选择'\r\n\r\n  // 创建提示文本\r\n  const hint = document.createElement('div')\r\n  hint.style.cssText = `\r\n    text-align: center;\r\n    font-size: 11px;\r\n    color: #9ca3af;\r\n  `\r\n  hint.textContent = '点击确认 · ESC取消'\r\n\r\n  // 跟踪当前选择\r\n  let currentRows = 0\r\n  let currentCols = 0\r\n  const cells: HTMLElement[] = []\r\n\r\n  // 创建网格单元格\r\n  for (let row = 0; row < maxRows; row++) {\r\n    for (let col = 0; col < maxCols; col++) {\r\n      const cell = document.createElement('div')\r\n      cell.style.cssText = `\r\n        background: white;\r\n        border: 1px solid #e5e7eb;\r\n        border-radius: 2px;\r\n        cursor: pointer;\r\n        transition: all 0.1s ease;\r\n      `\r\n      cell.dataset.row = String(row + 1)\r\n      cell.dataset.col = String(col + 1)\r\n\r\n      cells.push(cell)\r\n      gridContainer.appendChild(cell)\r\n    }\r\n  }\r\n\r\n  // 更新高亮状态\r\n  const updateHighlight = (rows: number, cols: number) => {\r\n    currentRows = rows\r\n    currentCols = cols\r\n\r\n    cells.forEach((cell) => {\r\n      const cellRow = Number.parseInt(cell.dataset.row || '0')\r\n      const cellCol = Number.parseInt(cell.dataset.col || '0')\r\n\r\n      if (cellRow <= rows && cellCol <= cols) {\r\n        cell.style.background = '#3b82f6'\r\n        cell.style.borderColor = '#2563eb'\r\n      }\r\n      else {\r\n        cell.style.background = 'white'\r\n        cell.style.borderColor = '#e5e7eb'\r\n      }\r\n    })\r\n\r\n    if (rows > 0 && cols > 0)\r\n      sizeDisplay.textContent = `${rows} × ${cols} 表格`\r\n    else\r\n      sizeDisplay.textContent = '移动鼠标选择'\r\n  }\r\n\r\n  // 鼠标移动事件处理\r\n  const handleMouseMove = (e: MouseEvent) => {\r\n    const target = e.target as HTMLElement\r\n    if (target.dataset.row && target.dataset.col) {\r\n      const row = Number.parseInt(target.dataset.row)\r\n      const col = Number.parseInt(target.dataset.col)\r\n      updateHighlight(row, col)\r\n    }\r\n  }\r\n\r\n  // 点击事件处理\r\n  const handleClick = (e: MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    const target = e.target as HTMLElement\r\n    if (target.dataset.row && target.dataset.col) {\r\n      const row = Number.parseInt(target.dataset.row)\r\n      const col = Number.parseInt(target.dataset.col)\r\n\r\n      if (row > 0 && col > 0) {\r\n        // 关闭下拉框\r\n        const dropdown = container.closest('.editor-dropdown')\r\n        if (dropdown) {\r\n          dropdown.classList.add('closing')\r\n          setTimeout(() => {\r\n            onSelect(row, col)\r\n            dropdown.remove()\r\n          }, 150)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 鼠标离开网格时重置\r\n  const handleMouseLeave = () => {\r\n    updateHighlight(0, 0)\r\n  }\r\n\r\n  // 添加事件监听器\r\n  gridContainer.addEventListener('mousemove', handleMouseMove)\r\n  gridContainer.addEventListener('click', handleClick)\r\n  gridContainer.addEventListener('mouseleave', handleMouseLeave)\r\n\r\n  // 防止mousedown导致选区丢失\r\n  gridContainer.addEventListener('mousedown', (e) => {\r\n    e.preventDefault()\r\n  })\r\n\r\n  // 组装容器\r\n  container.appendChild(gridContainer)\r\n  container.appendChild(sizeDisplay)\r\n  container.appendChild(hint)\r\n\r\n  // 显示下拉框\r\n  if (button) {\r\n    showDropdown(button, {\r\n      customContent: container,\r\n      width: 'auto',\r\n      maxHeight: 400,\r\n    })\r\n  }\r\n  else {\r\n    // 如果没有按钮，返回容器供其他组件使用\r\n    return container as any\r\n  }\r\n}\r\n\r\n/**\r\n * 创建增强的表格网格选择器（支持动态扩展）\r\n */\r\nexport function showEnhancedTableGridSelector(options: TableGridSelectorOptions): void {\r\n  const {\r\n    onSelect,\r\n    button,\r\n  } = options\r\n\r\n  // 初始显示的网格大小\r\n  let displayRows = 5\r\n  let displayCols = 5\r\n  const maxDisplayRows = 15\r\n  const maxDisplayCols = 15\r\n\r\n  // 创建容器\r\n  const container = document.createElement('div')\r\n  container.style.cssText = `\r\n    padding: 8px;\r\n    user-select: none;\r\n  `\r\n\r\n  // 创建网格容器（动态大小）\r\n  const gridWrapper = document.createElement('div')\r\n  gridWrapper.style.cssText = `\r\n    overflow: hidden;\r\n    transition: all 0.2s ease;\r\n  `\r\n\r\n  const gridContainer = document.createElement('div')\r\n  gridContainer.style.cssText = `\r\n    display: grid;\r\n    gap: 2px;\r\n    background: #f9fafb;\r\n    padding: 4px;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n    transition: all 0.2s ease;\r\n  `\r\n\r\n  // 尺寸显示\r\n  const sizeDisplay = document.createElement('div')\r\n  sizeDisplay.style.cssText = `\r\n    text-align: center;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #1f2937;\r\n    padding: 8px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    border-radius: 4px;\r\n    margin-bottom: 4px;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  `\r\n  sizeDisplay.textContent = '移动鼠标选择大小'\r\n\r\n  let currentRows = 0\r\n  let currentCols = 0\r\n  const cells: Map<string, HTMLElement> = new Map()\r\n\r\n  // 创建或获取单元格\r\n  const getOrCreateCell = (row: number, col: number): HTMLElement => {\r\n    const key = `${row}-${col}`\r\n\r\n    if (cells.has(key))\r\n      return cells.get(key)!\r\n\r\n    const cell = document.createElement('div')\r\n    cell.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e5e7eb;\r\n      border-radius: 2px;\r\n      cursor: pointer;\r\n      width: 24px;\r\n      height: 24px;\r\n      transition: all 0.1s ease;\r\n    `\r\n    cell.dataset.row = String(row)\r\n    cell.dataset.col = String(col)\r\n\r\n    cells.set(key, cell)\r\n    return cell\r\n  }\r\n\r\n  // 更新网格大小\r\n  const updateGridSize = (rows: number, cols: number) => {\r\n    // 动态扩展网格\r\n    if (rows > displayRows - 1)\r\n      displayRows = Math.min(rows + 2, maxDisplayRows)\r\n\r\n    if (cols > displayCols - 1)\r\n      displayCols = Math.min(cols + 2, maxDisplayCols)\r\n\r\n    // 清空并重建网格\r\n    gridContainer.innerHTML = ''\r\n    gridContainer.style.gridTemplateColumns = `repeat(${displayCols}, 24px)`\r\n    gridContainer.style.gridTemplateRows = `repeat(${displayRows}, 24px)`\r\n\r\n    // 添加单元格\r\n    for (let r = 1; r <= displayRows; r++) {\r\n      for (let c = 1; c <= displayCols; c++) {\r\n        const cell = getOrCreateCell(r, c)\r\n\r\n        // 更新高亮\r\n        if (r <= rows && c <= cols) {\r\n          cell.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\r\n          cell.style.borderColor = '#667eea'\r\n          cell.style.transform = 'scale(0.95)'\r\n        }\r\n        else {\r\n          cell.style.background = 'white'\r\n          cell.style.borderColor = '#e5e7eb'\r\n          cell.style.transform = 'scale(1)'\r\n        }\r\n\r\n        gridContainer.appendChild(cell)\r\n      }\r\n    }\r\n\r\n    currentRows = rows\r\n    currentCols = cols\r\n\r\n    if (rows > 0 && cols > 0) {\r\n      sizeDisplay.innerHTML = `\r\n        <div style=\"font-size: 20px; font-weight: bold;\">${rows} × ${cols}</div>\r\n        <div style=\"font-size: 11px; opacity: 0.9; margin-top: 2px;\">点击插入表格</div>\r\n      `\r\n    }\r\n    else {\r\n      sizeDisplay.textContent = '移动鼠标选择大小'\r\n    }\r\n  }\r\n\r\n  // 初始化网格\r\n  updateGridSize(0, 0)\r\n\r\n  // 事件处理\r\n  gridContainer.addEventListener('mousemove', (e) => {\r\n    const target = e.target as HTMLElement\r\n    if (target.dataset.row && target.dataset.col) {\r\n      const row = Number.parseInt(target.dataset.row)\r\n      const col = Number.parseInt(target.dataset.col)\r\n      updateGridSize(row, col)\r\n    }\r\n  })\r\n\r\n  gridContainer.addEventListener('click', (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (currentRows > 0 && currentCols > 0) {\r\n      const dropdown = container.closest('.editor-dropdown')\r\n      if (dropdown) {\r\n        dropdown.classList.add('closing')\r\n        setTimeout(() => {\r\n          onSelect(currentRows, currentCols)\r\n          dropdown.remove()\r\n        }, 150)\r\n      }\r\n    }\r\n  })\r\n\r\n  gridContainer.addEventListener('mouseleave', () => {\r\n    // 缩小网格\r\n    displayRows = 5\r\n    displayCols = 5\r\n    updateGridSize(0, 0)\r\n  })\r\n\r\n  gridContainer.addEventListener('mousedown', (e) => {\r\n    e.preventDefault()\r\n  })\r\n\r\n  // 组装容器\r\n  gridWrapper.appendChild(gridContainer)\r\n  container.appendChild(sizeDisplay)\r\n  container.appendChild(gridWrapper)\r\n\r\n  // 显示下拉框\r\n  if (button) {\r\n    showDropdown(button, {\r\n      customContent: container,\r\n      width: 'auto',\r\n      maxHeight: 500,\r\n    })\r\n  }\r\n}\r\n"],"names":["showTableGridSelector","options","onSelect","maxRows","maxCols","button","container","document","createElement","style","cssText","header","textContent","appendChild","gridContainer","sizeDisplay","hint","cells","row","col","cell","dataset","String","push","updateHighlight","rows","cols","forEach","cellRow","Number","parseInt","cellCol","background","borderColor","handleMouseMove","e","target","handleClick","preventDefault","stopPropagation","dropdown","closest","classList","add","setTimeout","remove","handleMouseLeave","addEventListener","showDropdown","customContent","width","maxHeight","showEnhancedTableGridSelector","displayRows","displayCols","maxDisplayRows","maxDisplayCols","gridWrapper","currentRows","currentCols","Map","getOrCreateCell","key","has","get","set","updateGridSize","Math","min","innerHTML","gridTemplateColumns","gridTemplateRows","r","c","transform"],"mappings":"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"}