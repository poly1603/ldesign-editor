{"version":3,"file":"Dropdown.js","sources":["../../src/ui/Dropdown.ts"],"sourcesContent":["/**\r\n * 下拉选择器\r\n */\r\n\r\nimport { createIcon } from './icons'\r\n\r\nexport interface DropdownOption {\r\n  label: string\r\n  value: string\r\n  icon?: string // 可选图标\r\n  color?: string // 可选颜色（用于颜色选择）\r\n  emoji?: string // 可选表情（用于表情选择）\r\n}\r\n\r\nexport interface DropdownOptions {\r\n  options?: DropdownOption[]\r\n  onSelect?: (value: string) => void\r\n  placeholder?: string\r\n  customContent?: HTMLElement // 自定义内容（用于颜色选择器等复杂UI）\r\n  width?: number | string // 自定义宽度\r\n  maxHeight?: number | string // 最大高度\r\n  selectedValue?: string // 当前选中的值\r\n  renderOption?: (option: DropdownOption) => HTMLElement | null // 自定义渲染选项\r\n}\r\n\r\n/**\r\n * 创建下拉选择器\r\n */\r\nexport function createDropdown(options: DropdownOptions): HTMLElement {\r\n  const { options: items, onSelect, customContent, width, maxHeight, selectedValue, renderOption } = options\r\n\r\n  const dropdown = document.createElement('div')\r\n  dropdown.className = 'editor-dropdown'\r\n\r\n  // 设置自定义宽度\r\n  if (width)\r\n    dropdown.style.width = typeof width === 'number' ? `${width}px` : width\r\n\r\n  // 设置自定义最大高度\r\n  if (maxHeight)\r\n    dropdown.style.maxHeight = typeof maxHeight === 'number' ? `${maxHeight}px` : maxHeight\r\n\r\n  // 如果有自定义内容，直接使用\r\n  if (customContent) {\r\n    dropdown.appendChild(customContent)\r\n    return dropdown\r\n  }\r\n\r\n  // 创建选项列表\r\n  const list = document.createElement('div')\r\n  list.className = 'editor-dropdown-list'\r\n\r\n  if (items && items.length > 0) {\r\n    items.forEach((item) => {\r\n      // 如果有自定义渲染函数\r\n      if (renderOption) {\r\n        const customElement = renderOption(item)\r\n        if (customElement) {\r\n          list.appendChild(customElement)\r\n          return\r\n        }\r\n      }\r\n\r\n      // 处理分隔线\r\n      if (item.value === 'separator' || item.label === '---') {\r\n        const separator = document.createElement('div')\r\n        separator.className = 'editor-dropdown-separator'\r\n        separator.style.cssText = 'height: 1px; background: #e0e0e0; margin: 4px 8px;'\r\n        list.appendChild(separator)\r\n        return\r\n      }\r\n\r\n      const optionElement = document.createElement('div')\r\n      optionElement.className = 'editor-dropdown-option'\r\n      optionElement.dataset.value = item.value\r\n\r\n      // 如果是当前选中项，添加活动类\r\n      if (selectedValue && item.value === selectedValue)\r\n        optionElement.classList.add('active')\r\n\r\n      // 如果有图标，添加lucide图标\r\n      if (item.icon) {\r\n        const iconElement = createIcon(item.icon)\r\n        if (iconElement) {\r\n          iconElement.style.width = '16px'\r\n          iconElement.style.height = '16px'\r\n          iconElement.style.marginRight = '8px'\r\n          iconElement.style.verticalAlign = 'middle'\r\n          iconElement.style.opacity = '0.7'\r\n          optionElement.appendChild(iconElement)\r\n        }\r\n      }\r\n\r\n      // 如果有颜色，创建颜色预览\r\n      if (item.color) {\r\n        const colorPreview = document.createElement('span')\r\n        colorPreview.className = 'editor-dropdown-color-preview'\r\n        colorPreview.style.backgroundColor = item.color\r\n        optionElement.appendChild(colorPreview)\r\n      }\r\n\r\n      // 如果有表情，显示表情\r\n      if (item.emoji) {\r\n        const emojiSpan = document.createElement('span')\r\n        emojiSpan.className = 'editor-dropdown-emoji'\r\n        emojiSpan.textContent = item.emoji\r\n        optionElement.appendChild(emojiSpan)\r\n      }\r\n\r\n      // 添加文本标签\r\n      const labelSpan = document.createElement('span')\r\n      labelSpan.className = 'editor-dropdown-label'\r\n      labelSpan.textContent = item.label\r\n      optionElement.appendChild(labelSpan)\r\n\r\n      // 如果是字体家族，应用字体样式\r\n      if (item.value !== 'inherit' && item.value.includes(',') && !item.color && !item.emoji)\r\n        optionElement.style.fontFamily = item.value\r\n\r\n      // 防止选项获取焦点导致选区丢失\r\n      optionElement.addEventListener('mousedown', (e) => {\r\n        e.preventDefault()\r\n      })\r\n\r\n      optionElement.addEventListener('click', (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        if (onSelect) {\r\n          // 添加关闭动画后再执行回调\r\n          dropdown.classList.add('closing')\r\n\r\n          // 延迟执行选择回调，让用户看到选中效果\r\n          setTimeout(() => {\r\n            onSelect(item.value)\r\n            dropdown.remove()\r\n          }, 150) // 与关闭动画时长一致\r\n        }\r\n      })\r\n\r\n      list.appendChild(optionElement)\r\n    })\r\n  }\r\n\r\n  dropdown.appendChild(list)\r\n\r\n  return dropdown\r\n}\r\n\r\n/**\r\n * 显示下拉选择器\r\n */\r\nexport function showDropdown(\r\n  button: HTMLElement,\r\n  options: DropdownOptions,\r\n): void {\r\n  // 移除已存在的下拉框（带动画）\r\n  const existing = document.querySelector('.editor-dropdown') as HTMLElement\r\n  if (existing) {\r\n    // 如果已经在关闭动画中，直接移除\r\n    if (existing.classList.contains('closing')) {\r\n      existing.remove()\r\n    }\r\n    else {\r\n      // 添加关闭动画\r\n      existing.classList.add('closing')\r\n      setTimeout(() => {\r\n        existing.remove()\r\n      }, 150) // 与关闭动画时长一致\r\n    }\r\n  }\r\n\r\n  const dropdown = createDropdown(options)\r\n\r\n  // 初始定位\r\n  const rect = button.getBoundingClientRect()\r\n  dropdown.style.position = 'fixed'\r\n  dropdown.style.zIndex = '10000'\r\n\r\n  // 先添加到DOM中以获取准确尺寸\r\n  dropdown.style.visibility = 'hidden'\r\n  dropdown.style.opacity = '0'\r\n  document.body.appendChild(dropdown)\r\n\r\n  // 获取下拉框的尺寸\r\n  const dropdownRect = dropdown.getBoundingClientRect()\r\n  const windowWidth = window.innerWidth\r\n  const windowHeight = window.innerHeight\r\n  const padding = 10 // 距离窗口边缘的最小间距\r\n\r\n  // 计算最佳位置\r\n  let top = rect.bottom + 5\r\n  let left = rect.left\r\n\r\n  // 检查右边界\r\n  if (left + dropdownRect.width > windowWidth - padding) {\r\n    // 如果超出右边界，尝试右对齐\r\n    left = rect.right - dropdownRect.width\r\n\r\n    // 如果右对齐后超出左边界，则贴右边\r\n    if (left < padding)\r\n      left = windowWidth - dropdownRect.width - padding\r\n  }\r\n\r\n  // 检查左边界\r\n  if (left < padding)\r\n    left = padding\r\n\r\n  // 检查下边界\r\n  if (top + dropdownRect.height > windowHeight - padding) {\r\n    // 如果下方空间不足，尝试显示在按钮上方\r\n    const topAbove = rect.top - dropdownRect.height - 5\r\n\r\n    if (topAbove >= padding) {\r\n      // 上方有足够空间\r\n      top = topAbove\r\n      // 修改动画起点为底部\r\n      dropdown.style.transformOrigin = 'bottom'\r\n    }\r\n    else {\r\n      // 上下都不够，限制高度并显示在下方\r\n      top = rect.bottom + 5\r\n      const maxHeight = windowHeight - top - padding\r\n      dropdown.style.maxHeight = `${maxHeight}px`\r\n      dropdown.style.overflowY = 'auto'\r\n    }\r\n  }\r\n\r\n  // 应用计算后的位置\r\n  dropdown.style.top = `${top}px`\r\n  dropdown.style.left = `${left}px`\r\n\r\n  // 显示下拉框\r\n  dropdown.style.visibility = 'visible'\r\n  dropdown.style.opacity = '1'\r\n\r\n  // 触发动画\r\n  dropdown.classList.remove('editor-dropdown')\r\n  void dropdown.offsetWidth // 强制重排\r\n  dropdown.classList.add('editor-dropdown')\r\n\r\n  // 点击外部关闭（带动画）\r\n  const closeOnClickOutside = (e: MouseEvent) => {\r\n    if (!dropdown.contains(e.target as Node) && e.target !== button) {\r\n      // 添加关闭动画\r\n      dropdown.classList.add('closing')\r\n      setTimeout(() => {\r\n        dropdown.remove()\r\n      }, 150) // 与关闭动画时长一致\r\n      document.removeEventListener('click', closeOnClickOutside)\r\n    }\r\n  }\r\n\r\n  // ESC键关闭下拉框\r\n  const closeOnEsc = (e: KeyboardEvent) => {\r\n    if (e.key === 'Escape') {\r\n      dropdown.classList.add('closing')\r\n      setTimeout(() => {\r\n        dropdown.remove()\r\n      }, 150)\r\n      document.removeEventListener('keydown', closeOnEsc)\r\n      document.removeEventListener('click', closeOnClickOutside)\r\n    }\r\n  }\r\n\r\n  setTimeout(() => {\r\n    document.addEventListener('click', closeOnClickOutside)\r\n    document.addEventListener('keydown', closeOnEsc)\r\n  }, 0)\r\n}\r\n"],"names":["createDropdown","options","items","onSelect","customContent","width","maxHeight","selectedValue","renderOption","dropdown","document","createElement","className","style","appendChild","list","length","forEach","item","customElement","value","label","separator","cssText","optionElement","dataset","classList","add","icon","iconElement","createIcon","height","marginRight","verticalAlign","opacity","color","colorPreview","backgroundColor","emoji","emojiSpan","textContent","labelSpan","includes","fontFamily","addEventListener","e","preventDefault","stopPropagation","setTimeout","remove","showDropdown","button","existing","querySelector","contains","rect","getBoundingClientRect","position","zIndex","visibility","body","dropdownRect","windowWidth","window","innerWidth","windowHeight","innerHeight","padding","top","bottom","left","right","topAbove","transformOrigin","overflowY","offsetWidth","closeOnClickOutside","target","removeEventListener","closeOnEsc","key"],"mappings":"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"}