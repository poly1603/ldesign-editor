{"version":3,"file":"SwipeMenu.js","sources":["../../../src/mobile/components/SwipeMenu.ts"],"sourcesContent":["/**\r\n * 滑动菜单组件\r\n * 从左侧滑出的导航菜单\r\n */\r\n\r\nimport { EventEmitter } from '../../core/EventEmitter'\r\nimport { createLogger } from '../../utils/logger'\r\n\r\nconst logger = createLogger('SwipeMenu')\r\n\r\nexport interface SwipeMenuItem {\r\n  label: string\r\n  icon?: string\r\n  action?: () => void\r\n  children?: SwipeMenuItem[]\r\n  disabled?: boolean\r\n}\r\n\r\nexport interface SwipeMenuOptions {\r\n  container: HTMLElement\r\n  items?: SwipeMenuItem[]\r\n  width?: string\r\n  backgroundColor?: string\r\n  textColor?: string\r\n  activeColor?: string\r\n}\r\n\r\nexport class SwipeMenu extends EventEmitter {\r\n  private container: HTMLElement\r\n  private menuElement: HTMLElement\r\n  private overlayElement: HTMLElement\r\n  private options: Required<SwipeMenuOptions>\r\n  private isOpen_ = false\r\n  private startX = 0\r\n  private currentX = 0\r\n  private isDragging = false\r\n\r\n  constructor(options: SwipeMenuOptions) {\r\n    super()\r\n    this.container = options.container\r\n    this.options = {\r\n      items: [],\r\n      width: '80%',\r\n      backgroundColor: '#ffffff',\r\n      textColor: '#333333',\r\n      activeColor: '#2196F3',\r\n      ...options,\r\n    }\r\n\r\n    this.createMenu()\r\n    this.setupEventListeners()\r\n  }\r\n\r\n  /**\r\n   * 创建菜单DOM\r\n   */\r\n  private createMenu(): void {\r\n    // 创建遮罩层\r\n    this.overlayElement = document.createElement('div')\r\n    this.overlayElement.className = 'swipe-menu-overlay'\r\n    this.overlayElement.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background: rgba(0, 0, 0, 0.5);\r\n      z-index: 998;\r\n      opacity: 0;\r\n      visibility: hidden;\r\n      transition: opacity 0.3s, visibility 0.3s;\r\n    `\r\n\r\n    // 创建菜单容器\r\n    this.menuElement = document.createElement('div')\r\n    this.menuElement.className = 'swipe-menu'\r\n    this.menuElement.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: ${this.options.width};\r\n      height: 100%;\r\n      background: ${this.options.backgroundColor};\r\n      z-index: 999;\r\n      transform: translateX(-100%);\r\n      transition: transform 0.3s ease-out;\r\n      overflow-y: auto;\r\n      -webkit-overflow-scrolling: touch;\r\n      box-shadow: 2px 0 8px rgba(0,0,0,0.15);\r\n    `\r\n\r\n    // 创建菜单头部\r\n    const header = document.createElement('div')\r\n    header.className = 'swipe-menu-header'\r\n    header.style.cssText = `\r\n      padding: 20px;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: white;\r\n      display: flex;\r\n      align-items: center;\r\n      min-height: 120px;\r\n    `\r\n\r\n    const logo = document.createElement('div')\r\n    logo.style.cssText = `\r\n      width: 50px;\r\n      height: 50px;\r\n      background: white;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 24px;\r\n      color: #667eea;\r\n      margin-right: 15px;\r\n    `\r\n    logo.textContent = '✏️'\r\n\r\n    const title = document.createElement('div')\r\n    title.innerHTML = `\r\n      <h3 style=\"margin: 0; font-size: 20px;\">LDesign Editor</h3>\r\n      <p style=\"margin: 5px 0 0 0; font-size: 14px; opacity: 0.9;\">移动版</p>\r\n    `\r\n\r\n    header.appendChild(logo)\r\n    header.appendChild(title)\r\n    this.menuElement.appendChild(header)\r\n\r\n    // 创建菜单项容器\r\n    const itemsContainer = document.createElement('div')\r\n    itemsContainer.className = 'swipe-menu-items'\r\n    itemsContainer.style.cssText = `\r\n      padding: 10px 0;\r\n    `\r\n\r\n    // 渲染菜单项\r\n    this.options.items.forEach((item) => {\r\n      itemsContainer.appendChild(this.createMenuItem(item))\r\n    })\r\n\r\n    this.menuElement.appendChild(itemsContainer)\r\n\r\n    // 添加到容器\r\n    document.body.appendChild(this.overlayElement)\r\n    document.body.appendChild(this.menuElement)\r\n  }\r\n\r\n  /**\r\n   * 创建菜单项\r\n   */\r\n  private createMenuItem(item: SwipeMenuItem, level = 0): HTMLElement {\r\n    const menuItem = document.createElement('div')\r\n    menuItem.className = 'swipe-menu-item'\r\n    menuItem.style.cssText = `\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 15px 20px;\r\n      padding-left: ${20 + level * 20}px;\r\n      color: ${item.disabled ? '#999' : this.options.textColor};\r\n      cursor: ${item.disabled ? 'not-allowed' : 'pointer'};\r\n      transition: background-color 0.2s;\r\n      position: relative;\r\n    `\r\n\r\n    if (!item.disabled) {\r\n      menuItem.addEventListener('mouseenter', () => {\r\n        menuItem.style.backgroundColor = '#f5f5f5'\r\n      })\r\n\r\n      menuItem.addEventListener('mouseleave', () => {\r\n        menuItem.style.backgroundColor = 'transparent'\r\n      })\r\n\r\n      menuItem.addEventListener('click', () => {\r\n        if (item.action) {\r\n          item.action()\r\n          this.close()\r\n        }\r\n        this.emit('itemclick', item)\r\n      })\r\n    }\r\n\r\n    // 图标\r\n    if (item.icon) {\r\n      const icon = document.createElement('span')\r\n      icon.className = 'swipe-menu-item-icon'\r\n      icon.style.cssText = `\r\n        margin-right: 15px;\r\n        font-size: 20px;\r\n        width: 24px;\r\n        text-align: center;\r\n      `\r\n      icon.textContent = item.icon\r\n      menuItem.appendChild(icon)\r\n    }\r\n\r\n    // 标签\r\n    const label = document.createElement('span')\r\n    label.className = 'swipe-menu-item-label'\r\n    label.style.cssText = `\r\n      flex: 1;\r\n      font-size: 16px;\r\n    `\r\n    label.textContent = item.label\r\n    menuItem.appendChild(label)\r\n\r\n    // 子菜单箭头\r\n    if (item.children && item.children.length > 0) {\r\n      const arrow = document.createElement('span')\r\n      arrow.className = 'swipe-menu-item-arrow'\r\n      arrow.style.cssText = `\r\n        color: #999;\r\n        font-size: 12px;\r\n      `\r\n      arrow.textContent = '▶'\r\n      menuItem.appendChild(arrow)\r\n    }\r\n\r\n    const container = document.createElement('div')\r\n    container.appendChild(menuItem)\r\n\r\n    // 递归创建子菜单\r\n    if (item.children && item.children.length > 0) {\r\n      const submenu = document.createElement('div')\r\n      submenu.className = 'swipe-menu-submenu'\r\n      submenu.style.cssText = `\r\n        display: none;\r\n        background: #fafafa;\r\n      `\r\n\r\n      item.children.forEach((child) => {\r\n        submenu.appendChild(this.createMenuItem(child, level + 1))\r\n      })\r\n\r\n      container.appendChild(submenu)\r\n\r\n      // 展开/收起子菜单\r\n      menuItem.addEventListener('click', (e) => {\r\n        e.stopPropagation()\r\n        const isExpanded = submenu.style.display === 'block'\r\n        submenu.style.display = isExpanded ? 'none' : 'block'\r\n        arrow.style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(90deg)'\r\n      })\r\n    }\r\n\r\n    return container\r\n  }\r\n\r\n  /**\r\n   * 设置事件监听器\r\n   */\r\n  private setupEventListeners(): void {\r\n    // 遮罩层点击关闭\r\n    this.overlayElement.addEventListener('click', () => {\r\n      this.close()\r\n    })\r\n\r\n    // 触摸滑动\r\n    let touchStartX = 0\r\n    let menuStartX = 0\r\n    let isSwiping = false\r\n\r\n    // 边缘滑动打开\r\n    document.addEventListener('touchstart', (e) => {\r\n      const touch = e.touches[0]\r\n      if (touch.pageX < 20 && !this.isOpen_) {\r\n        touchStartX = touch.pageX\r\n        menuStartX = -this.menuElement.offsetWidth\r\n        isSwiping = true\r\n        this.menuElement.style.transition = 'none'\r\n      }\r\n      else if (this.isOpen_) {\r\n        touchStartX = touch.pageX\r\n        menuStartX = 0\r\n        isSwiping = true\r\n        this.menuElement.style.transition = 'none'\r\n      }\r\n    })\r\n\r\n    document.addEventListener('touchmove', (e) => {\r\n      if (!isSwiping)\r\n        return\r\n\r\n      const touch = e.touches[0]\r\n      const deltaX = touch.pageX - touchStartX\r\n      let newX = menuStartX + deltaX\r\n\r\n      // 限制范围\r\n      const maxX = 0\r\n      const minX = -this.menuElement.offsetWidth\r\n      newX = Math.max(minX, Math.min(maxX, newX))\r\n\r\n      this.menuElement.style.transform = `translateX(${newX}px)`\r\n\r\n      // 更新遮罩层透明度\r\n      const progress = Math.abs(newX / this.menuElement.offsetWidth)\r\n      this.overlayElement.style.opacity = String(1 - progress * 0.5)\r\n      this.overlayElement.style.visibility = 'visible'\r\n\r\n      e.preventDefault()\r\n    })\r\n\r\n    document.addEventListener('touchend', (e) => {\r\n      if (!isSwiping)\r\n        return\r\n\r\n      isSwiping = false\r\n      this.menuElement.style.transition = 'transform 0.3s ease-out'\r\n\r\n      const currentTransform = this.menuElement.style.transform\r\n      const match = currentTransform.match(/translateX\\(([-\\d.]+)px\\)/)\r\n      const currentX = match ? Number.parseFloat(match[1]) : 0\r\n\r\n      // 根据滑动距离决定打开或关闭\r\n      if (currentX > -this.menuElement.offsetWidth * 0.5)\r\n        this.open()\r\n      else\r\n        this.close()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 打开菜单\r\n   */\r\n  open(): void {\r\n    if (this.isOpen_)\r\n      return\r\n\r\n    this.isOpen_ = true\r\n    this.menuElement.style.transform = 'translateX(0)'\r\n    this.overlayElement.style.opacity = '1'\r\n    this.overlayElement.style.visibility = 'visible'\r\n\r\n    this.emit('open')\r\n    logger.info('Menu opened')\r\n  }\r\n\r\n  /**\r\n   * 关闭菜单\r\n   */\r\n  close(): void {\r\n    if (!this.isOpen_)\r\n      return\r\n\r\n    this.isOpen_ = false\r\n    this.menuElement.style.transform = 'translateX(-100%)'\r\n    this.overlayElement.style.opacity = '0'\r\n    this.overlayElement.style.visibility = 'hidden'\r\n\r\n    this.emit('close')\r\n    logger.info('Menu closed')\r\n  }\r\n\r\n  /**\r\n   * 切换菜单\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen_)\r\n      this.close()\r\n    else\r\n      this.open()\r\n  }\r\n\r\n  /**\r\n   * 检查菜单是否打开\r\n   */\r\n  isOpen(): boolean {\r\n    return this.isOpen_\r\n  }\r\n\r\n  /**\r\n   * 更新菜单项\r\n   */\r\n  updateItems(items: SwipeMenuItem[]): void {\r\n    this.options.items = items\r\n\r\n    // 清空现有菜单项\r\n    const itemsContainer = this.menuElement.querySelector('.swipe-menu-items')\r\n    if (itemsContainer) {\r\n      itemsContainer.innerHTML = ''\r\n\r\n      // 重新渲染菜单项\r\n      items.forEach((item) => {\r\n        itemsContainer.appendChild(this.createMenuItem(item))\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置菜单项启用/禁用状态\r\n   */\r\n  setItemEnabled(label: string, enabled: boolean): void {\r\n    const items = this.menuElement.querySelectorAll('.swipe-menu-item')\r\n    items.forEach((item) => {\r\n      const labelElement = item.querySelector('.swipe-menu-item-label')\r\n      if (labelElement && labelElement.textContent === label) {\r\n        const menuItem = item as HTMLElement\r\n        menuItem.style.color = enabled ? this.options.textColor : '#999'\r\n        menuItem.style.cursor = enabled ? 'pointer' : 'not-allowed'\r\n        menuItem.style.pointerEvents = enabled ? 'auto' : 'none'\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 销毁菜单\r\n   */\r\n  destroy(): void {\r\n    this.menuElement.remove()\r\n    this.overlayElement.remove()\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n"],"names":["logger","createLogger","SwipeMenu","EventEmitter","constructor","options","isOpen_","startX","currentX","isDragging","container","items","width","backgroundColor","textColor","activeColor","createMenu","setupEventListeners","overlayElement","document","createElement","className","style","cssText","menuElement","header","logo","textContent","title","innerHTML","appendChild","itemsContainer","forEach","item","createMenuItem","body","level","menuItem","disabled","addEventListener","action","close","emit","icon","label","children","length","arrow","submenu","child","e","stopPropagation","isExpanded","display","transform","touchStartX","menuStartX","isSwiping","touch","touches","pageX","offsetWidth","transition","deltaX","newX","maxX","minX","Math","max","min","progress","abs","opacity","String","visibility","preventDefault","currentTransform","match","Number","parseFloat","open","info","toggle","isOpen","updateItems","querySelector","setItemEnabled","enabled","querySelectorAll","labelElement","color","cursor","pointerEvents","destroy","remove","removeAllListeners"],"mappings":"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"}