{"version":3,"file":"link-preview.js","sources":["../../../src/plugins/text/link-preview.ts"],"sourcesContent":["/**\r\n * 链接悬浮预览插件\r\n * 提供链接悬浮预览卡片、编辑、打开、复制、删除等功能\r\n */\r\n\r\nimport type { Plugin } from '../../types'\r\nimport { createPlugin } from '../../core/Plugin'\r\nimport { showUnifiedDialog } from '../../ui/UnifiedDialog'\r\n\r\n// 样式\r\nconst PREVIEW_STYLES = `\r\n.link-preview-card {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: #fff;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\r\n  z-index: 1000;\r\n  font-size: 13px;\r\n  max-width: 400px;\r\n  animation: linkPreviewFadeIn 0.15s ease;\r\n}\r\n\r\n@keyframes linkPreviewFadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(4px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.link-preview-icon {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 32px;\r\n  height: 32px;\r\n  background: #f3f4f6;\r\n  border-radius: 6px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.link-preview-icon svg {\r\n  width: 16px;\r\n  height: 16px;\r\n  color: #6b7280;\r\n}\r\n\r\n.link-preview-icon img {\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.link-preview-content {\r\n  flex: 1;\r\n  min-width: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.link-preview-text {\r\n  font-weight: 500;\r\n  color: #1f2937;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.link-preview-url {\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.link-preview-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  padding-left: 8px;\r\n  border-left: 1px solid #e5e7eb;\r\n  margin-left: 4px;\r\n}\r\n\r\n.link-preview-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 28px;\r\n  height: 28px;\r\n  padding: 0;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  color: #6b7280;\r\n  transition: all 0.15s ease;\r\n}\r\n\r\n.link-preview-btn:hover {\r\n  background: #f3f4f6;\r\n  color: #1f2937;\r\n}\r\n\r\n.link-preview-btn.danger:hover {\r\n  background: #fef2f2;\r\n  color: #ef4444;\r\n}\r\n\r\n.link-preview-btn svg {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n\r\n/* 链接hover效果 */\r\n.ldesign-editor-content a {\r\n  position: relative;\r\n  color: #3b82f6;\r\n  text-decoration: underline;\r\n  text-decoration-color: rgba(59, 130, 246, 0.3);\r\n  text-underline-offset: 2px;\r\n  transition: all 0.15s ease;\r\n}\r\n\r\n.ldesign-editor-content a:hover {\r\n  text-decoration-color: #3b82f6;\r\n}\r\n\r\n.ldesign-editor-content a.link-active {\r\n  background: rgba(59, 130, 246, 0.1);\r\n  border-radius: 2px;\r\n}\r\n\r\n/* 复制成功提示 */\r\n.link-preview-toast {\r\n  position: fixed;\r\n  top: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  padding: 8px 16px;\r\n  background: #10b981;\r\n  color: #fff;\r\n  border-radius: 6px;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n  z-index: 10000;\r\n  animation: toastFadeInOut 2s ease;\r\n}\r\n\r\n@keyframes toastFadeInOut {\r\n  0% { opacity: 0; transform: translateX(-50%) translateY(-10px); }\r\n  15% { opacity: 1; transform: translateX(-50%) translateY(0); }\r\n  85% { opacity: 1; transform: translateX(-50%) translateY(0); }\r\n  100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }\r\n}\r\n`\r\n\r\n// SVG 图标\r\nconst ICONS = {\r\n  link: `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"/><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"/></svg>`,\r\n  edit: `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"/></svg>`,\r\n  open: `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"/><polyline points=\"15 3 21 3 21 9\"/><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"/></svg>`,\r\n  copy: `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"/><path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"/></svg>`,\r\n  unlink: `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18.84 12.25l1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71\"/><path d=\"M5.17 11.75l-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71\"/><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"5\"/><line x1=\"2\" y1=\"8\" x2=\"5\" y2=\"8\"/><line x1=\"16\" y1=\"19\" x2=\"16\" y2=\"22\"/><line x1=\"19\" y1=\"16\" x2=\"22\" y2=\"16\"/></svg>`,\r\n}\r\n\r\n/**\r\n * 获取网站图标URL\r\n */\r\nfunction getFaviconUrl(url: string): string {\r\n  try {\r\n    const urlObj = new URL(url)\r\n    return `https://www.google.com/s2/favicons?domain=${urlObj.hostname}&sz=32`\r\n  } catch {\r\n    return ''\r\n  }\r\n}\r\n\r\n/**\r\n * 格式化URL显示\r\n */\r\nfunction formatUrl(url: string): string {\r\n  try {\r\n    const urlObj = new URL(url)\r\n    let display = urlObj.hostname + urlObj.pathname\r\n    if (display.length > 40) {\r\n      display = display.substring(0, 37) + '...'\r\n    }\r\n    return display\r\n  } catch {\r\n    if (url.length > 40) {\r\n      return url.substring(0, 37) + '...'\r\n    }\r\n    return url\r\n  }\r\n}\r\n\r\n/**\r\n * 链接预览类\r\n */\r\nclass LinkPreview {\r\n  private previewCard: HTMLElement | null = null\r\n  private currentLink: HTMLAnchorElement | null = null\r\n  private hideTimeout: ReturnType<typeof setTimeout> | null = null\r\n  private styleInjected = false\r\n\r\n  constructor() {\r\n    this.injectStyles()\r\n    this.setupEventListeners()\r\n  }\r\n\r\n  /**\r\n   * 注入样式\r\n   */\r\n  private injectStyles() {\r\n    if (this.styleInjected) return\r\n\r\n    const styleId = 'link-preview-styles'\r\n    if (document.getElementById(styleId)) {\r\n      this.styleInjected = true\r\n      return\r\n    }\r\n\r\n    const style = document.createElement('style')\r\n    style.id = styleId\r\n    style.textContent = PREVIEW_STYLES\r\n    document.head.appendChild(style)\r\n    this.styleInjected = true\r\n  }\r\n\r\n  /**\r\n   * 设置事件监听\r\n   */\r\n  private setupEventListeners() {\r\n    // 监听链接hover\r\n    document.addEventListener('mouseover', (e) => {\r\n      const target = e.target as HTMLElement\r\n      const link = target.closest('a') as HTMLAnchorElement\r\n\r\n      // 检查是否在编辑器内\r\n      if (link && link.closest('.ldesign-editor-content')) {\r\n        this.clearHideTimeout()\r\n        this.showPreview(link)\r\n      }\r\n    })\r\n\r\n    // 监听鼠标离开\r\n    document.addEventListener('mouseout', (e) => {\r\n      const target = e.target as HTMLElement\r\n      const relatedTarget = e.relatedTarget as HTMLElement\r\n\r\n      // 如果移动到预览卡片，不隐藏\r\n      if (relatedTarget?.closest('.link-preview-card')) {\r\n        return\r\n      }\r\n\r\n      // 如果从链接移出\r\n      if (target.closest('a') && target.closest('.ldesign-editor-content')) {\r\n        this.scheduleHide()\r\n      }\r\n    })\r\n\r\n    // 预览卡片的鼠标事件\r\n    document.addEventListener('mouseover', (e) => {\r\n      const target = e.target as HTMLElement\r\n      if (target.closest('.link-preview-card')) {\r\n        this.clearHideTimeout()\r\n      }\r\n    })\r\n\r\n    document.addEventListener('mouseout', (e) => {\r\n      const target = e.target as HTMLElement\r\n      const relatedTarget = e.relatedTarget as HTMLElement\r\n\r\n      if (target.closest('.link-preview-card')) {\r\n        // 如果移动到链接，不隐藏\r\n        if (relatedTarget?.tagName === 'A' && relatedTarget.closest('.ldesign-editor-content')) {\r\n          return\r\n        }\r\n        this.scheduleHide()\r\n      }\r\n    })\r\n\r\n    // 点击其他地方隐藏\r\n    document.addEventListener('click', (e) => {\r\n      const target = e.target as HTMLElement\r\n      if (!target.closest('.link-preview-card') && !target.closest('a')) {\r\n        this.hidePreview()\r\n      }\r\n    })\r\n\r\n    // ESC 隐藏\r\n    document.addEventListener('keydown', (e) => {\r\n      if (e.key === 'Escape' && this.previewCard) {\r\n        this.hidePreview()\r\n      }\r\n    })\r\n\r\n    // 滚动时隐藏\r\n    document.addEventListener('scroll', () => {\r\n      if (this.previewCard) {\r\n        this.hidePreview()\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * 显示预览卡片\r\n   */\r\n  private showPreview(link: HTMLAnchorElement) {\r\n    // 如果是同一个链接，不重复显示\r\n    if (this.currentLink === link && this.previewCard) {\r\n      return\r\n    }\r\n\r\n    this.hidePreview()\r\n    this.currentLink = link\r\n    link.classList.add('link-active')\r\n\r\n    this.previewCard = this.createPreviewCard(link)\r\n    document.body.appendChild(this.previewCard)\r\n\r\n    this.positionPreview(link)\r\n  }\r\n\r\n  /**\r\n   * 隐藏预览卡片\r\n   */\r\n  private hidePreview() {\r\n    if (this.previewCard) {\r\n      this.previewCard.remove()\r\n      this.previewCard = null\r\n    }\r\n\r\n    if (this.currentLink) {\r\n      this.currentLink.classList.remove('link-active')\r\n      this.currentLink = null\r\n    }\r\n\r\n    this.clearHideTimeout()\r\n  }\r\n\r\n  /**\r\n   * 计划隐藏\r\n   */\r\n  private scheduleHide() {\r\n    this.clearHideTimeout()\r\n    this.hideTimeout = setTimeout(() => {\r\n      this.hidePreview()\r\n    }, 200)\r\n  }\r\n\r\n  /**\r\n   * 清除隐藏计时器\r\n   */\r\n  private clearHideTimeout() {\r\n    if (this.hideTimeout) {\r\n      clearTimeout(this.hideTimeout)\r\n      this.hideTimeout = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 定位预览卡片\r\n   */\r\n  private positionPreview(link: HTMLAnchorElement) {\r\n    if (!this.previewCard) return\r\n\r\n    const rect = link.getBoundingClientRect()\r\n    const previewRect = this.previewCard.getBoundingClientRect()\r\n\r\n    let top = rect.bottom + 8\r\n    let left = rect.left\r\n\r\n    // 边界检查 - 下方\r\n    if (top + previewRect.height > window.innerHeight - 10) {\r\n      top = rect.top - previewRect.height - 8\r\n    }\r\n\r\n    // 边界检查 - 右侧\r\n    if (left + previewRect.width > window.innerWidth - 10) {\r\n      left = window.innerWidth - previewRect.width - 10\r\n    }\r\n\r\n    // 边界检查 - 左侧\r\n    if (left < 10) {\r\n      left = 10\r\n    }\r\n\r\n    this.previewCard.style.top = `${top + window.scrollY}px`\r\n    this.previewCard.style.left = `${left + window.scrollX}px`\r\n  }\r\n\r\n  /**\r\n   * 创建预览卡片\r\n   */\r\n  private createPreviewCard(link: HTMLAnchorElement): HTMLElement {\r\n    const card = document.createElement('div')\r\n    card.className = 'link-preview-card'\r\n\r\n    const url = link.href\r\n    const text = link.textContent || url\r\n\r\n    // 图标\r\n    const iconWrapper = document.createElement('div')\r\n    iconWrapper.className = 'link-preview-icon'\r\n\r\n    const faviconUrl = getFaviconUrl(url)\r\n    if (faviconUrl) {\r\n      const favicon = document.createElement('img')\r\n      favicon.src = faviconUrl\r\n      favicon.onerror = () => {\r\n        iconWrapper.innerHTML = ICONS.link\r\n      }\r\n      iconWrapper.appendChild(favicon)\r\n    } else {\r\n      iconWrapper.innerHTML = ICONS.link\r\n    }\r\n\r\n    // 内容\r\n    const content = document.createElement('div')\r\n    content.className = 'link-preview-content'\r\n\r\n    const textEl = document.createElement('div')\r\n    textEl.className = 'link-preview-text'\r\n    textEl.textContent = text\r\n    textEl.title = text\r\n\r\n    const urlEl = document.createElement('div')\r\n    urlEl.className = 'link-preview-url'\r\n    urlEl.textContent = formatUrl(url)\r\n    urlEl.title = url\r\n\r\n    content.appendChild(textEl)\r\n    content.appendChild(urlEl)\r\n\r\n    // 操作按钮\r\n    const actions = document.createElement('div')\r\n    actions.className = 'link-preview-actions'\r\n\r\n    actions.appendChild(this.createButton('edit', '编辑链接', () => this.editLink(link)))\r\n    actions.appendChild(this.createButton('open', '打开链接', () => this.openLink(url)))\r\n    actions.appendChild(this.createButton('copy', '复制链接', () => this.copyLink(url)))\r\n    actions.appendChild(this.createButton('unlink', '移除链接', () => this.removeLink(link), true))\r\n\r\n    card.appendChild(iconWrapper)\r\n    card.appendChild(content)\r\n    card.appendChild(actions)\r\n\r\n    return card\r\n  }\r\n\r\n  /**\r\n   * 创建按钮\r\n   */\r\n  private createButton(icon: string, title: string, onClick: () => void, isDanger = false): HTMLButtonElement {\r\n    const button = document.createElement('button')\r\n    button.className = 'link-preview-btn' + (isDanger ? ' danger' : '')\r\n    button.title = title\r\n    button.innerHTML = ICONS[icon as keyof typeof ICONS] || ''\r\n    button.onclick = (e) => {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      onClick()\r\n    }\r\n    return button\r\n  }\r\n\r\n  /**\r\n   * 编辑链接\r\n   */\r\n  private editLink(link: HTMLAnchorElement) {\r\n    const currentUrl = link.href\r\n    const currentText = link.textContent || ''\r\n\r\n    this.hidePreview()\r\n\r\n    showUnifiedDialog({\r\n      title: '编辑链接',\r\n      width: 500,\r\n      icon: ICONS.edit,\r\n      fields: [\r\n        {\r\n          id: 'text',\r\n          type: 'text',\r\n          label: '链接文本',\r\n          placeholder: '请输入链接文本',\r\n          defaultValue: currentText,\r\n        },\r\n        {\r\n          id: 'url',\r\n          type: 'url',\r\n          label: '链接地址',\r\n          placeholder: 'https://example.com',\r\n          required: true,\r\n          defaultValue: currentUrl,\r\n          helpText: '请输入完整的URL地址，包括 http:// 或 https://',\r\n        },\r\n      ],\r\n      onSubmit: (data) => {\r\n        link.href = data.url\r\n        link.textContent = data.text || data.url\r\n        this.triggerUpdate()\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 打开链接\r\n   */\r\n  private openLink(url: string) {\r\n    window.open(url, '_blank', 'noopener,noreferrer')\r\n  }\r\n\r\n  /**\r\n   * 复制链接\r\n   */\r\n  private copyLink(url: string) {\r\n    navigator.clipboard.writeText(url).then(() => {\r\n      this.showToast('链接已复制到剪贴板')\r\n    }).catch(() => {\r\n      this.showToast('复制失败', false)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 移除链接\r\n   */\r\n  private removeLink(link: HTMLAnchorElement) {\r\n    const text = document.createTextNode(link.textContent || '')\r\n    link.parentNode?.replaceChild(text, link)\r\n    this.hidePreview()\r\n    this.triggerUpdate()\r\n  }\r\n\r\n  /**\r\n   * 显示提示\r\n   */\r\n  private showToast(message: string, success = true) {\r\n    const toast = document.createElement('div')\r\n    toast.className = 'link-preview-toast'\r\n    toast.textContent = message\r\n    if (!success) {\r\n      toast.style.background = '#ef4444'\r\n    }\r\n    document.body.appendChild(toast)\r\n\r\n    setTimeout(() => {\r\n      toast.remove()\r\n    }, 2000)\r\n  }\r\n\r\n  /**\r\n   * 触发编辑器更新\r\n   */\r\n  private triggerUpdate() {\r\n    const editorContent = document.querySelector('.ldesign-editor-content')\r\n    if (editorContent) {\r\n      const event = new Event('input', { bubbles: true })\r\n      editorContent.dispatchEvent(event)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 销毁\r\n   */\r\n  destroy() {\r\n    this.hidePreview()\r\n  }\r\n}\r\n\r\n// 预览实例\r\nlet linkPreviewInstance: LinkPreview | null = null\r\n\r\n/**\r\n * 链接预览插件\r\n */\r\nexport const LinkPreviewPlugin: Plugin = createPlugin({\r\n  name: 'linkPreview',\r\n  init: () => {\r\n    if (!linkPreviewInstance) {\r\n      linkPreviewInstance = new LinkPreview()\r\n    }\r\n  },\r\n  destroy: () => {\r\n    if (linkPreviewInstance) {\r\n      linkPreviewInstance.destroy()\r\n      linkPreviewInstance = null\r\n    }\r\n  },\r\n})\r\n"],"names":["PREVIEW_STYLES","ICONS","link","edit","open","copy","unlink","getFaviconUrl","url","urlObj","URL","hostname","formatUrl","display","pathname","length","substring","LinkPreview","constructor","previewCard","currentLink","hideTimeout","styleInjected","injectStyles","setupEventListeners","styleId","document","getElementById","style","createElement","id","textContent","head","appendChild","addEventListener","e","target","closest","clearHideTimeout","showPreview","relatedTarget","scheduleHide","tagName","hidePreview","key","classList","add","createPreviewCard","body","positionPreview","remove","setTimeout","clearTimeout","rect","getBoundingClientRect","previewRect","top","bottom","left","height","window","innerHeight","width","innerWidth","scrollY","scrollX","card","className","href","text","iconWrapper","faviconUrl","favicon","src","onerror","innerHTML","content","textEl","title","urlEl","actions","createButton","editLink","openLink","copyLink","removeLink","icon","onClick","isDanger","button","onclick","stopPropagation","preventDefault","currentUrl","currentText","showUnifiedDialog","fields","type","label","placeholder","defaultValue","required","helpText","onSubmit","data","triggerUpdate","navigator","clipboard","writeText","then","showToast","catch","createTextNode","parentNode","replaceChild","message","success","toast","background","editorContent","querySelector","event","Event","bubbles","dispatchEvent","destroy","linkPreviewInstance","LinkPreviewPlugin","createPlugin","name","init"],"mappings":"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"}