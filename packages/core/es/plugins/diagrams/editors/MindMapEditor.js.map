{"version":3,"file":"MindMapEditor.js","sources":["../../../../src/plugins/diagrams/editors/MindMapEditor.ts"],"sourcesContent":["/**\r\n * æ€ç»´å¯¼å›¾ç¼–è¾‘å™¨\r\n * ä½¿ç”¨ç®€åŒ–çš„å®ç°ï¼Œæ”¯æŒåŸºæœ¬çš„èŠ‚ç‚¹åˆ›å»ºã€ç¼–è¾‘å’Œå¸ƒå±€\r\n */\r\n\r\nimport type { DiagramEditor, DiagramOptions, MindMapData, MindMapNode } from '../types'\r\nimport { createLogger } from '../../../utils/logger'\r\n\r\nconst logger = createLogger('MindMapEditor')\r\n\r\nexport class MindMapEditor implements DiagramEditor {\r\n  private container?: HTMLElement\r\n  private data?: MindMapData\r\n  private selectedNode?: MindMapNode\r\n  private onSave?: (data: MindMapData, options?: DiagramOptions) => void\r\n  private onCancel?: () => void\r\n  private canvas?: HTMLCanvasElement\r\n  private ctx?: CanvasRenderingContext2D\r\n  private scale = 1\r\n  private offsetX = 0\r\n  private offsetY = 0\r\n  private isDragging = false\r\n  private dragStartX = 0\r\n  private dragStartY = 0\r\n\r\n  /**\r\n   * æ¸²æŸ“ç¼–è¾‘å™¨\r\n   */\r\n  async render(container: HTMLElement, options: {\r\n    data: MindMapData\r\n    onSave: (data: MindMapData, options?: DiagramOptions) => void\r\n    onCancel: () => void\r\n  }): Promise<void> {\r\n    logger.info('Rendering mind map editor')\r\n\r\n    this.container = container\r\n    this.data = JSON.parse(JSON.stringify(options.data))\r\n    this.onSave = options.onSave\r\n    this.onCancel = options.onCancel\r\n\r\n    // åˆ›å»ºUI\r\n    this.createUI()\r\n\r\n    // æ¸²æŸ“æ€ç»´å¯¼å›¾\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * åˆ›å»ºUI\r\n   */\r\n  private createUI(): void {\r\n    if (!this.container)\r\n      return\r\n\r\n    this.container.innerHTML = `\r\n      <div class=\"mindmap-editor\" style=\"display: flex; flex-direction: column; height: 100%;\">\r\n        <div class=\"mindmap-toolbar\" style=\"\r\n          padding: 10px;\r\n          border-bottom: 1px solid #e0e0e0;\r\n          display: flex;\r\n          gap: 10px;\r\n          align-items: center;\r\n        \">\r\n          <button id=\"addChild\" style=\"\r\n            padding: 6px 12px;\r\n            background: #667eea;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n          \">â• æ·»åŠ å­èŠ‚ç‚¹</button>\r\n          \r\n          <button id=\"addSibling\" style=\"\r\n            padding: 6px 12px;\r\n            background: #667eea;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n          \">â• æ·»åŠ åŒçº§èŠ‚ç‚¹</button>\r\n          \r\n          <button id=\"deleteNode\" style=\"\r\n            padding: 6px 12px;\r\n            background: #f44336;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n          \">ğŸ—‘ï¸ åˆ é™¤èŠ‚ç‚¹</button>\r\n          \r\n          <div style=\"flex: 1;\"></div>\r\n          \r\n          <button id=\"zoomIn\" style=\"padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;\">ğŸ”+</button>\r\n          <button id=\"zoomOut\" style=\"padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;\">ğŸ”-</button>\r\n          <button id=\"resetZoom\" style=\"padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;\">é‡ç½®</button>\r\n        </div>\r\n        \r\n        <div class=\"mindmap-canvas-container\" style=\"\r\n          flex: 1;\r\n          position: relative;\r\n          overflow: hidden;\r\n          background: #f8f9fa;\r\n        \">\r\n          <canvas id=\"mindmapCanvas\" style=\"\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            cursor: grab;\r\n          \"></canvas>\r\n        </div>\r\n        \r\n        <div class=\"mindmap-footer\" style=\"\r\n          padding: 15px;\r\n          border-top: 1px solid #e0e0e0;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 10px;\r\n        \">\r\n          <button id=\"cancel\" style=\"\r\n            padding: 8px 20px;\r\n            background: white;\r\n            border: 1px solid #ddd;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n          \">å–æ¶ˆ</button>\r\n          \r\n          <button id=\"save\" style=\"\r\n            padding: 8px 20px;\r\n            background: #667eea;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n          \">ä¿å­˜</button>\r\n        </div>\r\n      </div>\r\n    `\r\n\r\n    // è®¾ç½®ç”»å¸ƒ\r\n    this.setupCanvas()\r\n\r\n    // ç»‘å®šäº‹ä»¶\r\n    this.bindEvents()\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®ç”»å¸ƒ\r\n   */\r\n  private setupCanvas(): void {\r\n    const canvas = this.container?.querySelector('#mindmapCanvas') as HTMLCanvasElement\r\n    if (!canvas)\r\n      return\r\n\r\n    this.canvas = canvas\r\n    this.ctx = canvas.getContext('2d')!\r\n\r\n    // è®¾ç½®ç”»å¸ƒå¤§å°\r\n    const container = canvas.parentElement!\r\n    canvas.width = container.clientWidth\r\n    canvas.height = container.clientHeight\r\n\r\n    // åˆå§‹åç§»ï¼ˆå±…ä¸­ï¼‰\r\n    this.offsetX = canvas.width / 2\r\n    this.offsetY = canvas.height / 2\r\n  }\r\n\r\n  /**\r\n   * ç»‘å®šäº‹ä»¶\r\n   */\r\n  private bindEvents(): void {\r\n    // å·¥å…·æ æŒ‰é’®\r\n    this.container?.querySelector('#addChild')?.addEventListener('click', () => this.addChildNode())\r\n    this.container?.querySelector('#addSibling')?.addEventListener('click', () => this.addSiblingNode())\r\n    this.container?.querySelector('#deleteNode')?.addEventListener('click', () => this.deleteNode())\r\n    this.container?.querySelector('#zoomIn')?.addEventListener('click', () => this.zoom(1.2))\r\n    this.container?.querySelector('#zoomOut')?.addEventListener('click', () => this.zoom(0.8))\r\n    this.container?.querySelector('#resetZoom')?.addEventListener('click', () => this.resetZoom())\r\n\r\n    // ä¿å­˜å’Œå–æ¶ˆ\r\n    this.container?.querySelector('#save')?.addEventListener('click', () => {\r\n      if (this.onSave && this.data)\r\n        this.onSave(this.data, { width: '100%', height: 400 })\r\n    })\r\n\r\n    this.container?.querySelector('#cancel')?.addEventListener('click', () => {\r\n      this.onCancel?.()\r\n    })\r\n\r\n    // ç”»å¸ƒäº¤äº’\r\n    if (this.canvas) {\r\n      this.canvas.addEventListener('mousedown', e => this.handleMouseDown(e))\r\n      this.canvas.addEventListener('mousemove', e => this.handleMouseMove(e))\r\n      this.canvas.addEventListener('mouseup', () => this.handleMouseUp())\r\n      this.canvas.addEventListener('wheel', e => this.handleWheel(e))\r\n      this.canvas.addEventListener('click', e => this.handleClick(e))\r\n      this.canvas.addEventListener('dblclick', e => this.handleDoubleClick(e))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¸²æŸ“æ€ç»´å¯¼å›¾\r\n   */\r\n  private renderMindMap(): void {\r\n    if (!this.ctx || !this.canvas || !this.data)\r\n      return\r\n\r\n    // æ¸…ç©ºç”»å¸ƒ\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\r\n    // ä¿å­˜çŠ¶æ€\r\n    this.ctx.save()\r\n\r\n    // åº”ç”¨å˜æ¢\r\n    this.ctx.translate(this.offsetX, this.offsetY)\r\n    this.ctx.scale(this.scale, this.scale)\r\n\r\n    // æ¸²æŸ“æ ¹èŠ‚ç‚¹å’Œå­æ ‘\r\n    this.renderNode(this.data.root, 0, 0, true)\r\n\r\n    // æ¢å¤çŠ¶æ€\r\n    this.ctx.restore()\r\n  }\r\n\r\n  /**\r\n   * æ¸²æŸ“èŠ‚ç‚¹\r\n   */\r\n  private renderNode(node: MindMapNode, x: number, y: number, isRoot: boolean = false): { width: number, height: number } {\r\n    if (!this.ctx)\r\n      return { width: 0, height: 0 }\r\n\r\n    const ctx = this.ctx\r\n    const padding = 12\r\n    const fontSize = isRoot ? 18 : 14\r\n    const borderRadius = 6\r\n\r\n    // è®¾ç½®å­—ä½“\r\n    ctx.font = `${node.style?.fontWeight || 'normal'} ${fontSize}px Arial`\r\n    const textWidth = ctx.measureText(node.text).width\r\n    const nodeWidth = textWidth + padding * 2\r\n    const nodeHeight = fontSize + padding * 2\r\n\r\n    // ç»˜åˆ¶èŠ‚ç‚¹èƒŒæ™¯\r\n    const isSelected = this.selectedNode === node\r\n    ctx.fillStyle = node.style?.backgroundColor || (isRoot ? '#667eea' : isSelected ? '#e8f4f8' : '#ffffff')\r\n    ctx.strokeStyle = isSelected ? '#667eea' : '#e0e0e0'\r\n    ctx.lineWidth = isSelected ? 2 : 1\r\n\r\n    this.roundRect(ctx, x - nodeWidth / 2, y - nodeHeight / 2, nodeWidth, nodeHeight, borderRadius)\r\n    ctx.fill()\r\n    ctx.stroke()\r\n\r\n    // ç»˜åˆ¶æ–‡æœ¬\r\n    ctx.fillStyle = node.style?.color || (isRoot ? '#ffffff' : '#333333')\r\n    ctx.textAlign = 'center'\r\n    ctx.textBaseline = 'middle'\r\n    ctx.fillText(node.text, x, y)\r\n\r\n    // ç»˜åˆ¶å­èŠ‚ç‚¹\r\n    if (node.children && node.children.length > 0 && !node.collapsed) {\r\n      const childSpacing = 80\r\n      const levelSpacing = 150\r\n      const totalHeight = (node.children.length - 1) * childSpacing\r\n      const startY = y - totalHeight / 2\r\n\r\n      node.children.forEach((child, index) => {\r\n        const childY = startY + index * childSpacing\r\n        const childX = x + levelSpacing\r\n\r\n        // ç»˜åˆ¶è¿çº¿\r\n        ctx.strokeStyle = '#999999'\r\n        ctx.lineWidth = 1.5\r\n        ctx.beginPath()\r\n        ctx.moveTo(x + nodeWidth / 2, y)\r\n        ctx.bezierCurveTo(\r\n          x + levelSpacing / 2,\r\n          y,\r\n          x + levelSpacing / 2,\r\n          childY,\r\n          childX - nodeWidth / 2,\r\n          childY,\r\n        )\r\n        ctx.stroke()\r\n\r\n        // é€’å½’æ¸²æŸ“å­èŠ‚ç‚¹\r\n        this.renderNode(child, childX, childY, false)\r\n      })\r\n    }\r\n\r\n    // ç»˜åˆ¶æŠ˜å æŒ‡ç¤ºå™¨\r\n    if (node.children && node.children.length > 0) {\r\n      const indicatorX = x + nodeWidth / 2 + 10\r\n      const indicatorY = y\r\n      const indicatorSize = 8\r\n\r\n      ctx.fillStyle = '#667eea'\r\n      ctx.beginPath()\r\n      ctx.arc(indicatorX, indicatorY, indicatorSize / 2, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      ctx.fillStyle = '#ffffff'\r\n      ctx.font = 'bold 10px Arial'\r\n      ctx.textAlign = 'center'\r\n      ctx.textBaseline = 'middle'\r\n      ctx.fillText(node.collapsed ? '+' : '-', indicatorX, indicatorY)\r\n    }\r\n\r\n    return { width: nodeWidth, height: nodeHeight }\r\n  }\r\n\r\n  /**\r\n   * ç»˜åˆ¶åœ†è§’çŸ©å½¢\r\n   */\r\n  private roundRect(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, radius: number): void {\r\n    ctx.beginPath()\r\n    ctx.moveTo(x + radius, y)\r\n    ctx.lineTo(x + width - radius, y)\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius)\r\n    ctx.lineTo(x + width, y + height - radius)\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height)\r\n    ctx.lineTo(x + radius, y + height)\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius)\r\n    ctx.lineTo(x, y + radius)\r\n    ctx.quadraticCurveTo(x, y, x + radius, y)\r\n    ctx.closePath()\r\n  }\r\n\r\n  /**\r\n   * æ·»åŠ å­èŠ‚ç‚¹\r\n   */\r\n  private addChildNode(): void {\r\n    if (!this.selectedNode) {\r\n      alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹')\r\n      return\r\n    }\r\n\r\n    const text = prompt('è¾“å…¥èŠ‚ç‚¹æ–‡æœ¬ï¼š', 'æ–°èŠ‚ç‚¹')\r\n    if (!text)\r\n      return\r\n\r\n    if (!this.selectedNode.children)\r\n      this.selectedNode.children = []\r\n\r\n    this.selectedNode.children.push({\r\n      text,\r\n      children: [],\r\n    })\r\n\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * æ·»åŠ åŒçº§èŠ‚ç‚¹\r\n   */\r\n  private addSiblingNode(): void {\r\n    if (!this.selectedNode || !this.data) {\r\n      alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹')\r\n      return\r\n    }\r\n\r\n    const text = prompt('è¾“å…¥èŠ‚ç‚¹æ–‡æœ¬ï¼š', 'æ–°èŠ‚ç‚¹')\r\n    if (!text)\r\n      return\r\n\r\n    // æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹\r\n    const parent = this.findParentNode(this.data.root, this.selectedNode)\r\n    if (parent && parent.children) {\r\n      const index = parent.children.indexOf(this.selectedNode)\r\n      parent.children.splice(index + 1, 0, {\r\n        text,\r\n        children: [],\r\n      })\r\n      this.renderMindMap()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åˆ é™¤èŠ‚ç‚¹\r\n   */\r\n  private deleteNode(): void {\r\n    if (!this.selectedNode || !this.data) {\r\n      alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹')\r\n      return\r\n    }\r\n\r\n    if (this.selectedNode === this.data.root) {\r\n      alert('ä¸èƒ½åˆ é™¤æ ¹èŠ‚ç‚¹')\r\n      return\r\n    }\r\n\r\n    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹å—ï¼Ÿ'))\r\n      return\r\n\r\n    const parent = this.findParentNode(this.data.root, this.selectedNode)\r\n    if (parent && parent.children) {\r\n      const index = parent.children.indexOf(this.selectedNode)\r\n      parent.children.splice(index, 1)\r\n      this.selectedNode = undefined\r\n      this.renderMindMap()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹\r\n   */\r\n  private findParentNode(current: MindMapNode, target: MindMapNode): MindMapNode | null {\r\n    if (!current.children)\r\n      return null\r\n\r\n    if (current.children.includes(target))\r\n      return current\r\n\r\n    for (const child of current.children) {\r\n      const parent = this.findParentNode(child, target)\r\n      if (parent)\r\n        return parent\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * ç¼©æ”¾\r\n   */\r\n  private zoom(factor: number): void {\r\n    this.scale *= factor\r\n    this.scale = Math.max(0.1, Math.min(3, this.scale))\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * é‡ç½®ç¼©æ”¾\r\n   */\r\n  private resetZoom(): void {\r\n    this.scale = 1\r\n    this.offsetX = this.canvas!.width / 2\r\n    this.offsetY = this.canvas!.height / 2\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†é¼ æ ‡æŒ‰ä¸‹\r\n   */\r\n  private handleMouseDown(e: MouseEvent): void {\r\n    this.isDragging = true\r\n    this.dragStartX = e.offsetX\r\n    this.dragStartY = e.offsetY\r\n    if (this.canvas)\r\n      this.canvas.style.cursor = 'grabbing'\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†é¼ æ ‡ç§»åŠ¨\r\n   */\r\n  private handleMouseMove(e: MouseEvent): void {\r\n    if (!this.isDragging)\r\n      return\r\n\r\n    const dx = e.offsetX - this.dragStartX\r\n    const dy = e.offsetY - this.dragStartY\r\n\r\n    this.offsetX += dx\r\n    this.offsetY += dy\r\n\r\n    this.dragStartX = e.offsetX\r\n    this.dragStartY = e.offsetY\r\n\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†é¼ æ ‡é‡Šæ”¾\r\n   */\r\n  private handleMouseUp(): void {\r\n    this.isDragging = false\r\n    if (this.canvas)\r\n      this.canvas.style.cursor = 'grab'\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†æ»šè½®\r\n   */\r\n  private handleWheel(e: WheelEvent): void {\r\n    e.preventDefault()\r\n    const factor = e.deltaY > 0 ? 0.9 : 1.1\r\n    this.zoom(factor)\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†ç‚¹å‡»\r\n   */\r\n  private handleClick(e: MouseEvent): void {\r\n    if (!this.data)\r\n      return\r\n\r\n    const rect = this.canvas!.getBoundingClientRect()\r\n    const x = (e.clientX - rect.left - this.offsetX) / this.scale\r\n    const y = (e.clientY - rect.top - this.offsetY) / this.scale\r\n\r\n    const clicked = this.findNodeAtPosition(this.data.root, x, y, 0, 0, true)\r\n    this.selectedNode = clicked || undefined\r\n    this.renderMindMap()\r\n  }\r\n\r\n  /**\r\n   * å¤„ç†åŒå‡»\r\n   */\r\n  private handleDoubleClick(e: MouseEvent): void {\r\n    if (!this.selectedNode)\r\n      return\r\n\r\n    const newText = prompt('ç¼–è¾‘èŠ‚ç‚¹æ–‡æœ¬ï¼š', this.selectedNode.text)\r\n    if (newText !== null) {\r\n      this.selectedNode.text = newText\r\n      this.renderMindMap()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹\r\n   */\r\n  private findNodeAtPosition(node: MindMapNode, x: number, y: number, nodeX: number, nodeY: number, isRoot: boolean): MindMapNode | null {\r\n    if (!this.ctx)\r\n      return null\r\n\r\n    const fontSize = isRoot ? 18 : 14\r\n    const padding = 12\r\n    this.ctx.font = `${fontSize}px Arial`\r\n    const textWidth = this.ctx.measureText(node.text).width\r\n    const nodeWidth = textWidth + padding * 2\r\n    const nodeHeight = fontSize + padding * 2\r\n\r\n    // æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨å½“å‰èŠ‚ç‚¹å†…\r\n    if (x >= nodeX - nodeWidth / 2 && x <= nodeX + nodeWidth / 2\r\n      && y >= nodeY - nodeHeight / 2 && y <= nodeY + nodeHeight / 2) \r\n      return node\r\n\r\n\r\n    // æ£€æŸ¥å­èŠ‚ç‚¹\r\n    if (node.children && node.children.length > 0 && !node.collapsed) {\r\n      const childSpacing = 80\r\n      const levelSpacing = 150\r\n      const totalHeight = (node.children.length - 1) * childSpacing\r\n      const startY = nodeY - totalHeight / 2\r\n\r\n      for (let i = 0; i < node.children.length; i++) {\r\n        const child = node.children[i]\r\n        const childY = startY + i * childSpacing\r\n        const childX = nodeX + levelSpacing\r\n\r\n        const found = this.findNodeAtPosition(child, x, y, childX, childY, false)\r\n        if (found)\r\n          return found\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * é”€æ¯ç¼–è¾‘å™¨\r\n   */\r\n  destroy(): void {\r\n    this.container = undefined\r\n    this.data = undefined\r\n    this.selectedNode = undefined\r\n    this.canvas = undefined\r\n    this.ctx = undefined\r\n  }\r\n}\r\n"],"names":["logger","createLogger","MindMapEditor","scale","offsetX","offsetY","isDragging","dragStartX","dragStartY","render","container","options","info","data","JSON","parse","stringify","onSave","onCancel","createUI","renderMindMap","innerHTML","setupCanvas","bindEvents","canvas","querySelector","ctx","getContext","parentElement","width","clientWidth","height","clientHeight","addEventListener","addChildNode","addSiblingNode","deleteNode","zoom","resetZoom","e","handleMouseDown","handleMouseMove","handleMouseUp","handleWheel","handleClick","handleDoubleClick","clearRect","save","translate","renderNode","root","restore","node","x","y","isRoot","padding","fontSize","borderRadius","font","style","fontWeight","textWidth","measureText","text","nodeWidth","nodeHeight","isSelected","selectedNode","fillStyle","backgroundColor","strokeStyle","lineWidth","roundRect","fill","stroke","color","textAlign","textBaseline","fillText","children","length","collapsed","childSpacing","levelSpacing","totalHeight","startY","forEach","child","index","childY","childX","beginPath","moveTo","bezierCurveTo","indicatorX","indicatorY","indicatorSize","arc","Math","PI","radius","lineTo","quadraticCurveTo","closePath","alert","prompt","push","parent","findParentNode","indexOf","splice","confirm","undefined","current","target","includes","factor","max","min","cursor","dx","dy","preventDefault","deltaY","rect","getBoundingClientRect","clientX","left","clientY","top","clicked","findNodeAtPosition","newText","nodeX","nodeY","i","found","destroy"],"mappings":"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"}