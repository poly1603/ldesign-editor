{"version":3,"file":"table-patch.js","sources":["../../../src/plugins/table/table-patch.ts"],"sourcesContent":["/**\r\n * Ë°®Ê†ºÊèí‰ª∂Ë°•‰∏Å - ÊõøÊç¢ÂéüÊúâÁöÑÊèíÂÖ•Ë°®Ê†ºÂäüËÉΩ\r\n * ‰ΩøÁî®Êñ∞ÁöÑÁΩëÊ†ºÈÄâÊã©Âô®Êõø‰ª£ËæìÂÖ•Ê°Ü\r\n */\r\n\r\nimport { showEnhancedTableGridSelector } from '../../ui/TableGridSelector'\r\n\r\n/**\r\n * ÂàõÂª∫Ë°®Ê†ºÂÖÉÁ¥†\r\n */\r\nfunction createTableElement(rows: number, cols: number): HTMLElement {\r\n  const wrapper = document.createElement('div')\r\n  wrapper.className = 'table-wrapper'\r\n  wrapper.style.position = 'relative'\r\n  wrapper.style.display = 'inline-block'\r\n  wrapper.style.margin = '10px 0'\r\n\r\n  const table = document.createElement('table')\r\n  table.style.borderCollapse = 'collapse'\r\n  table.style.width = '100%'\r\n\r\n  // ÂàõÂª∫Ë°®Â§¥\r\n  const thead = document.createElement('thead')\r\n  const headerRow = document.createElement('tr')\r\n  for (let j = 0; j < cols; j++) {\r\n    const th = document.createElement('th')\r\n    th.textContent = `Âàó ${j + 1}`\r\n    th.style.border = '1px solid #ddd'\r\n    th.style.padding = '8px'\r\n    th.style.backgroundColor = '#f5f5f5'\r\n    th.setAttribute('contenteditable', 'true')\r\n    headerRow.appendChild(th)\r\n  }\r\n  thead.appendChild(headerRow)\r\n  table.appendChild(thead)\r\n\r\n  // ÂàõÂª∫Ë°®‰Ωì\r\n  const tbody = document.createElement('tbody')\r\n  for (let i = 0; i < rows; i++) {\r\n    const tr = document.createElement('tr')\r\n    for (let j = 0; j < cols; j++) {\r\n      const td = document.createElement('td')\r\n      td.innerHTML = '&nbsp;'\r\n      td.style.border = '1px solid #ddd'\r\n      td.style.padding = '8px'\r\n      td.setAttribute('contenteditable', 'true')\r\n      tr.appendChild(td)\r\n    }\r\n    tbody.appendChild(tr)\r\n  }\r\n  table.appendChild(tbody)\r\n\r\n  wrapper.appendChild(table)\r\n  return wrapper\r\n}\r\n\r\n// Èò≤Ê≠¢ÈáçÂ§çÊâßË°åÁöÑÊ†áËÆ∞\r\nlet isPatched = false\r\n\r\n/**\r\n * ‰øÆË°•ÂéüÊúâÁöÑË°®Ê†ºÊèíÂÖ•ÂëΩ‰ª§\r\n * Ëøô‰∏™ÂáΩÊï∞‰ºöÂú®È°µÈù¢Âä†ËΩΩÂêéÊõøÊç¢ÂéüÊúâÁöÑÂÆûÁé∞\r\n */\r\nexport function patchTableInsertCommand() {\r\n  // Èò≤Ê≠¢ÈáçÂ§çÊâßË°å\r\n  if (isPatched) return\r\n  \r\n  // Á≠âÂæÖDOMÂä†ËΩΩÂÆåÊàê\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', patchTableInsertCommand, { once: true })\r\n    return\r\n  }\r\n  \r\n  isPatched = true\r\n  console.log('üîß Patching table insert command...')\r\n\r\n  // Êü•ÊâæÊâÄÊúâË°®Ê†ºÁõ∏ÂÖ≥ÁöÑÊåâÈíÆ\r\n  const tableButtons = document.querySelectorAll('[data-name=\"table\"], .toolbar-button[title*=\"Ë°®Ê†º\"], button[title*=\"Ë°®Ê†º\"]')\r\n\r\n  tableButtons.forEach((button) => {\r\n    // ÁßªÈô§ÂéüÊúâÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºàÂÖãÈöÜËäÇÁÇπÁöÑÊñπÂºèÔºâ\r\n    const newButton = button.cloneNode(true) as HTMLElement\r\n    button.parentNode?.replaceChild(newButton, button)\r\n\r\n    // Ê∑ªÂä†Êñ∞ÁöÑÁÇπÂáª‰∫ã‰ª∂\r\n    newButton.addEventListener('click', (e) => {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      console.log('üìä Table button clicked - showing grid selector')\r\n\r\n      // Ëé∑ÂèñÁºñËæëÂô®ÂÜÖÂÆπÂå∫Âüü\r\n      const editorContent = document.querySelector('.ldesign-editor-content') as HTMLElement\r\n      if (!editorContent) {\r\n        console.error('Editor content not found')\r\n        return\r\n      }\r\n\r\n      // ‰øùÂ≠òÂΩìÂâçÈÄâÂå∫\r\n      const selection = window.getSelection()\r\n      let savedRange: Range | null = null\r\n\r\n      if (selection && selection.rangeCount > 0) {\r\n        const range = selection.getRangeAt(0)\r\n        if (editorContent.contains(range.commonAncestorContainer))\r\n          savedRange = range.cloneRange()\r\n      }\r\n\r\n      // ÊòæÁ§∫ÁΩëÊ†ºÈÄâÊã©Âô®\r\n      showEnhancedTableGridSelector({\r\n        button: newButton,\r\n        onSelect: (rows: number, cols: number) => {\r\n          console.log(`Inserting ${rows}√ó${cols} table`)\r\n\r\n          // È™åËØÅÂ∞∫ÂØ∏\r\n          if (rows < 1 || cols < 1 || rows > 50 || cols > 20) {\r\n            console.error('Invalid table size')\r\n            return\r\n          }\r\n\r\n          // ÂàõÂª∫Ë°®Ê†º\r\n          const tableWrapper = createTableElement(rows, cols)\r\n\r\n          // ËÅöÁÑ¶ÁºñËæëÂô®\r\n          editorContent.focus()\r\n\r\n          // ÊèíÂÖ•Ë°®Ê†º\r\n          if (savedRange) {\r\n            const currentSelection = window.getSelection()\r\n            if (currentSelection) {\r\n              currentSelection.removeAllRanges()\r\n              currentSelection.addRange(savedRange)\r\n\r\n              try {\r\n                savedRange.deleteContents()\r\n\r\n                const container = savedRange.commonAncestorContainer\r\n                const parentElement = container.nodeType === Node.TEXT_NODE\r\n                  ? container.parentElement\r\n                  : container as HTMLElement\r\n\r\n                if (parentElement && parentElement.tagName === 'P') {\r\n                  parentElement.insertAdjacentElement('afterend', tableWrapper)\r\n\r\n                  const newP = document.createElement('p')\r\n                  newP.innerHTML = '<br>'\r\n                  tableWrapper.insertAdjacentElement('afterend', newP)\r\n\r\n                  setTimeout(() => {\r\n                    const newRange = document.createRange()\r\n                    newRange.selectNodeContents(newP)\r\n                    newRange.collapse(false)\r\n                    currentSelection.removeAllRanges()\r\n                    currentSelection.addRange(newRange)\r\n                  }, 50)\r\n                }\r\n                else {\r\n                  savedRange.insertNode(tableWrapper)\r\n                }\r\n              }\r\n              catch (error) {\r\n                console.error('Error inserting table:', error)\r\n                editorContent.appendChild(tableWrapper)\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            // ËøΩÂä†Âà∞Êú´Â∞æ\r\n            const lastElement = editorContent.lastElementChild\r\n            if (lastElement && lastElement.tagName === 'P')\r\n              lastElement.insertAdjacentElement('afterend', tableWrapper)\r\n            else\r\n              editorContent.appendChild(tableWrapper)\r\n\r\n            const newP = document.createElement('p')\r\n            newP.innerHTML = '<br>'\r\n            tableWrapper.insertAdjacentElement('afterend', newP)\r\n          }\r\n\r\n          // Ëß¶ÂèëÊõ¥Êñ∞‰∫ã‰ª∂\r\n          const event = new Event('input', { bubbles: true })\r\n          editorContent.dispatchEvent(event)\r\n\r\n          // ÊªöÂä®Âà∞Ë°®Ê†º\r\n          tableWrapper.scrollIntoView({ behavior: 'smooth', block: 'nearest' })\r\n\r\n          console.log('‚úÖ Table inserted successfully')\r\n        },\r\n      })\r\n    })\r\n\r\n    console.log('‚úÖ Patched table button:', newButton)\r\n  })\r\n\r\n  // ÂêåÊó∂Â∞ùËØïÊã¶Êà™ÂëΩ‰ª§Ë∞ÉÁî®\r\n  const originalExecCommand = document.execCommand\r\n  document.execCommand = function (command: string, ...args: any[]) {\r\n    if (command === 'insertTable') {\r\n      console.log('üîß Intercepted insertTable command')\r\n      // Ëß¶ÂèëË°®Ê†ºÊåâÈíÆÁÇπÂáª\r\n      const tableButton = document.querySelector('[data-name=\"table\"]') as HTMLElement\r\n      if (tableButton)\r\n        tableButton.click()\r\n\r\n      return true\r\n    }\r\n    return originalExecCommand.apply(document, [command, ...args] as any)\r\n  }\r\n\r\n  console.log('‚úÖ Table insertion patched successfully')\r\n}\r\n\r\n// Ëá™Âä®Â∫îÁî®Ë°•‰∏Å\r\nif (typeof window !== 'undefined') {\r\n  // Âª∂ËøüÊâßË°åÔºåÁ°Æ‰øùÂÖ∂‰ªñËÑöÊú¨Â∑≤Âä†ËΩΩ\r\n  setTimeout(() => {\r\n    patchTableInsertCommand()\r\n  }, 100)\r\n\r\n  // ÁõëÂê¨Âä®ÊÄÅÂä†ËΩΩÁöÑÂÜÖÂÆπ\r\n  const observer = new MutationObserver((mutations) => {\r\n    for (const mutation of mutations) {\r\n      if (mutation.type === 'childList') {\r\n        const addedNodes = Array.from(mutation.addedNodes)\r\n        const hasTableButton = addedNodes.some((node) => {\r\n          if (node.nodeType === Node.ELEMENT_NODE) {\r\n            const element = node as HTMLElement\r\n            return element.matches('[data-name=\"table\"]')\r\n              || element.querySelector('[data-name=\"table\"]')\r\n          }\r\n          return false\r\n        })\r\n\r\n        if (hasTableButton)\r\n          setTimeout(() => patchTableInsertCommand(), 100)\r\n      }\r\n    }\r\n  })\r\n\r\n  observer.observe(document.body, {\r\n    childList: true,\r\n    subtree: true,\r\n  })\r\n}\r\n"],"names":["createTableElement","rows","cols","wrapper","document","createElement","className","style","position","display","margin","table","borderCollapse","width","thead","headerRow","j","th","textContent","border","padding","backgroundColor","setAttribute","appendChild","tbody","i","tr","td","innerHTML","isPatched","patchTableInsertCommand","readyState","addEventListener","once","console","log","tableButtons","querySelectorAll","forEach","button","newButton","cloneNode","parentNode","replaceChild","e","preventDefault","stopPropagation","editorContent","querySelector","error","selection","window","getSelection","savedRange","rangeCount","range","getRangeAt","contains","commonAncestorContainer","cloneRange","showEnhancedTableGridSelector","onSelect","tableWrapper","focus","currentSelection","removeAllRanges","addRange","deleteContents","container","parentElement","nodeType","Node","TEXT_NODE","tagName","insertAdjacentElement","newP","setTimeout","newRange","createRange","selectNodeContents","collapse","insertNode","lastElement","lastElementChild","event","Event","bubbles","dispatchEvent","scrollIntoView","behavior","block","originalExecCommand","execCommand","command","args","tableButton","click","apply","observer","MutationObserver","mutations","mutation","type","addedNodes","Array","from","hasTableButton","some","node","ELEMENT_NODE","element","matches","observe","body","childList","subtree"],"mappings":"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"}