{"version":3,"file":"find-replace.js","sources":["../../../src/plugins/utils/find-replace.ts"],"sourcesContent":["/**\r\n * Êü•ÊâæÊõøÊç¢Êèí‰ª∂\r\n */\r\n\r\nimport type { Command, Plugin } from '../../types'\r\nimport { createPlugin } from '../../core/Plugin'\r\n\r\n/**\r\n * Êü•ÊâæÊñáÊú¨ÈÄâÈ°π\r\n */\r\nexport interface SearchOptions {\r\n  caseSensitive?: boolean\r\n  wholeWord?: boolean\r\n  useRegex?: boolean\r\n  fuzzySearch?: boolean\r\n}\r\n\r\n/**\r\n * Êü•ÊâæÊñáÊú¨\r\n */\r\nfunction findText(editorElement: HTMLElement, searchText: string, options: SearchOptions = {}): number {\r\n  if (!searchText)\r\n    return 0\r\n\r\n  // Ê∏ÖÈô§‰πãÂâçÁöÑÈ´ò‰∫Æ\r\n  clearHighlights(editorElement)\r\n\r\n  const content = editorElement.textContent || ''\r\n  let pattern: RegExp\r\n\r\n  try {\r\n    if (options.fuzzySearch) {\r\n      // Ê®°Á≥äÊêúÁ¥¢ÔºöÂ∞ÜÊêúÁ¥¢ÊñáÊú¨ËΩ¨Êç¢‰∏∫ÂÖÅËÆ∏Â≠óÁ¨¶Èó¥ÊúâÂÖ∂‰ªñÂ≠óÁ¨¶ÁöÑÊ®°Âºè\r\n      const fuzzyPattern = searchText\r\n        .split('')\r\n        .map(char => char.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'))\r\n        .join('.*?')\r\n      pattern = new RegExp(fuzzyPattern, options.caseSensitive ? 'g' : 'gi')\r\n    }\r\n    else if (options.useRegex) {\r\n      pattern = new RegExp(searchText, options.caseSensitive ? 'g' : 'gi')\r\n    }\r\n    else {\r\n      const escapedText = searchText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\r\n      const wordBoundary = options.wholeWord ? '\\\\b' : ''\r\n      pattern = new RegExp(\r\n        `${wordBoundary}${escapedText}${wordBoundary}`,\r\n        options.caseSensitive ? 'g' : 'gi',\r\n      )\r\n    }\r\n  }\r\n  catch (e) {\r\n    console.error('Invalid regex pattern:', e)\r\n    return 0\r\n  }\r\n\r\n  let count = 0\r\n  const walker = document.createTreeWalker(\r\n    editorElement,\r\n    NodeFilter.SHOW_TEXT,\r\n    null,\r\n  )\r\n\r\n  const nodesToProcess: { node: Text, matches: RegExpMatchArray[] }[] = []\r\n\r\n  // Êî∂ÈõÜÊâÄÊúâÂåπÈÖçÁöÑÊñáÊú¨ËäÇÁÇπ\r\n  while (walker.nextNode()) {\r\n    const node = walker.currentNode as Text\r\n    const text = node.textContent || ''\r\n    const matches: RegExpMatchArray[] = []\r\n    let match: RegExpExecArray | null\r\n\r\n    pattern.lastIndex = 0\r\n    while ((match = pattern.exec(text)) !== null) {\r\n      matches.push([...match] as RegExpMatchArray)\r\n      if (!pattern.global)\r\n        break\r\n    }\r\n\r\n    if (matches.length > 0) {\r\n      nodesToProcess.push({ node, matches })\r\n      count += matches.length\r\n    }\r\n  }\r\n\r\n  // È´ò‰∫ÆÊâÄÊúâÂåπÈÖç\r\n  nodesToProcess.forEach(({ node, matches }) => {\r\n    highlightMatches(node, matches, pattern)\r\n  })\r\n\r\n  // ÊªöÂä®Âà∞Á¨¨‰∏Ä‰∏™ÂåπÈÖç\r\n  const firstHighlight = editorElement.querySelector('.editor-highlight')\r\n  if (firstHighlight) {\r\n    firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n    firstHighlight.classList.add('editor-highlight-active')\r\n  }\r\n\r\n  return count\r\n}\r\n\r\n/**\r\n * È´ò‰∫ÆÂåπÈÖçÁöÑÊñáÊú¨\r\n */\r\nfunction highlightMatches(node: Text, matches: RegExpMatchArray[], pattern: RegExp): void {\r\n  const parent = node.parentNode\r\n  if (!parent)\r\n    return\r\n\r\n  const text = node.textContent || ''\r\n  const fragments: Node[] = []\r\n  let lastIndex = 0\r\n\r\n  // ÊåâÂåπÈÖç‰ΩçÁΩÆÊéíÂ∫è\r\n  matches.sort((a, b) => (a.index || 0) - (b.index || 0))\r\n\r\n  matches.forEach((match) => {\r\n    const matchIndex = match.index || 0\r\n    const matchText = match[0]\r\n\r\n    // Ê∑ªÂä†ÂåπÈÖçÂâçÁöÑÊñáÊú¨\r\n    if (matchIndex > lastIndex)\r\n      fragments.push(document.createTextNode(text.slice(lastIndex, matchIndex)))\r\n\r\n    // Ê∑ªÂä†È´ò‰∫ÆÁöÑÂåπÈÖçÊñáÊú¨\r\n    const span = document.createElement('span')\r\n    span.className = 'editor-highlight'\r\n    span.textContent = matchText\r\n    fragments.push(span)\r\n\r\n    lastIndex = matchIndex + matchText.length\r\n  })\r\n\r\n  // Ê∑ªÂä†Ââ©‰ΩôÊñáÊú¨\r\n  if (lastIndex < text.length)\r\n    fragments.push(document.createTextNode(text.slice(lastIndex)))\r\n\r\n  // ÊõøÊç¢ÂéüËäÇÁÇπ\r\n  fragments.forEach((fragment) => {\r\n    parent.insertBefore(fragment, node)\r\n  })\r\n  parent.removeChild(node)\r\n}\r\n\r\n/**\r\n * ÊõøÊç¢ÊñáÊú¨\r\n */\r\nfunction replaceText(\r\n  editorElement: HTMLElement,\r\n  searchText: string,\r\n  replaceText: string,\r\n  options: SearchOptions = {},\r\n): number {\r\n  if (!searchText)\r\n    return 0\r\n\r\n  let count = 0\r\n  const selection = window.getSelection()\r\n\r\n  // ‰øùÂ≠òÈÄâÂå∫\r\n  const savedSelection = selection && selection.rangeCount > 0\r\n    ? selection.getRangeAt(0).cloneRange()\r\n    : null\r\n\r\n  // ÊâßË°åÊõøÊç¢\r\n  const walker = document.createTreeWalker(\r\n    editorElement,\r\n    NodeFilter.SHOW_TEXT,\r\n    null,\r\n  )\r\n\r\n  while (walker.nextNode()) {\r\n    const node = walker.currentNode as Text\r\n    const text = node.textContent || ''\r\n    let replaced = false\r\n\r\n    if (options.useRegex) {\r\n      const pattern = new RegExp(\r\n        searchText,\r\n        options.caseSensitive ? 'g' : 'gi',\r\n      )\r\n      const newText = text.replace(pattern, replaceText)\r\n      if (newText !== text) {\r\n        node.textContent = newText\r\n        replaced = true\r\n        count++\r\n      }\r\n    }\r\n    else {\r\n      const escapedText = searchText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\r\n      const wordBoundary = options.wholeWord ? '\\\\b' : ''\r\n      const pattern = new RegExp(\r\n        `${wordBoundary}${escapedText}${wordBoundary}`,\r\n        options.caseSensitive ? 'g' : 'gi',\r\n      )\r\n      const newText = text.replace(pattern, replaceText)\r\n      if (newText !== text) {\r\n        node.textContent = newText\r\n        replaced = true\r\n        count++\r\n      }\r\n    }\r\n  }\r\n\r\n  // ÊÅ¢Â§çÈÄâÂå∫\r\n  if (savedSelection && selection) {\r\n    selection.removeAllRanges()\r\n    selection.addRange(savedSelection)\r\n  }\r\n\r\n  // Ê∏ÖÈô§È´ò‰∫Æ\r\n  clearHighlights(editorElement)\r\n\r\n  return count\r\n}\r\n\r\n/**\r\n * ÊõøÊç¢ÊâÄÊúâÊñáÊú¨\r\n */\r\nfunction replaceAll(\r\n  editorElement: HTMLElement,\r\n  searchText: string,\r\n  replaceText: string,\r\n  options: SearchOptions = {},\r\n): number {\r\n  return replaceText(editorElement, searchText, replaceText, {\r\n    ...options,\r\n    useRegex: options.useRegex,\r\n  })\r\n}\r\n\r\n/**\r\n * Ê∏ÖÈô§È´ò‰∫Æ\r\n */\r\nfunction clearHighlights(editorElement: HTMLElement): void {\r\n  const highlights = editorElement.querySelectorAll('.editor-highlight')\r\n  highlights.forEach((highlight) => {\r\n    const parent = highlight.parentNode\r\n    if (!parent)\r\n      return\r\n\r\n    const text = highlight.textContent || ''\r\n    const textNode = document.createTextNode(text)\r\n    parent.insertBefore(textNode, highlight)\r\n    parent.removeChild(highlight)\r\n  })\r\n}\r\n\r\n/**\r\n * ÊòæÁ§∫Êü•ÊâæÊõøÊç¢ÂØπËØùÊ°Ü - Êó†ÈÅÆÁΩ©ÂèØÊãñÊãΩÁâàÊú¨\r\n */\r\nexport function showFindReplaceDialog(editor: any): void {\r\n  // Â¶ÇÊûúÂØπËØùÊ°ÜÂ∑≤Â≠òÂú®ÔºåÂÖàÁßªÈô§\r\n  const existingDialog = document.querySelector('.find-replace-dialog')\r\n  if (existingDialog)\r\n    document.body.removeChild(existingDialog)\r\n\r\n  // Ëé∑ÂèñÁºñËæëÂô®ÂÖÉÁ¥†\r\n  const editorElement = editor.contentElement || editor.getElement()\r\n  clearHighlights(editorElement)\r\n\r\n  // ÂàõÂª∫ÂØπËØùÊ°ÜÂÆπÂô® - Êó†ÈÅÆÁΩ©ÔºåÂèØÊãñÊãΩ\r\n  const dialog = document.createElement('div')\r\n  dialog.className = 'find-replace-dialog'\r\n  dialog.style.cssText = `\r\n    position: fixed;\r\n    top: 60px;\r\n    right: 20px;\r\n    background: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 16px rgba(0,0,0,0.15);\r\n    z-index: 1000;\r\n    min-width: 400px;\r\n    font-family: system-ui, -apple-system, sans-serif;\r\n  `\r\n\r\n  // ÊãñÊãΩÂäüËÉΩÂèòÈáè\r\n  let isDragging = false\r\n  let dragStartX = 0\r\n  let dragStartY = 0\r\n  let dialogStartX = 0\r\n  let dialogStartY = 0\r\n\r\n  // ÊãñÊãΩ‰∫ã‰ª∂Â§ÑÁêÜ\r\n  const startDrag = (e: MouseEvent) => {\r\n    isDragging = true\r\n    dragStartX = e.clientX\r\n    dragStartY = e.clientY\r\n    const rect = dialog.getBoundingClientRect()\r\n    dialogStartX = rect.left\r\n    dialogStartY = rect.top\r\n    dialog.style.cursor = 'grabbing'\r\n    e.preventDefault()\r\n  }\r\n\r\n  const onDrag = (e: MouseEvent) => {\r\n    if (!isDragging)\r\n      return\r\n    const deltaX = e.clientX - dragStartX\r\n    const deltaY = e.clientY - dragStartY\r\n    dialog.style.left = `${dialogStartX + deltaX}px`\r\n    dialog.style.top = `${dialogStartY + deltaY}px`\r\n    dialog.style.right = 'auto'\r\n  }\r\n\r\n  const stopDrag = () => {\r\n    if (isDragging) {\r\n      isDragging = false\r\n      dialog.style.cursor = 'move'\r\n    }\r\n  }\r\n\r\n  // Ê∏ÖÁêÜÂáΩÊï∞\r\n  const cleanup = () => {\r\n    document.body.removeChild(dialog)\r\n    document.removeEventListener('mousemove', onDrag)\r\n    document.removeEventListener('mouseup', stopDrag)\r\n    clearHighlights(editorElement)\r\n  }\r\n\r\n  // Ê†áÈ¢òÊ†èÔºàÂèØÊãñÊãΩÂå∫ÂüüÔºâ\r\n  const titleBar = document.createElement('div')\r\n  titleBar.innerHTML = `\r\n    <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb; cursor: move; user-select: none;\">\r\n      <h3 style=\"margin: 0; font-size: 16px; font-weight: 600;\">üîç Êü•ÊâæÂíåÊõøÊç¢</h3>\r\n      <button class=\"close-btn\" style=\"border: none; background: none; font-size: 20px; cursor: pointer; padding: 0; width: 24px; height: 24px; color: #666;\">&times;</button>\r\n    </div>\r\n  `\r\n  dialog.appendChild(titleBar)\r\n\r\n  // ÁªëÂÆöÊãñÊãΩ\r\n  const title = titleBar.querySelector('h3')!\r\n  title.addEventListener('mousedown', startDrag)\r\n  titleBar.addEventListener('mousedown', (e) => {\r\n    if (e.target === titleBar || e.target === title)\r\n      startDrag(e)\r\n  })\r\n  document.addEventListener('mousemove', onDrag)\r\n  document.addEventListener('mouseup', stopDrag)\r\n\r\n  // ÂÖ≥Èó≠ÊåâÈíÆ\r\n  titleBar.querySelector('.close-btn')!.addEventListener('click', cleanup)\r\n\r\n  // ÂàõÂª∫Êü•ÊâæËæìÂÖ•Ê°Ü\r\n  const findInput = document.createElement('input')\r\n  findInput.type = 'text'\r\n  findInput.placeholder = 'Êü•Êâæ...'\r\n  findInput.style.cssText = `\r\n    width: 100%;\r\n    padding: 8px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n  `\r\n\r\n  // ÂÆûÊó∂È´ò‰∫Æ - ËæìÂÖ•Êó∂Ëá™Âä®Êü•Êâæ\r\n  findInput.addEventListener('input', () => {\r\n    if (findInput.value) {\r\n      findText(editorElement, findInput.value, {\r\n        caseSensitive: caseSensitive.checkbox.checked,\r\n        wholeWord: wholeWord.checkbox.checked,\r\n        useRegex: useRegex.checkbox.checked,\r\n      })\r\n    }\r\n    else {\r\n      clearHighlights(editorElement)\r\n    }\r\n  })\r\n\r\n  // ÂàõÂª∫ÊõøÊç¢ËæìÂÖ•Ê°Ü\r\n  const replaceInput = document.createElement('input')\r\n  replaceInput.type = 'text'\r\n  replaceInput.placeholder = 'ÊõøÊç¢‰∏∫...'\r\n  replaceInput.style.cssText = `\r\n    width: 100%;\r\n    padding: 8px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n  `\r\n\r\n  // ÂàõÂª∫ÈÄâÈ°πÂ§çÈÄâÊ°Ü\r\n  const options = document.createElement('div')\r\n  options.style.marginBottom = '10px'\r\n\r\n  const caseSensitive = createCheckbox('Âå∫ÂàÜÂ§ßÂ∞èÂÜô')\r\n  const wholeWord = createCheckbox('ÂÖ®ËØçÂåπÈÖç')\r\n  const useRegex = createCheckbox('‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè')\r\n\r\n  options.appendChild(caseSensitive.container)\r\n  options.appendChild(wholeWord.container)\r\n  options.appendChild(useRegex.container)\r\n\r\n  // ÂàõÂª∫ÊåâÈíÆÁªÑ\r\n  const buttons = document.createElement('div')\r\n  buttons.style.cssText = `\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 10px;\r\n  `\r\n\r\n  const findButton = createButton('Êü•Êâæ', () => {\r\n    const count = findText(editor.getElement(), findInput.value, {\r\n      caseSensitive: caseSensitive.checkbox.checked,\r\n      wholeWord: wholeWord.checkbox.checked,\r\n      useRegex: useRegex.checkbox.checked,\r\n    })\r\n    alert(`ÊâæÂà∞ ${count} ‰∏™ÂåπÈÖçÈ°π`)\r\n  })\r\n\r\n  const replaceButton = createButton('ÊõøÊç¢', () => {\r\n    const count = replaceText(editor.getElement(), findInput.value, replaceInput.value, {\r\n      caseSensitive: caseSensitive.checkbox.checked,\r\n      wholeWord: wholeWord.checkbox.checked,\r\n      useRegex: useRegex.checkbox.checked,\r\n    })\r\n    alert(`ÊõøÊç¢‰∫Ü ${count} Â§Ñ`)\r\n  })\r\n\r\n  const replaceAllButton = createButton('ÂÖ®ÈÉ®ÊõøÊç¢', () => {\r\n    const count = replaceAll(editor.getElement(), findInput.value, replaceInput.value, {\r\n      caseSensitive: caseSensitive.checkbox.checked,\r\n      wholeWord: wholeWord.checkbox.checked,\r\n      useRegex: useRegex.checkbox.checked,\r\n    })\r\n    alert(`ÊõøÊç¢‰∫Ü ${count} Â§Ñ`)\r\n  })\r\n\r\n  const closeButton = createButton('ÂÖ≥Èó≠', cleanup)\r\n\r\n  buttons.appendChild(findButton)\r\n  buttons.appendChild(replaceButton)\r\n  buttons.appendChild(replaceAllButton)\r\n  buttons.appendChild(closeButton)\r\n\r\n  // ÁªÑË£ÖÂØπËØùÊ°Ü\r\n  dialog.appendChild(findInput)\r\n  dialog.appendChild(replaceInput)\r\n  dialog.appendChild(options)\r\n  dialog.appendChild(buttons)\r\n\r\n  // Ê∑ªÂä†Âà∞È°µÈù¢\r\n  document.body.appendChild(dialog)\r\n\r\n  // ËÅöÁÑ¶Âà∞Êü•ÊâæËæìÂÖ•Ê°Ü\r\n  findInput.focus()\r\n\r\n  // ESC ÈîÆÂÖ≥Èó≠\r\n  dialog.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape')\r\n      cleanup()\r\n  })\r\n}\r\n\r\n/**\r\n * ÂàõÂª∫Â§çÈÄâÊ°Ü\r\n */\r\nfunction createCheckbox(label: string): { container: HTMLElement, checkbox: HTMLInputElement } {\r\n  const container = document.createElement('label')\r\n  container.style.cssText = `\r\n    display: inline-block;\r\n    margin-right: 15px;\r\n    cursor: pointer;\r\n  `\r\n\r\n  const checkbox = document.createElement('input')\r\n  checkbox.type = 'checkbox'\r\n  checkbox.style.marginRight = '5px'\r\n\r\n  const text = document.createElement('span')\r\n  text.textContent = label\r\n\r\n  container.appendChild(checkbox)\r\n  container.appendChild(text)\r\n\r\n  return { container, checkbox }\r\n}\r\n\r\n/**\r\n * ÂàõÂª∫ÊåâÈíÆ\r\n */\r\nfunction createButton(text: string, onClick: () => void): HTMLButtonElement {\r\n  const button = document.createElement('button')\r\n  button.textContent = text\r\n  button.style.cssText = `\r\n    padding: 8px 16px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    background: white;\r\n    cursor: pointer;\r\n  `\r\n  button.addEventListener('click', onClick)\r\n  return button\r\n}\r\n\r\n/**\r\n * Êü•ÊâæÂëΩ‰ª§\r\n */\r\nconst findCommand: Command = {\r\n  id: 'find',\r\n  name: 'Êü•Êâæ',\r\n  execute: (editor) => {\r\n    showFindReplaceDialog(editor)\r\n  },\r\n}\r\n\r\n/**\r\n * ÊõøÊç¢ÂëΩ‰ª§\r\n */\r\nconst replaceCommand: Command = {\r\n  id: 'replace',\r\n  name: 'ÊõøÊç¢',\r\n  execute: (editor) => {\r\n    showFindReplaceDialog(editor)\r\n  },\r\n}\r\n\r\n/**\r\n * ÂàõÂª∫Êü•ÊâæÊõøÊç¢Êèí‰ª∂\r\n */\r\nexport const FindReplacePlugin: Plugin = createPlugin({\r\n  name: 'find-replace',\r\n  version: '1.0.0',\r\n  description: 'Êü•ÊâæÂíåÊõøÊç¢ÊñáÊú¨',\r\n  author: 'LDesign Team',\r\n\r\n  install(editor) {\r\n    // Ê≥®ÂÜåÂëΩ‰ª§\r\n    editor.commands.register(findCommand)\r\n    editor.commands.register(replaceCommand)\r\n\r\n    // Ê∑ªÂä†Ê†∑Âºè\r\n    const style = document.createElement('style')\r\n    style.textContent = `\r\n      .editor-highlight {\r\n        background-color: #ffeb3b;\r\n        color: inherit;\r\n      }\r\n      .editor-highlight-active {\r\n        background-color: #ff9800;\r\n        color: white;\r\n      }\r\n    `\r\n    document.head.appendChild(style)\r\n\r\n    // Âø´Êç∑ÈîÆ\r\n    document.addEventListener('keydown', (e) => {\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'f') {\r\n        e.preventDefault()\r\n        showFindReplaceDialog(editor)\r\n      }\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'h') {\r\n        e.preventDefault()\r\n        showFindReplaceDialog(editor)\r\n      }\r\n    })\r\n  },\r\n\r\n  destroy() {\r\n    // Ê∏ÖÁêÜËµÑÊ∫ê\r\n  },\r\n})\r\n\r\nexport default FindReplacePlugin\r\n"],"names":["findText","editorElement","searchText","options","clearHighlights","textContent","pattern","fuzzySearch","fuzzyPattern","split","map","char","replace","join","RegExp","caseSensitive","useRegex","escapedText","wordBoundary","wholeWord","e","console","error","count","walker","document","createTreeWalker","NodeFilter","SHOW_TEXT","nodesToProcess","nextNode","node","currentNode","text","matches","match","lastIndex","exec","push","global","length","forEach","highlightMatches","firstHighlight","querySelector","scrollIntoView","behavior","block","classList","add","parent","parentNode","fragments","sort","a","b","index","matchIndex","matchText","createTextNode","slice","span","createElement","className","fragment","insertBefore","removeChild","replaceText","selection","window","getSelection","savedSelection","rangeCount","getRangeAt","cloneRange","newText","removeAllRanges","addRange","replaceAll","highlights","querySelectorAll","highlight","textNode","showFindReplaceDialog","editor","existingDialog","body","contentElement","getElement","dialog","style","cssText","isDragging","dragStartX","dragStartY","dialogStartX","dialogStartY","startDrag","clientX","clientY","rect","getBoundingClientRect","left","top","cursor","preventDefault","onDrag","deltaX","deltaY","right","stopDrag","cleanup","removeEventListener","titleBar","innerHTML","appendChild","title","addEventListener","target","findInput","type","placeholder","value","checkbox","checked","replaceInput","marginBottom","createCheckbox","container","buttons","findButton","createButton","alert","replaceButton","replaceAllButton","closeButton","focus","key","label","marginRight","onClick","button","findCommand","id","name","execute","replaceCommand","FindReplacePlugin","createPlugin","version","description","author","install","commands","register","head","ctrlKey","metaKey","destroy"],"mappings":"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"}