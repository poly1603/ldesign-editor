{"version":3,"file":"dom.js","sources":["../../src/utils/dom.ts"],"sourcesContent":["/**\r\n * DOM 操作工具函数\r\n */\r\n\r\nexport interface ElementConfig {\r\n  tag?: string\r\n  className?: string\r\n  id?: string\r\n  style?: Partial<CSSStyleDeclaration>\r\n  attrs?: Record<string, string>\r\n  children?: (HTMLElement | string)[]\r\n  html?: string\r\n  text?: string\r\n  parent?: HTMLElement\r\n}\r\n\r\n/**\r\n * 创建元素\r\n */\r\nexport function createElement(config: ElementConfig): HTMLElement {\r\n  const {\r\n    tag = 'div',\r\n    className,\r\n    id,\r\n    style,\r\n    attrs,\r\n    children,\r\n    html,\r\n    text,\r\n    parent,\r\n  } = config\r\n\r\n  const element = document.createElement(tag)\r\n\r\n  if (className)\r\n    element.className = className\r\n\r\n  if (id)\r\n    element.id = id\r\n\r\n  if (style)\r\n    applyStyles(element, style)\r\n\r\n  if (attrs) {\r\n    Object.entries(attrs).forEach(([key, value]) => {\r\n      element.setAttribute(key, value)\r\n    })\r\n  }\r\n\r\n  if (html) {\r\n    element.innerHTML = html\r\n  }\r\n  else if (text) {\r\n    element.textContent = text\r\n  }\r\n  else if (children) {\r\n    children.forEach((child) => {\r\n      if (typeof child === 'string')\r\n        element.appendChild(document.createTextNode(child))\r\n      else\r\n        element.appendChild(child)\r\n    })\r\n  }\r\n\r\n  if (parent)\r\n    parent.appendChild(element)\r\n\r\n  return element\r\n}\r\n\r\n/**\r\n * 应用样式\r\n */\r\nexport function applyStyles(element: HTMLElement, styles: Partial<CSSStyleDeclaration>): void {\r\n  Object.assign(element.style, styles)\r\n}\r\n\r\n/**\r\n * 添加类名\r\n */\r\nexport function addClass(element: HTMLElement, ...classNames: string[]): void {\r\n  element.classList.add(...classNames)\r\n}\r\n\r\n/**\r\n * 移除类名\r\n */\r\nexport function removeClass(element: HTMLElement, ...classNames: string[]): void {\r\n  element.classList.remove(...classNames)\r\n}\r\n\r\n/**\r\n * 切换类名\r\n */\r\nexport function toggleClass(element: HTMLElement, className: string, force?: boolean): boolean {\r\n  return element.classList.toggle(className, force)\r\n}\r\n\r\n/**\r\n * 检查是否有类名\r\n */\r\nexport function hasClass(element: HTMLElement, className: string): boolean {\r\n  return element.classList.contains(className)\r\n}\r\n\r\n/**\r\n * 移除元素\r\n */\r\nexport function removeElement(element: HTMLElement): void {\r\n  element.parentNode?.removeChild(element)\r\n}\r\n\r\n/**\r\n * 清空元素内容\r\n */\r\nexport function clearElement(element: HTMLElement): void {\r\n  element.innerHTML = ''\r\n}\r\n\r\n/**\r\n * 替换元素\r\n */\r\nexport function replaceElement(oldElement: HTMLElement, newElement: HTMLElement): void {\r\n  oldElement.parentNode?.replaceChild(newElement, oldElement)\r\n}\r\n\r\n/**\r\n * 插入元素到指定位置\r\n */\r\nexport function insertElement(\r\n  element: HTMLElement,\r\n  target: HTMLElement,\r\n  position: 'before' | 'after' | 'prepend' | 'append' = 'append',\r\n): void {\r\n  switch (position) {\r\n    case 'before':\r\n      target.parentNode?.insertBefore(element, target)\r\n      break\r\n    case 'after':\r\n      target.parentNode?.insertBefore(element, target.nextSibling)\r\n      break\r\n    case 'prepend':\r\n      target.insertBefore(element, target.firstChild)\r\n      break\r\n    case 'append':\r\n      target.appendChild(element)\r\n      break\r\n  }\r\n}\r\n\r\n/**\r\n * 查询元素\r\n */\r\nexport function query<T extends HTMLElement = HTMLElement>(\r\n  selector: string,\r\n  parent: HTMLElement | Document = document,\r\n): T | null {\r\n  return parent.querySelector<T>(selector)\r\n}\r\n\r\n/**\r\n * 查询所有元素\r\n */\r\nexport function queryAll<T extends HTMLElement = HTMLElement>(\r\n  selector: string,\r\n  parent: HTMLElement | Document = document,\r\n): T[] {\r\n  return Array.from(parent.querySelectorAll<T>(selector))\r\n}\r\n\r\n/**\r\n * 获取元素的最近父元素\r\n */\r\nexport function closest<T extends HTMLElement = HTMLElement>(\r\n  element: HTMLElement,\r\n  selector: string,\r\n): T | null {\r\n  return element.closest<T>(selector)\r\n}\r\n\r\n/**\r\n * 检查元素是否匹配选择器\r\n */\r\nexport function matches(element: HTMLElement, selector: string): boolean {\r\n  return element.matches(selector)\r\n}\r\n\r\n/**\r\n * 获取元素的兄弟元素\r\n */\r\nexport function getSiblings(element: HTMLElement): HTMLElement[] {\r\n  const parent = element.parentNode\r\n  if (!parent)\r\n    return []\r\n\r\n  return Array.from(parent.children).filter(child => child !== element) as HTMLElement[]\r\n}\r\n\r\n/**\r\n * 获取元素的索引\r\n */\r\nexport function getIndex(element: HTMLElement): number {\r\n  const parent = element.parentNode\r\n  if (!parent)\r\n    return -1\r\n\r\n  return Array.from(parent.children).indexOf(element)\r\n}\r\n\r\n/**\r\n * 显示元素\r\n */\r\nexport function show(element: HTMLElement): void {\r\n  element.style.display = ''\r\n}\r\n\r\n/**\r\n * 隐藏元素\r\n */\r\nexport function hide(element: HTMLElement): void {\r\n  element.style.display = 'none'\r\n}\r\n\r\n/**\r\n * 切换显示状态\r\n */\r\nexport function toggle(element: HTMLElement, force?: boolean): void {\r\n  if (force === undefined)\r\n    element.style.display = element.style.display === 'none' ? '' : 'none'\r\n  else\r\n    element.style.display = force ? '' : 'none'\r\n}\r\n\r\n/**\r\n * 检查元素是否可见\r\n */\r\nexport function isVisible(element: HTMLElement): boolean {\r\n  return element.offsetParent !== null && element.style.display !== 'none'\r\n}\r\n\r\n/**\r\n * 获取元素的文本内容\r\n */\r\nexport function getText(element: HTMLElement): string {\r\n  return element.textContent || ''\r\n}\r\n\r\n/**\r\n * 设置元素的文本内容\r\n */\r\nexport function setText(element: HTMLElement, text: string): void {\r\n  element.textContent = text\r\n}\r\n\r\n/**\r\n * 获取元素的HTML内容\r\n */\r\nexport function getHTML(element: HTMLElement): string {\r\n  return element.innerHTML\r\n}\r\n\r\n/**\r\n * 设置元素的HTML内容\r\n */\r\nexport function setHTML(element: HTMLElement, html: string): void {\r\n  element.innerHTML = html\r\n}\r\n\r\n/**\r\n * 获取元素属性\r\n */\r\nexport function getAttr(element: HTMLElement, name: string): string | null {\r\n  return element.getAttribute(name)\r\n}\r\n\r\n/**\r\n * 设置元素属性\r\n */\r\nexport function setAttr(element: HTMLElement, name: string, value: string): void {\r\n  element.setAttribute(name, value)\r\n}\r\n\r\n/**\r\n * 移除元素属性\r\n */\r\nexport function removeAttr(element: HTMLElement, name: string): void {\r\n  element.removeAttribute(name)\r\n}\r\n\r\n/**\r\n * 检查元素是否有属性\r\n */\r\nexport function hasAttr(element: HTMLElement, name: string): boolean {\r\n  return element.hasAttribute(name)\r\n}\r\n\r\n/**\r\n * 获取或设置元素数据\r\n */\r\nexport function data(element: HTMLElement, key: string, value?: any): any {\r\n  if (value === undefined) {\r\n    const data = element.dataset[key]\r\n    try {\r\n      return JSON.parse(data || '')\r\n    }\r\n    catch {\r\n      return data\r\n    }\r\n  }\r\n  else {\r\n    element.dataset[key] = typeof value === 'string' ? value : JSON.stringify(value)\r\n  }\r\n}\r\n\r\n/**\r\n * 包装元素\r\n */\r\nexport function wrap(element: HTMLElement, wrapper: HTMLElement): void {\r\n  element.parentNode?.insertBefore(wrapper, element)\r\n  wrapper.appendChild(element)\r\n}\r\n\r\n/**\r\n * 解包元素\r\n */\r\nexport function unwrap(element: HTMLElement): void {\r\n  const parent = element.parentNode\r\n  if (!parent || parent === document.body)\r\n    return\r\n\r\n  const grandParent = parent.parentNode\r\n  if (!grandParent)\r\n    return\r\n\r\n  while (parent.firstChild)\r\n    grandParent.insertBefore(parent.firstChild, parent)\r\n\r\n  grandParent.removeChild(parent)\r\n}\r\n\r\n/**\r\n * 克隆元素\r\n */\r\nexport function clone(element: HTMLElement, deep: boolean = true): HTMLElement {\r\n  return element.cloneNode(deep) as HTMLElement\r\n}\r\n\r\n/**\r\n * 检查元素是否包含另一个元素\r\n */\r\nexport function contains(parent: HTMLElement, child: HTMLElement): boolean {\r\n  return parent.contains(child)\r\n}\r\n\r\n/**\r\n * 聚焦元素\r\n */\r\nexport function focus(element: HTMLElement): void {\r\n  element.focus()\r\n}\r\n\r\n/**\r\n * 失焦元素\r\n */\r\nexport function blur(element: HTMLElement): void {\r\n  element.blur()\r\n}\r\n\r\n/**\r\n * 滚动到元素\r\n */\r\nexport function scrollIntoView(element: HTMLElement, options?: ScrollIntoViewOptions): void {\r\n  element.scrollIntoView(options)\r\n}\r\n\r\n/**\r\n * 获取元素的偏移量\r\n */\r\nexport function getOffset(element: HTMLElement): { top: number, left: number } {\r\n  const rect = element.getBoundingClientRect()\r\n  return {\r\n    top: rect.top + window.scrollY,\r\n    left: rect.left + window.scrollX,\r\n  }\r\n}\r\n\r\n/**\r\n * 获取元素的尺寸\r\n */\r\nexport function getSize(element: HTMLElement): { width: number, height: number } {\r\n  return {\r\n    width: element.offsetWidth,\r\n    height: element.offsetHeight,\r\n  }\r\n}\r\n\r\n/**\r\n * 获取元素的内部尺寸\r\n */\r\nexport function getInnerSize(element: HTMLElement): { width: number, height: number } {\r\n  return {\r\n    width: element.clientWidth,\r\n    height: element.clientHeight,\r\n  }\r\n}\r\n\r\n/**\r\n * 获取元素的外部尺寸\r\n */\r\nexport function getOuterSize(element: HTMLElement, includeMargin: boolean = false): { width: number, height: number } {\r\n  const styles = getComputedStyle(element)\r\n  let width = element.offsetWidth\r\n  let height = element.offsetHeight\r\n\r\n  if (includeMargin) {\r\n    width += Number.parseFloat(styles.marginLeft) + Number.parseFloat(styles.marginRight)\r\n    height += Number.parseFloat(styles.marginTop) + Number.parseFloat(styles.marginBottom)\r\n  }\r\n\r\n  return { width, height }\r\n}\r\n\r\n// Create button helper\r\nexport function createButton(text: string, className?: string): HTMLButtonElement {\r\n  const button = document.createElement('button')\r\n  button.textContent = text\r\n  if (className)\r\n    button.className = className\r\n  return button\r\n}\r\n\r\n// Create icon helper\r\nexport function createIcon(iconName: string, className?: string): HTMLElement {\r\n  const icon = document.createElement('i')\r\n  if (className)\r\n    icon.className = className\r\n  icon.setAttribute('data-icon', iconName)\r\n  return icon\r\n}\r\n"],"names":["createButton","text","className","button","document","createElement","textContent"],"mappings":";;;;;;;;;AAuaO,SAASA,YAAAA,CAAaC,MAAcC,SAAAA,EAAuC;AAChF,EAAA,MAAMC,MAAAA,GAASC,QAAAA,CAASC,aAAAA,CAAc,QAAQ,CAAA;AAC9CF,EAAAA,MAAAA,CAAOG,WAAAA,GAAcL,IAAAA;AACrB,EAAA,IAAIC,SAAAA;AACFC,IAAAA,MAAAA,CAAOD,SAAAA,GAAYA,SAAAA;AACrB,EAAA,OAAOC,MAAAA;AACT;;;;;;;"}