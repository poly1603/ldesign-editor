{"version":3,"file":"PerformanceMonitor.js","sources":["../../src/utils/PerformanceMonitor.ts"],"sourcesContent":["/**\r\n * 性能监控工具\r\n * 监控编辑器性能指标，帮助优化性能问题\r\n */\r\n\r\nexport interface PerformanceMetrics {\r\n  loadTime: number\r\n  renderTime: number\r\n  memoryUsage: number\r\n  fps: number\r\n  eventCount: number\r\n  pluginCount: number\r\n  activePlugins: number\r\n}\r\n\r\nexport interface PerformanceEntry {\r\n  name: string\r\n  startTime: number\r\n  duration: number\r\n  metadata?: Record<string, any>\r\n}\r\n\r\n/**\r\n * 性能监控器类\r\n */\r\nexport class PerformanceMonitor {\r\n  private metrics: PerformanceMetrics = {\r\n    loadTime: 0,\r\n    renderTime: 0,\r\n    memoryUsage: 0,\r\n    fps: 0,\r\n    eventCount: 0,\r\n    pluginCount: 0,\r\n    activePlugins: 0,\r\n  }\r\n\r\n  private entries: PerformanceEntry[] = []\r\n  private timers: Map<string, number> = new Map()\r\n  private fpsFrames: number[] = []\r\n  private lastFrameTime: number = 0\r\n  private maxEntries: number = 1000\r\n\r\n  constructor() {\r\n    this.startFPSMonitoring()\r\n    this.startMemoryMonitoring()\r\n  }\r\n\r\n  /**\r\n   * 开始计时\r\n   */\r\n  start(name: string): void {\r\n    this.timers.set(name, performance.now())\r\n  }\r\n\r\n  /**\r\n   * 结束计时\r\n   */\r\n  end(name: string, metadata?: Record<string, any>): number {\r\n    const startTime = this.timers.get(name)\r\n\r\n    if (!startTime) {\r\n      console.warn(`Timer \"${name}\" was not started`)\r\n      return 0\r\n    }\r\n\r\n    const duration = performance.now() - startTime\r\n    this.timers.delete(name)\r\n\r\n    this.addEntry({\r\n      name,\r\n      startTime,\r\n      duration,\r\n      metadata,\r\n    })\r\n\r\n    return duration\r\n  }\r\n\r\n  /**\r\n   * 测量函数执行时间\r\n   */\r\n  async measure<T>(name: string, fn: () => T | Promise<T>, metadata?: Record<string, any>): Promise<T> {\r\n    this.start(name)\r\n    try {\r\n      const result = await fn()\r\n      this.end(name, metadata)\r\n      return result\r\n    }\r\n    catch (error) {\r\n      this.end(name, { ...metadata, error: true })\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 记录性能条目\r\n   */\r\n  private addEntry(entry: PerformanceEntry): void {\r\n    this.entries.push(entry)\r\n\r\n    // 限制条目数量\r\n    if (this.entries.length > this.maxEntries)\r\n      this.entries.shift()\r\n  }\r\n\r\n  /**\r\n   * 开始FPS监控\r\n   */\r\n  private startFPSMonitoring(): void {\r\n    const measureFPS = (timestamp: number) => {\r\n      if (this.lastFrameTime) {\r\n        const delta = timestamp - this.lastFrameTime\r\n        const fps = 1000 / delta\r\n        this.fpsFrames.push(fps)\r\n\r\n        // 保持最近60帧\r\n        if (this.fpsFrames.length > 60)\r\n          this.fpsFrames.shift()\r\n\r\n        // 计算平均FPS\r\n        this.metrics.fps = Math.round(\r\n          this.fpsFrames.reduce((a, b) => a + b, 0) / this.fpsFrames.length,\r\n        )\r\n      }\r\n\r\n      this.lastFrameTime = timestamp\r\n      requestAnimationFrame(measureFPS)\r\n    }\r\n\r\n    requestAnimationFrame(measureFPS)\r\n  }\r\n\r\n  /**\r\n   * 开始内存监控\r\n   */\r\n  private startMemoryMonitoring(): void {\r\n    if ('memory' in performance) {\r\n      setInterval(() => {\r\n        const memory = (performance as any).memory\r\n        if (memory) {\r\n          this.metrics.memoryUsage = Math.round(\r\n            memory.usedJSHeapSize / 1048576, // 转换为MB\r\n          )\r\n        }\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新指标\r\n   */\r\n  updateMetrics(updates: Partial<PerformanceMetrics>): void {\r\n    Object.assign(this.metrics, updates)\r\n  }\r\n\r\n  /**\r\n   * 获取当前指标\r\n   */\r\n  getMetrics(): PerformanceMetrics {\r\n    return { ...this.metrics }\r\n  }\r\n\r\n  /**\r\n   * 获取性能条目\r\n   */\r\n  getEntries(name?: string): PerformanceEntry[] {\r\n    if (name)\r\n      return this.entries.filter(e => e.name === name)\r\n\r\n    return [...this.entries]\r\n  }\r\n\r\n  /**\r\n   * 获取统计信息\r\n   */\r\n  getStats(name?: string): {\r\n    count: number\r\n    total: number\r\n    average: number\r\n    min: number\r\n    max: number\r\n  } {\r\n    const entries = name ? this.getEntries(name) : this.entries\r\n\r\n    if (entries.length === 0)\r\n      return { count: 0, total: 0, average: 0, min: 0, max: 0 }\r\n\r\n    const durations = entries.map(e => e.duration)\r\n    const total = durations.reduce((a, b) => a + b, 0)\r\n\r\n    return {\r\n      count: entries.length,\r\n      total,\r\n      average: total / entries.length,\r\n      min: Math.min(...durations),\r\n      max: Math.max(...durations),\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取慢操作\r\n   */\r\n  getSlowOperations(threshold: number = 100): PerformanceEntry[] {\r\n    return this.entries.filter(e => e.duration > threshold)\r\n  }\r\n\r\n  /**\r\n   * 生成报告\r\n   */\r\n  generateReport(): string {\r\n    const metrics = this.getMetrics()\r\n    const stats = this.getStats()\r\n    const slowOps = this.getSlowOperations()\r\n\r\n    return `\r\n性能报告\r\n========\r\n\r\n基础指标:\r\n- 加载时间: ${metrics.loadTime.toFixed(2)}ms\r\n- 渲染时间: ${metrics.renderTime.toFixed(2)}ms\r\n- 内存使用: ${metrics.memoryUsage}MB\r\n- FPS: ${metrics.fps}\r\n- 事件数: ${metrics.eventCount}\r\n- 插件总数: ${metrics.pluginCount}\r\n- 活跃插件: ${metrics.activePlugins}\r\n\r\n性能统计:\r\n- 操作总数: ${stats.count}\r\n- 总耗时: ${stats.total.toFixed(2)}ms\r\n- 平均耗时: ${stats.average.toFixed(2)}ms\r\n- 最小耗时: ${stats.min.toFixed(2)}ms\r\n- 最大耗时: ${stats.max.toFixed(2)}ms\r\n\r\n慢操作 (>100ms):\r\n${slowOps.map(op => `- ${op.name}: ${op.duration.toFixed(2)}ms`).join('\\n') || '无'}\r\n\r\n建议:\r\n${this.generateRecommendations()}\r\n    `.trim()\r\n  }\r\n\r\n  /**\r\n   * 生成优化建议\r\n   */\r\n  private generateRecommendations(): string {\r\n    const recommendations: string[] = []\r\n    const metrics = this.getMetrics()\r\n    const slowOps = this.getSlowOperations()\r\n\r\n    if (metrics.fps < 30)\r\n      recommendations.push('- FPS过低，考虑减少DOM操作或启用虚拟滚动')\r\n\r\n    if (metrics.memoryUsage > 100)\r\n      recommendations.push('- 内存使用较高，检查是否存在内存泄漏')\r\n\r\n    if (slowOps.length > 10)\r\n      recommendations.push('- 存在大量慢操作，考虑优化或使用Web Worker')\r\n\r\n    if (metrics.loadTime > 3000)\r\n      recommendations.push('- 加载时间较长，考虑代码分割和懒加载')\r\n\r\n    if (recommendations.length === 0)\r\n      recommendations.push('- 性能表现良好！')\r\n\r\n    return recommendations.join('\\n')\r\n  }\r\n\r\n  /**\r\n   * 清空数据\r\n   */\r\n  clear(): void {\r\n    this.entries = []\r\n    this.timers.clear()\r\n    this.fpsFrames = []\r\n  }\r\n\r\n  /**\r\n   * 导出数据\r\n   */\r\n  export(): {\r\n    metrics: PerformanceMetrics\r\n    entries: PerformanceEntry[]\r\n    timestamp: number\r\n  } {\r\n    return {\r\n      metrics: this.getMetrics(),\r\n      entries: this.getEntries(),\r\n      timestamp: Date.now(),\r\n    }\r\n  }\r\n}\r\n\r\n// 全局单例\r\nlet globalMonitor: PerformanceMonitor | null = null\r\n\r\n/**\r\n * 获取全局性能监控器\r\n */\r\nexport function getPerformanceMonitor(): PerformanceMonitor {\r\n  if (!globalMonitor)\r\n    globalMonitor = new PerformanceMonitor()\r\n\r\n  return globalMonitor\r\n}\r\n\r\n/**\r\n * 便捷函数：测量函数执行时间\r\n */\r\nexport async function measure<T>(\r\n  name: string,\r\n  fn: () => T | Promise<T>,\r\n): Promise<T> {\r\n  return getPerformanceMonitor().measure(name, fn)\r\n}\r\n\r\n/**\r\n * 便捷函数：开始计时\r\n */\r\nexport function startTimer(name: string): void {\r\n  getPerformanceMonitor().start(name)\r\n}\r\n\r\n/**\r\n * 便捷函数：结束计时\r\n */\r\nexport function endTimer(name: string): number {\r\n  return getPerformanceMonitor().end(name)\r\n}\r\n"],"names":["PerformanceMonitor","constructor","metrics","loadTime","renderTime","memoryUsage","fps","eventCount","pluginCount","activePlugins","entries","timers","Map","fpsFrames","lastFrameTime","maxEntries","startFPSMonitoring","startMemoryMonitoring","start","name","set","performance","now","end","metadata","startTime","get","console","warn","duration","delete","addEntry","measure","fn","result","error","entry","push","length","shift","measureFPS","timestamp","delta","Math","round","reduce","a","b","requestAnimationFrame","setInterval","memory","usedJSHeapSize","updateMetrics","updates","Object","assign","getMetrics","getEntries","filter","e","getStats","count","total","average","min","max","durations","map","getSlowOperations","threshold","generateReport","stats","slowOps","toFixed","op","join","generateRecommendations","trim","recommendations","clear","export","Date","globalMonitor","getPerformanceMonitor","startTimer","endTimer"],"mappings":"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"}