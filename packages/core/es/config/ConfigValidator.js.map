{"version":3,"file":"ConfigValidator.js","sources":["../../src/config/ConfigValidator.ts"],"sourcesContent":["/**\r\n * é…ç½®éªŒè¯å’Œæ¨èç³»ç»Ÿ\r\n * éªŒè¯é…ç½®åˆæ³•æ€§å¹¶æä¾›ä¼˜åŒ–å»ºè®®\r\n */\r\n\r\nimport type { EditorConfig } from './ConfigManager'\r\n\r\n/**\r\n * éªŒè¯ç»“æœ\r\n */\r\nexport interface ValidationResult {\r\n  valid: boolean\r\n  errors: ValidationError[]\r\n  warnings: ValidationWarning[]\r\n  suggestions: ValidationSuggestion[]\r\n}\r\n\r\n/**\r\n * éªŒè¯é”™è¯¯\r\n */\r\nexport interface ValidationError {\r\n  field: string\r\n  message: string\r\n  severity: 'error' | 'warning' | 'info'\r\n}\r\n\r\n/**\r\n * éªŒè¯è­¦å‘Š\r\n */\r\nexport interface ValidationWarning {\r\n  message: string\r\n  impact: 'high' | 'medium' | 'low'\r\n}\r\n\r\n/**\r\n * éªŒè¯å»ºè®®\r\n */\r\nexport interface ValidationSuggestion {\r\n  type: 'performance' | 'usability' | 'compatibility'\r\n  message: string\r\n  action?: string\r\n}\r\n\r\n/**\r\n * é…ç½®éªŒè¯å™¨ç±»\r\n */\r\nexport class ConfigValidator {\r\n  /**\r\n   * éªŒè¯é…ç½®\r\n   */\r\n  validate(config: EditorConfig): ValidationResult {\r\n    const result: ValidationResult = {\r\n      valid: true,\r\n      errors: [],\r\n      warnings: [],\r\n      suggestions: [],\r\n    }\r\n\r\n    // éªŒè¯å›¾æ ‡é…ç½®\r\n    this.validateIcons(config, result)\r\n\r\n    // éªŒè¯ä¸»é¢˜é…ç½®\r\n    this.validateTheme(config, result)\r\n\r\n    // éªŒè¯å¤šè¯­è¨€é…ç½®\r\n    this.validateI18n(config, result)\r\n\r\n    // éªŒè¯åŠŸèƒ½é…ç½®\r\n    this.validateFeatures(config, result)\r\n\r\n    // éªŒè¯æ€§èƒ½é…ç½®\r\n    this.validatePerformance(config, result)\r\n\r\n    // ç”Ÿæˆä¼˜åŒ–å»ºè®®\r\n    this.generateSuggestions(config, result)\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * éªŒè¯å›¾æ ‡é…ç½®\r\n   */\r\n  private validateIcons(config: EditorConfig, result: ValidationResult): void {\r\n    if (config.icons) {\r\n      const validSets = ['lucide', 'feather', 'material', 'custom']\r\n\r\n      if (config.icons.defaultSet && !validSets.includes(config.icons.defaultSet)) {\r\n        result.errors.push({\r\n          field: 'icons.defaultSet',\r\n          message: `æ— æ•ˆçš„å›¾æ ‡é›†: ${config.icons.defaultSet}`,\r\n          severity: 'error',\r\n        })\r\n        result.valid = false\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * éªŒè¯ä¸»é¢˜é…ç½®\r\n   */\r\n  private validateTheme(config: EditorConfig, result: ValidationResult): void {\r\n    if (config.theme) {\r\n      const validThemes = ['light', 'dark', 'high-contrast']\r\n\r\n      if (config.theme.defaultTheme && !validThemes.includes(config.theme.defaultTheme)) {\r\n        result.warnings.push({\r\n          message: `æœªçŸ¥çš„ä¸»é¢˜: ${config.theme.defaultTheme}ï¼Œå¯èƒ½æ˜¯è‡ªå®šä¹‰ä¸»é¢˜`,\r\n          impact: 'low',\r\n        })\r\n      }\r\n\r\n      if (config.theme.customThemes && config.theme.customThemes.length > 10) {\r\n        result.warnings.push({\r\n          message: 'è‡ªå®šä¹‰ä¸»é¢˜è¿‡å¤šå¯èƒ½å½±å“æ€§èƒ½',\r\n          impact: 'medium',\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * éªŒè¯å¤šè¯­è¨€é…ç½®\r\n   */\r\n  private validateI18n(config: EditorConfig, result: ValidationResult): void {\r\n    if (config.i18n) {\r\n      const validLocales = ['zh-CN', 'en-US', 'ja-JP']\r\n\r\n      if (config.i18n.defaultLocale && !validLocales.includes(config.i18n.defaultLocale)) {\r\n        result.warnings.push({\r\n          message: `æœªçŸ¥çš„è¯­è¨€: ${config.i18n.defaultLocale}ï¼Œå¯èƒ½éœ€è¦åŠ è½½é¢å¤–çš„è¯­è¨€åŒ…`,\r\n          impact: 'low',\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * éªŒè¯åŠŸèƒ½é…ç½®\r\n   */\r\n  private validateFeatures(config: EditorConfig, result: ValidationResult): void {\r\n    if (config.features) {\r\n      const enabled = config.features.enabled || []\r\n      const disabled = config.features.disabled || []\r\n\r\n      // æ£€æŸ¥å†²çª\r\n      const conflicts = enabled.filter((f: string) => disabled.includes(f))\r\n      if (conflicts.length > 0) {\r\n        result.errors.push({\r\n          field: 'features',\r\n          message: `åŠŸèƒ½å†²çª: ${conflicts.join(', ')} åŒæ—¶åœ¨å¯ç”¨å’Œç¦ç”¨åˆ—è¡¨ä¸­`,\r\n          severity: 'error',\r\n        })\r\n        result.valid = false\r\n      }\r\n\r\n      // æ£€æŸ¥æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦è¢«ç¦ç”¨\r\n      const coreFeatures = ['basic-editing', 'selection', 'history']\r\n      const disabledCore = coreFeatures.filter(f => disabled.includes(f))\r\n\r\n      if (disabledCore.length > 0) {\r\n        result.errors.push({\r\n          field: 'features',\r\n          message: `æ ¸å¿ƒåŠŸèƒ½ä¸åº”è¢«ç¦ç”¨: ${disabledCore.join(', ')}`,\r\n          severity: 'error',\r\n        })\r\n        result.valid = false\r\n      }\r\n\r\n      // åŠŸèƒ½æ•°é‡å»ºè®®\r\n      if (enabled.length > 30) {\r\n        result.suggestions.push({\r\n          type: 'performance',\r\n          message: 'å¯ç”¨çš„åŠŸèƒ½è¾ƒå¤šï¼Œå»ºè®®åªå¯ç”¨å¿…éœ€çš„åŠŸèƒ½ä»¥æå‡æ€§èƒ½',\r\n          action: 'è€ƒè™‘ä½¿ç”¨é¢„è®¾é…ç½®æˆ–ç¦ç”¨ä¸å¸¸ç”¨çš„åŠŸèƒ½',\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * éªŒè¯æ€§èƒ½é…ç½®\r\n   */\r\n  private validatePerformance(config: EditorConfig, result: ValidationResult): void {\r\n    // æ£€æŸ¥è‡ªåŠ¨ä¿å­˜é—´éš”\r\n    if (config.autoSaveInterval && config.autoSaveInterval < 5000) {\r\n      result.warnings.push({\r\n        message: 'è‡ªåŠ¨ä¿å­˜é—´éš”è¿‡çŸ­å¯èƒ½å½±å“æ€§èƒ½',\r\n        impact: 'medium',\r\n      })\r\n\r\n      result.suggestions.push({\r\n        type: 'performance',\r\n        message: 'å»ºè®®å°†è‡ªåŠ¨ä¿å­˜é—´éš”è®¾ç½®ä¸º10ç§’ä»¥ä¸Š',\r\n        action: 'è®¾ç½® autoSaveInterval: 10000',\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç”Ÿæˆä¼˜åŒ–å»ºè®®\r\n   */\r\n  private generateSuggestions(config: EditorConfig, result: ValidationResult): void {\r\n    const enabled = config.features?.enabled || []\r\n\r\n    // AIåŠŸèƒ½å»ºè®®\r\n    if (enabled.includes('ai-service')) {\r\n      result.suggestions.push({\r\n        type: 'usability',\r\n        message: 'AIåŠŸèƒ½å·²å¯ç”¨ï¼Œç¡®ä¿å·²é…ç½®APIå¯†é’¥',\r\n        action: 'åœ¨AIServiceä¸­é…ç½®APIå¯†é’¥',\r\n      })\r\n    }\r\n\r\n    // åä½œåŠŸèƒ½å»ºè®®\r\n    if (enabled.includes('collaboration')) {\r\n      result.suggestions.push({\r\n        type: 'compatibility',\r\n        message: 'åä½œåŠŸèƒ½éœ€è¦WebSocketæ”¯æŒ',\r\n        action: 'ç¡®ä¿æœåŠ¡å™¨æ”¯æŒWebSocketè¿æ¥',\r\n      })\r\n    }\r\n\r\n    // åª’ä½“åŠŸèƒ½å»ºè®®\r\n    if (enabled.includes('image') || enabled.includes('video')) {\r\n      result.suggestions.push({\r\n        type: 'performance',\r\n        message: 'åª’ä½“åŠŸèƒ½å»ºè®®é…ç½®ä¸Šä¼ å¤„ç†å™¨',\r\n        action: 'è®¾ç½®uploadHandlerä»¥ä¼˜åŒ–åª’ä½“ä¸Šä¼ ä½“éªŒ',\r\n      })\r\n    }\r\n\r\n    // æ‡’åŠ è½½å»ºè®®\r\n    if (enabled.length > 15 && !config.features?.lazy) {\r\n      result.suggestions.push({\r\n        type: 'performance',\r\n        message: 'åŠŸèƒ½è¾ƒå¤šæ—¶å»ºè®®å¯ç”¨æ‡’åŠ è½½',\r\n        action: 'åœ¨åŠŸèƒ½é…ç½®ä¸­è®¾ç½® lazy: true',\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç”ŸæˆéªŒè¯æŠ¥å‘Š\r\n   */\r\n  generateReport(result: ValidationResult): string {\r\n    let report = 'é…ç½®éªŒè¯æŠ¥å‘Š\\n'\r\n    report += '============\\n\\n'\r\n\r\n    report += `çŠ¶æ€: ${result.valid ? 'âœ… æœ‰æ•ˆ' : 'âŒ æ— æ•ˆ'}\\n\\n`\r\n\r\n    if (result.errors.length > 0) {\r\n      report += 'é”™è¯¯:\\n'\r\n      result.errors.forEach((error) => {\r\n        report += `  âŒ [${error.field}] ${error.message}\\n`\r\n      })\r\n      report += '\\n'\r\n    }\r\n\r\n    if (result.warnings.length > 0) {\r\n      report += 'è­¦å‘Š:\\n'\r\n      result.warnings.forEach((warning) => {\r\n        const icon = warning.impact === 'high' ? 'ğŸ”´' : warning.impact === 'medium' ? 'ğŸŸ¡' : 'ğŸŸ¢'\r\n        report += `  ${icon} ${warning.message}\\n`\r\n      })\r\n      report += '\\n'\r\n    }\r\n\r\n    if (result.suggestions.length > 0) {\r\n      report += 'å»ºè®®:\\n'\r\n      result.suggestions.forEach((suggestion) => {\r\n        const icon = suggestion.type === 'performance' ? 'âš¡' : suggestion.type === 'usability' ? 'ğŸ¯' : 'ğŸ”§'\r\n        report += `  ${icon} ${suggestion.message}\\n`\r\n        if (suggestion.action)\r\n          report += `     â†’ ${suggestion.action}\\n`\r\n      })\r\n    }\r\n\r\n    return report\r\n  }\r\n\r\n  /**\r\n   * è‡ªåŠ¨ä¿®å¤é…ç½®\r\n   */\r\n  autoFix(config: EditorConfig): EditorConfig {\r\n    const fixed = { ...config }\r\n\r\n    // ä¿®å¤åŠŸèƒ½å†²çª\r\n    if (fixed.features) {\r\n      const enabled = fixed.features.enabled || []\r\n      const disabled = fixed.features.disabled || []\r\n\r\n      // ç§»é™¤å†²çªé¡¹ï¼ˆä»¥enabledä¸ºå‡†ï¼‰\r\n      fixed.features.disabled = disabled.filter((f: string) => !enabled.includes(f))\r\n\r\n      // ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½å¯ç”¨\r\n      const coreFeatures = ['basic-editing', 'selection', 'history']\r\n      coreFeatures.forEach((f) => {\r\n        if (!enabled.includes(f))\r\n          enabled.push(f)\r\n      })\r\n      fixed.features.enabled = enabled\r\n    }\r\n\r\n    // ä¿®å¤æ€§èƒ½é…ç½®\r\n    if (fixed.autoSaveInterval && fixed.autoSaveInterval < 5000)\r\n      fixed.autoSaveInterval = 10000\r\n\r\n    return fixed\r\n  }\r\n}\r\n\r\n// å…¨å±€å®ä¾‹\r\nlet validatorInstance: ConfigValidator | null = null\r\n\r\n/**\r\n * è·å–é…ç½®éªŒè¯å™¨\r\n */\r\nexport function getConfigValidator(): ConfigValidator {\r\n  if (!validatorInstance)\r\n    validatorInstance = new ConfigValidator()\r\n\r\n  return validatorInstance\r\n}\r\n\r\n/**\r\n * å¿«æ·å‡½æ•°ï¼šéªŒè¯é…ç½®\r\n */\r\nexport function validateConfig(config: EditorConfig): ValidationResult {\r\n  return getConfigValidator().validate(config)\r\n}\r\n\r\n/**\r\n * å¿«æ·å‡½æ•°ï¼šè‡ªåŠ¨ä¿®å¤é…ç½®\r\n */\r\nexport function autoFixConfig(config: EditorConfig): EditorConfig {\r\n  return getConfigValidator().autoFix(config)\r\n}\r\n"],"names":["ConfigValidator","validate","config","result","valid","errors","warnings","suggestions","validateIcons","validateTheme","validateI18n","validateFeatures","validatePerformance","generateSuggestions","icons","validSets","defaultSet","includes","push","field","message","severity","theme","validThemes","defaultTheme","impact","customThemes","length","i18n","validLocales","defaultLocale","features","enabled","disabled","conflicts","filter","f","join","coreFeatures","disabledCore","type","action","autoSaveInterval","lazy","generateReport","report","forEach","error","warning","icon","suggestion","autoFix","fixed","validatorInstance","getConfigValidator","validateConfig","autoFixConfig"],"mappings":"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"}