{"version":3,"file":"PerformanceTab.js","sources":["../../../src/devtools/tabs/PerformanceTab.ts"],"sourcesContent":["/**\r\n * ÊÄßËÉΩÁõëÊéßÊ†áÁ≠æÈ°µ\r\n * ÂÆûÊó∂ÊòæÁ§∫FPS„ÄÅÂÜÖÂ≠ò„ÄÅÊ∏≤ÊüìÊÄßËÉΩÁ≠âÊåáÊ†á\r\n */\r\n\r\nimport type { Editor } from '../../core/Editor'\r\nimport { createLogger } from '../../utils/logger'\r\nimport { getPerformanceMonitor } from '../../utils/PerformanceMonitor'\r\n\r\nconst logger = createLogger('PerformanceTab')\r\n\r\nexport interface PerformanceMetrics {\r\n  fps: number\r\n  memory: {\r\n    used: number\r\n    total: number\r\n    limit: number\r\n  }\r\n  renderTime: number\r\n  scriptTime: number\r\n  paintTime: number\r\n  operations: {\r\n    name: string\r\n    duration: number\r\n    timestamp: number\r\n  }[]\r\n}\r\n\r\nexport class PerformanceTab {\r\n  private editor: Editor\r\n  private container?: HTMLElement\r\n  private performanceMonitor = getPerformanceMonitor()\r\n  private metrics: PerformanceMetrics = {\r\n    fps: 60,\r\n    memory: { used: 0, total: 0, limit: 0 },\r\n    renderTime: 0,\r\n    scriptTime: 0,\r\n    paintTime: 0,\r\n    operations: [],\r\n  }\r\n\r\n  private charts: {\r\n    fps?: any\r\n    memory?: any\r\n    operations?: any\r\n  } = {}\r\n\r\n  private isActive = false\r\n  private updateInterval?: number\r\n\r\n  constructor(options: { editor: Editor }) {\r\n    this.editor = options.editor\r\n  }\r\n\r\n  /**\r\n   * Ê∏≤ÊüìÊ†áÁ≠æÈ°µ\r\n   */\r\n  render(): HTMLElement {\r\n    this.container = document.createElement('div')\r\n    this.container.className = 'performance-tab'\r\n    this.container.style.cssText = `\r\n      padding: 20px;\r\n      height: 100%;\r\n      overflow-y: auto;\r\n    `\r\n\r\n    // ÂàõÂª∫ÊÄßËÉΩÊ¶ÇËßà\r\n    const overview = this.createOverview()\r\n\r\n    // ÂàõÂª∫ÂõæË°®Âå∫Âüü\r\n    const charts = this.createCharts()\r\n\r\n    // ÂàõÂª∫Êìç‰ΩúÂéÜÂè≤\r\n    const operations = this.createOperationsTable()\r\n\r\n    // ÂàõÂª∫Â∑•ÂÖ∑Ê†è\r\n    const toolbar = this.createToolbar()\r\n\r\n    this.container.appendChild(toolbar)\r\n    this.container.appendChild(overview)\r\n    this.container.appendChild(charts)\r\n    this.container.appendChild(operations)\r\n\r\n    return this.container\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫Â∑•ÂÖ∑Ê†è\r\n   */\r\n  private createToolbar(): HTMLElement {\r\n    const toolbar = document.createElement('div')\r\n    toolbar.className = 'performance-toolbar'\r\n    toolbar.style.cssText = `\r\n      display: flex;\r\n      gap: 10px;\r\n      margin-bottom: 20px;\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid #e0e0e0;\r\n    `\r\n\r\n    // ÂΩïÂà∂ÊåâÈíÆ\r\n    const recordBtn = document.createElement('button')\r\n    recordBtn.className = 'record-btn'\r\n    recordBtn.style.cssText = `\r\n      padding: 6px 12px;\r\n      background: #ff4444;\r\n      color: white;\r\n      border: none;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 6px;\r\n      font-size: 13px;\r\n    `\r\n    recordBtn.innerHTML = '<span style=\"font-size: 10px;\">‚è∫</span> ÂºÄÂßãÂΩïÂà∂'\r\n\r\n    let isRecording = false\r\n    recordBtn.onclick = () => {\r\n      isRecording = !isRecording\r\n      if (isRecording) {\r\n        this.startRecording()\r\n        recordBtn.style.background = '#44aa44'\r\n        recordBtn.innerHTML = '<span style=\"font-size: 10px;\">‚è∏</span> ÂÅúÊ≠¢ÂΩïÂà∂'\r\n      }\r\n      else {\r\n        this.stopRecording()\r\n        recordBtn.style.background = '#ff4444'\r\n        recordBtn.innerHTML = '<span style=\"font-size: 10px;\">‚è∫</span> ÂºÄÂßãÂΩïÂà∂'\r\n      }\r\n    }\r\n\r\n    // Ê∏ÖÁ©∫ÊåâÈíÆ\r\n    const clearBtn = document.createElement('button')\r\n    clearBtn.style.cssText = `\r\n      padding: 6px 12px;\r\n      background: #666;\r\n      color: white;\r\n      border: none;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      font-size: 13px;\r\n    `\r\n    clearBtn.textContent = 'Ê∏ÖÁ©∫Êï∞ÊçÆ'\r\n    clearBtn.onclick = () => this.clearData()\r\n\r\n    // ÂØºÂá∫ÊåâÈíÆ\r\n    const exportBtn = document.createElement('button')\r\n    exportBtn.style.cssText = clearBtn.style.cssText\r\n    exportBtn.style.background = '#667eea'\r\n    exportBtn.textContent = 'ÂØºÂá∫Êä•Âëä'\r\n    exportBtn.onclick = () => this.exportReport()\r\n\r\n    // GCÊåâÈíÆ\r\n    const gcBtn = document.createElement('button')\r\n    gcBtn.style.cssText = clearBtn.style.cssText\r\n    gcBtn.style.background = '#ff9800'\r\n    gcBtn.textContent = 'Âº∫Âà∂GC'\r\n    gcBtn.onclick = () => this.forceGC()\r\n\r\n    toolbar.appendChild(recordBtn)\r\n    toolbar.appendChild(clearBtn)\r\n    toolbar.appendChild(exportBtn)\r\n    toolbar.appendChild(gcBtn)\r\n\r\n    return toolbar\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫ÊÄßËÉΩÊ¶ÇËßà\r\n   */\r\n  private createOverview(): HTMLElement {\r\n    const overview = document.createElement('div')\r\n    overview.className = 'performance-overview'\r\n    overview.style.cssText = `\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n      gap: 15px;\r\n      margin-bottom: 30px;\r\n    `\r\n\r\n    const metrics = [\r\n      { id: 'fps', label: 'FPS', value: '60', color: '#4caf50', icon: 'üìä' },\r\n      { id: 'memory', label: 'ÂÜÖÂ≠ò‰ΩøÁî®', value: '0 MB', color: '#2196f3', icon: 'üíæ' },\r\n      { id: 'render', label: 'Ê∏≤ÊüìÊó∂Èó¥', value: '0 ms', color: '#ff9800', icon: 'üé®' },\r\n      { id: 'script', label: 'ËÑöÊú¨Êó∂Èó¥', value: '0 ms', color: '#9c27b0', icon: '‚öôÔ∏è' },\r\n      { id: 'nodes', label: 'DOMËäÇÁÇπ', value: '0', color: '#00bcd4', icon: 'üå≥' },\r\n      { id: 'listeners', label: '‰∫ã‰ª∂ÁõëÂê¨', value: '0', color: '#e91e63', icon: 'üëÇ' },\r\n    ]\r\n\r\n    metrics.forEach((metric) => {\r\n      const card = document.createElement('div')\r\n      card.className = `metric-card metric-${metric.id}`\r\n      card.style.cssText = `\r\n        background: white;\r\n        border: 1px solid #e0e0e0;\r\n        border-radius: 8px;\r\n        padding: 15px;\r\n        text-align: center;\r\n        transition: transform 0.2s, box-shadow 0.2s;\r\n      `\r\n\r\n      card.innerHTML = `\r\n        <div style=\"font-size: 24px; margin-bottom: 8px;\">${metric.icon}</div>\r\n        <div style=\"font-size: 24px; font-weight: bold; color: ${metric.color};\" class=\"metric-value\">\r\n          ${metric.value}\r\n        </div>\r\n        <div style=\"font-size: 12px; color: #666; margin-top: 4px;\">${metric.label}</div>\r\n      `\r\n\r\n      card.onmouseenter = () => {\r\n        card.style.transform = 'translateY(-2px)'\r\n        card.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)'\r\n      }\r\n\r\n      card.onmouseleave = () => {\r\n        card.style.transform = 'translateY(0)'\r\n        card.style.boxShadow = 'none'\r\n      }\r\n\r\n      overview.appendChild(card)\r\n    })\r\n\r\n    return overview\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫ÂõæË°®Âå∫Âüü\r\n   */\r\n  private createCharts(): HTMLElement {\r\n    const charts = document.createElement('div')\r\n    charts.className = 'performance-charts'\r\n    charts.style.cssText = `\r\n      display: grid;\r\n      grid-template-columns: 1fr 1fr;\r\n      gap: 20px;\r\n      margin-bottom: 30px;\r\n    `\r\n\r\n    // FPSÂõæË°®\r\n    const fpsChart = this.createChart('FPS Ë∂ãÂäø', 'fps-chart')\r\n\r\n    // ÂÜÖÂ≠òÂõæË°®\r\n    const memoryChart = this.createChart('ÂÜÖÂ≠ò‰ΩøÁî®', 'memory-chart')\r\n\r\n    charts.appendChild(fpsChart)\r\n    charts.appendChild(memoryChart)\r\n\r\n    // ÂàùÂßãÂåñÂõæË°®Ôºà‰ΩøÁî®CanvasÔºâ\r\n    setTimeout(() => {\r\n      this.initializeCharts()\r\n    }, 100)\r\n\r\n    return charts\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫Âçï‰∏™ÂõæË°®ÂÆπÂô®\r\n   */\r\n  private createChart(title: string, id: string): HTMLElement {\r\n    const container = document.createElement('div')\r\n    container.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      padding: 15px;\r\n    `\r\n\r\n    container.innerHTML = `\r\n      <h3 style=\"margin: 0 0 10px 0; font-size: 14px; color: #333;\">${title}</h3>\r\n      <canvas id=\"${id}\" width=\"300\" height=\"150\" style=\"width: 100%; height: 150px;\"></canvas>\r\n    `\r\n\r\n    return container\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñÂõæË°®\r\n   */\r\n  private initializeCharts(): void {\r\n    // FPSÂõæË°®\r\n    const fpsCanvas = this.container?.querySelector('#fps-chart') as HTMLCanvasElement\r\n    if (fpsCanvas) {\r\n      this.charts.fps = new SimpleChart(fpsCanvas, {\r\n        maxDataPoints: 60,\r\n        lineColor: '#4caf50',\r\n        fillColor: 'rgba(76, 175, 80, 0.2)',\r\n        yMax: 120,\r\n      })\r\n    }\r\n\r\n    // ÂÜÖÂ≠òÂõæË°®\r\n    const memoryCanvas = this.container?.querySelector('#memory-chart') as HTMLCanvasElement\r\n    if (memoryCanvas) {\r\n      this.charts.memory = new SimpleChart(memoryCanvas, {\r\n        maxDataPoints: 60,\r\n        lineColor: '#2196f3',\r\n        fillColor: 'rgba(33, 150, 243, 0.2)',\r\n        yMax: 100,\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫Êìç‰ΩúÂéÜÂè≤Ë°®Ê†º\r\n   */\r\n  private createOperationsTable(): HTMLElement {\r\n    const container = document.createElement('div')\r\n    container.className = 'operations-container'\r\n    container.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      padding: 15px;\r\n    `\r\n\r\n    container.innerHTML = `\r\n      <h3 style=\"margin: 0 0 15px 0; font-size: 14px; color: #333;\">Êìç‰ΩúÂéÜÂè≤</h3>\r\n      <div style=\"max-height: 200px; overflow-y: auto;\">\r\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 13px;\">\r\n          <thead>\r\n            <tr style=\"background: #f5f5f5;\">\r\n              <th style=\"padding: 8px; text-align: left; border-bottom: 2px solid #e0e0e0;\">Êìç‰Ωú</th>\r\n              <th style=\"padding: 8px; text-align: right; border-bottom: 2px solid #e0e0e0;\">ËÄóÊó∂</th>\r\n              <th style=\"padding: 8px; text-align: right; border-bottom: 2px solid #e0e0e0;\">Êó∂Èó¥Êà≥</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody id=\"operations-tbody\">\r\n            <tr>\r\n              <td colspan=\"3\" style=\"padding: 20px; text-align: center; color: #999;\">\r\n                ÊöÇÊó†Êìç‰ΩúËÆ∞ÂΩï\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    `\r\n\r\n    return container\r\n  }\r\n\r\n  /**\r\n   * ÊøÄÊ¥ªÊ†áÁ≠æÈ°µ\r\n   */\r\n  activate(): void {\r\n    this.isActive = true\r\n    logger.debug('Performance tab activated')\r\n\r\n    // ÂºÄÂßãÊõ¥Êñ∞\r\n    this.startUpdating()\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÁî®Ê†áÁ≠æÈ°µ\r\n   */\r\n  deactivate(): void {\r\n    this.isActive = false\r\n    logger.debug('Performance tab deactivated')\r\n\r\n    // ÂÅúÊ≠¢Êõ¥Êñ∞\r\n    this.stopUpdating()\r\n  }\r\n\r\n  /**\r\n   * ÂºÄÂßãÊõ¥Êñ∞Êï∞ÊçÆ\r\n   */\r\n  private startUpdating(): void {\r\n    this.updateInterval = window.setInterval(() => {\r\n      this.update()\r\n    }, 1000)\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÊ≠¢Êõ¥Êñ∞Êï∞ÊçÆ\r\n   */\r\n  private stopUpdating(): void {\r\n    if (this.updateInterval) {\r\n      clearInterval(this.updateInterval)\r\n      this.updateInterval = undefined\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÊÄßËÉΩÊï∞ÊçÆ\r\n   */\r\n  update(): void {\r\n    if (!this.isActive)\r\n      return\r\n\r\n    // Êõ¥Êñ∞ÂÜÖÂ≠ò\r\n    if (performance.memory) {\r\n      this.metrics.memory = {\r\n        used: performance.memory.usedJSHeapSize,\r\n        total: performance.memory.totalJSHeapSize,\r\n        limit: performance.memory.jsHeapSizeLimit,\r\n      }\r\n\r\n      const memoryMB = Math.round(this.metrics.memory.used / 1024 / 1024)\r\n      this.updateMetricCard('memory', `${memoryMB} MB`)\r\n\r\n      // Êõ¥Êñ∞ÂÜÖÂ≠òÂõæË°®\r\n      this.charts.memory?.addDataPoint(memoryMB)\r\n    }\r\n\r\n    // Êõ¥Êñ∞DOMËäÇÁÇπÊï∞\r\n    const nodeCount = document.querySelectorAll('*').length\r\n    this.updateMetricCard('nodes', nodeCount.toString())\r\n\r\n    // Êõ¥Êñ∞‰∫ã‰ª∂ÁõëÂê¨Âô®Êï∞Èáè\r\n    const listenerCount = this.countEventListeners()\r\n    this.updateMetricCard('listeners', listenerCount.toString())\r\n\r\n    // Êõ¥Êñ∞Ê∏≤ÊüìÊó∂Èó¥\r\n    const renderTime = this.performanceMonitor.getLastMeasure('render')?.duration || 0\r\n    this.updateMetricCard('render', `${renderTime.toFixed(2)} ms`)\r\n\r\n    // Êõ¥Êñ∞ËÑöÊú¨Êó∂Èó¥\r\n    const scriptTime = this.performanceMonitor.getLastMeasure('script')?.duration || 0\r\n    this.updateMetricCard('script', `${scriptTime.toFixed(2)} ms`)\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞FPS\r\n   */\r\n  updateFPS(fps: number): void {\r\n    this.metrics.fps = fps\r\n    this.updateMetricCard('fps', fps.toString())\r\n\r\n    // Êõ¥Êñ∞FPSÂõæË°®\r\n    this.charts.fps?.addDataPoint(fps)\r\n\r\n    // FPSË≠¶Âëä\r\n    if (fps < 30)\r\n      this.updateMetricCard('fps', fps.toString(), '#ff4444')\r\n    else if (fps < 50)\r\n      this.updateMetricCard('fps', fps.toString(), '#ff9800')\r\n    else\r\n      this.updateMetricCard('fps', fps.toString(), '#4caf50')\r\n  }\r\n\r\n  /**\r\n   * Ê∑ªÂä†ÊÄßËÉΩÊµãÈáè\r\n   */\r\n  addMeasure(measure: PerformanceMeasure): void {\r\n    // Ê∑ªÂä†Âà∞Êìç‰ΩúÂéÜÂè≤\r\n    this.metrics.operations.unshift({\r\n      name: measure.name,\r\n      duration: measure.duration,\r\n      timestamp: measure.startTime,\r\n    })\r\n\r\n    // Âè™‰øùÁïôÊúÄËøë100Êù°\r\n    if (this.metrics.operations.length > 100)\r\n      this.metrics.operations.pop()\r\n\r\n    // Êõ¥Êñ∞Ë°®Ê†º\r\n    this.updateOperationsTable()\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞Êìç‰ΩúÂéÜÂè≤Ë°®Ê†º\r\n   */\r\n  private updateOperationsTable(): void {\r\n    const tbody = this.container?.querySelector('#operations-tbody')\r\n    if (!tbody)\r\n      return\r\n\r\n    if (this.metrics.operations.length === 0) {\r\n      tbody.innerHTML = `\r\n        <tr>\r\n          <td colspan=\"3\" style=\"padding: 20px; text-align: center; color: #999;\">\r\n            ÊöÇÊó†Êìç‰ΩúËÆ∞ÂΩï\r\n          </td>\r\n        </tr>\r\n      `\r\n      return\r\n    }\r\n\r\n    tbody.innerHTML = this.metrics.operations.slice(0, 20).map((op) => {\r\n      const time = new Date(op.timestamp).toLocaleTimeString()\r\n      const duration = op.duration.toFixed(2)\r\n      const durationColor = op.duration > 100\r\n        ? '#ff4444'\r\n        : op.duration > 50 ? '#ff9800' : '#4caf50'\r\n\r\n      return `\r\n        <tr>\r\n          <td style=\"padding: 8px; border-bottom: 1px solid #f0f0f0;\">${op.name}</td>\r\n          <td style=\"padding: 8px; text-align: right; border-bottom: 1px solid #f0f0f0; color: ${durationColor};\">\r\n            ${duration} ms\r\n          </td>\r\n          <td style=\"padding: 8px; text-align: right; border-bottom: 1px solid #f0f0f0; color: #999;\">\r\n            ${time}\r\n          </td>\r\n        </tr>\r\n      `\r\n    }).join('')\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÊåáÊ†áÂç°Áâá\r\n   */\r\n  private updateMetricCard(id: string, value: string, color?: string): void {\r\n    const valueEl = this.container?.querySelector(`.metric-${id} .metric-value`)\r\n    if (valueEl) {\r\n      valueEl.textContent = value\r\n      if (color)\r\n        (valueEl as HTMLElement).style.color = color\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÁªüËÆ°‰∫ã‰ª∂ÁõëÂê¨Âô®Êï∞Èáè\r\n   */\r\n  private countEventListeners(): number {\r\n    // ËøôÊòØ‰∏Ä‰∏™‰º∞ÁÆóÊñπÊ≥ï\r\n    let count = 0\r\n    const allElements = document.querySelectorAll('*')\r\n\r\n    allElements.forEach((element) => {\r\n      // Ëé∑ÂèñÂÖÉÁ¥†‰∏äÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®Ôºà‰ªÖËÉΩËé∑ÂèñÂà∞ÂÜÖËÅîÁöÑÔºâ\r\n      const events = (element as any)._events || {}\r\n      count += Object.keys(events).length\r\n    })\r\n\r\n    return count\r\n  }\r\n\r\n  /**\r\n   * ÂºÄÂßãÂΩïÂà∂\r\n   */\r\n  private startRecording(): void {\r\n    logger.info('Started performance recording')\r\n    this.performanceMonitor.startRecording()\r\n\r\n    // Ê∏ÖÁ©∫ÊóßÊï∞ÊçÆ\r\n    this.clearData()\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÊ≠¢ÂΩïÂà∂\r\n   */\r\n  private stopRecording(): void {\r\n    logger.info('Stopped performance recording')\r\n    const recording = this.performanceMonitor.stopRecording()\r\n\r\n    // ÂàÜÊûêÂΩïÂà∂Êï∞ÊçÆ\r\n    this.analyzeRecording(recording)\r\n  }\r\n\r\n  /**\r\n   * ÂàÜÊûêÂΩïÂà∂Êï∞ÊçÆ\r\n   */\r\n  private analyzeRecording(recording: any): void {\r\n    // TODO: ÂÆûÁé∞ÂΩïÂà∂Êï∞ÊçÆÂàÜÊûê\r\n    logger.debug('Analyzing recording:', recording)\r\n  }\r\n\r\n  /**\r\n   * Ê∏ÖÁ©∫Êï∞ÊçÆ\r\n   */\r\n  private clearData(): void {\r\n    this.metrics.operations = []\r\n    this.updateOperationsTable()\r\n\r\n    // Ê∏ÖÁ©∫ÂõæË°®\r\n    this.charts.fps?.clear()\r\n    this.charts.memory?.clear()\r\n\r\n    logger.info('Performance data cleared')\r\n  }\r\n\r\n  /**\r\n   * ÂØºÂá∫Êä•Âëä\r\n   */\r\n  private exportReport(): void {\r\n    const report = {\r\n      timestamp: new Date().toISOString(),\r\n      metrics: this.metrics,\r\n      editor: {\r\n        version: this.editor.version,\r\n        plugins: this.editor.plugins?.getLoadedPlugins() || [],\r\n      },\r\n    }\r\n\r\n    const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' })\r\n    const url = URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `performance-report-${Date.now()}.json`\r\n    a.click()\r\n    URL.revokeObjectURL(url)\r\n\r\n    logger.info('Performance report exported')\r\n  }\r\n\r\n  /**\r\n   * Âº∫Âà∂ÂûÉÂúæÂõûÊî∂\r\n   */\r\n  private forceGC(): void {\r\n    if ((window as any).gc) {\r\n      (window as any).gc()\r\n      logger.info('Garbage collection triggered')\r\n    }\r\n    else {\r\n      logger.warn('Garbage collection not available. Run Chrome with --js-flags=\"--expose-gc\"')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÈîÄÊØÅ\r\n   */\r\n  destroy(): void {\r\n    this.stopUpdating()\r\n    this.container = undefined\r\n  }\r\n}\r\n\r\n/**\r\n * ÁÆÄÂçïÂõæË°®Á±ª\r\n */\r\nclass SimpleChart {\r\n  private ctx: CanvasRenderingContext2D\r\n  private data: number[] = []\r\n  private options: any\r\n\r\n  constructor(canvas: HTMLCanvasElement, options: any) {\r\n    this.ctx = canvas.getContext('2d')!\r\n    this.options = options\r\n\r\n    // ËÆæÁΩÆÁîªÂ∏ÉÂ∞∫ÂØ∏\r\n    const rect = canvas.getBoundingClientRect()\r\n    canvas.width = rect.width * window.devicePixelRatio\r\n    canvas.height = rect.height * window.devicePixelRatio\r\n    this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio)\r\n  }\r\n\r\n  addDataPoint(value: number): void {\r\n    this.data.push(value)\r\n    if (this.data.length > this.options.maxDataPoints)\r\n      this.data.shift()\r\n\r\n    this.draw()\r\n  }\r\n\r\n  clear(): void {\r\n    this.data = []\r\n    this.draw()\r\n  }\r\n\r\n  private draw(): void {\r\n    const { width, height } = this.ctx.canvas\r\n    const actualWidth = width / window.devicePixelRatio\r\n    const actualHeight = height / window.devicePixelRatio\r\n\r\n    // Ê∏ÖÁ©∫ÁîªÂ∏É\r\n    this.ctx.clearRect(0, 0, actualWidth, actualHeight)\r\n\r\n    if (this.data.length < 2)\r\n      return\r\n\r\n    // ÁªòÂà∂ÁΩëÊ†º\r\n    this.ctx.strokeStyle = '#f0f0f0'\r\n    this.ctx.lineWidth = 1\r\n\r\n    for (let i = 0; i <= 4; i++) {\r\n      const y = (actualHeight / 4) * i\r\n      this.ctx.beginPath()\r\n      this.ctx.moveTo(0, y)\r\n      this.ctx.lineTo(actualWidth, y)\r\n      this.ctx.stroke()\r\n    }\r\n\r\n    // ÁªòÂà∂Êï∞ÊçÆ\r\n    const stepX = actualWidth / (this.options.maxDataPoints - 1)\r\n    const scaleY = actualHeight / this.options.yMax\r\n\r\n    // Â°´ÂÖÖÂå∫Âüü\r\n    this.ctx.fillStyle = this.options.fillColor\r\n    this.ctx.beginPath()\r\n    this.ctx.moveTo(0, actualHeight)\r\n\r\n    this.data.forEach((value, index) => {\r\n      const x = index * stepX\r\n      const y = actualHeight - (value * scaleY)\r\n      this.ctx.lineTo(x, y)\r\n    })\r\n\r\n    this.ctx.lineTo((this.data.length - 1) * stepX, actualHeight)\r\n    this.ctx.closePath()\r\n    this.ctx.fill()\r\n\r\n    // ÁªòÂà∂Á∫øÊù°\r\n    this.ctx.strokeStyle = this.options.lineColor\r\n    this.ctx.lineWidth = 2\r\n    this.ctx.beginPath()\r\n\r\n    this.data.forEach((value, index) => {\r\n      const x = index * stepX\r\n      const y = actualHeight - (value * scaleY)\r\n\r\n      if (index === 0)\r\n        this.ctx.moveTo(x, y)\r\n      else\r\n        this.ctx.lineTo(x, y)\r\n    })\r\n\r\n    this.ctx.stroke()\r\n  }\r\n}\r\n"],"names":["logger","createLogger","PerformanceTab","constructor","options","performanceMonitor","getPerformanceMonitor","metrics","fps","memory","used","total","limit","renderTime","scriptTime","paintTime","operations","charts","isActive","editor","render","container","document","createElement","className","style","cssText","overview","createOverview","createCharts","createOperationsTable","toolbar","createToolbar","appendChild","recordBtn","innerHTML","isRecording","onclick","startRecording","background","stopRecording","clearBtn","textContent","clearData","exportBtn","exportReport","gcBtn","forceGC","id","label","value","color","icon","forEach","metric","card","onmouseenter","transform","boxShadow","onmouseleave","fpsChart","createChart","memoryChart","setTimeout","initializeCharts","title","fpsCanvas","querySelector","SimpleChart","maxDataPoints","lineColor","fillColor","yMax","memoryCanvas","activate","debug","startUpdating","deactivate","stopUpdating","updateInterval","window","setInterval","update","clearInterval","undefined","performance","usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit","memoryMB","Math","round","updateMetricCard","addDataPoint","nodeCount","querySelectorAll","length","toString","listenerCount","countEventListeners","getLastMeasure","duration","toFixed","updateFPS","addMeasure","measure","unshift","name","timestamp","startTime","pop","updateOperationsTable","tbody","slice","map","op","time","Date","toLocaleTimeString","durationColor","join","valueEl","count","allElements","element","events","_events","Object","keys","info","recording","analyzeRecording","clear","report","toISOString","version","plugins","getLoadedPlugins","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","href","download","now","click","revokeObjectURL","gc","warn","destroy","canvas","data","ctx","getContext","rect","getBoundingClientRect","width","devicePixelRatio","height","scale","push","shift","draw","actualWidth","actualHeight","clearRect","strokeStyle","lineWidth","i","y","beginPath","moveTo","lineTo","stroke","stepX","scaleY","fillStyle","index","x","closePath","fill"],"mappings":"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"}