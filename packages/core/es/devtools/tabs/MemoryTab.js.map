{"version":3,"file":"MemoryTab.js","sources":["../../../src/devtools/tabs/MemoryTab.ts"],"sourcesContent":["/**\r\n * ÂÜÖÂ≠òÂàÜÊûêÊ†áÁ≠æÈ°µ\r\n * ÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®„ÄÅÂØπË±°ÂàÜÈÖç„ÄÅÂûÉÂúæÂõûÊî∂Á≠â\r\n */\r\n\r\nimport type { Editor } from '../../core/Editor'\r\nimport { createLogger } from '../../utils/logger'\r\n\r\nconst logger = createLogger('MemoryTab')\r\n\r\nexport interface MemorySnapshot {\r\n  timestamp: number\r\n  usedJSHeapSize: number\r\n  totalJSHeapSize: number\r\n  jsHeapSizeLimit: number\r\n  objects: ObjectAllocation[]\r\n}\r\n\r\nexport interface ObjectAllocation {\r\n  type: string\r\n  count: number\r\n  size: number\r\n  retained: number\r\n}\r\n\r\nexport class MemoryTab {\r\n  private editor: Editor\r\n  private container?: HTMLElement\r\n  private snapshots: MemorySnapshot[] = []\r\n  private currentSnapshot?: MemorySnapshot\r\n  private isActive = false\r\n  private updateInterval?: number\r\n  private chart?: any\r\n\r\n  constructor(options: { editor: Editor }) {\r\n    this.editor = options.editor\r\n  }\r\n\r\n  /**\r\n   * Ê∏≤ÊüìÊ†áÁ≠æÈ°µ\r\n   */\r\n  render(): HTMLElement {\r\n    this.container = document.createElement('div')\r\n    this.container.className = 'memory-tab'\r\n    this.container.style.cssText = `\r\n      padding: 20px;\r\n      height: 100%;\r\n      overflow-y: auto;\r\n    `\r\n\r\n    // Â∑•ÂÖ∑Ê†è\r\n    const toolbar = this.createToolbar()\r\n\r\n    // ÂÜÖÂ≠òÊ¶ÇËßà\r\n    const overview = this.createOverview()\r\n\r\n    // ÂÜÖÂ≠òÊó∂Èó¥Á∫ø\r\n    const timeline = this.createTimeline()\r\n\r\n    // ÂØπË±°ÂàÜÈÖçË°®\r\n    const allocations = this.createAllocationsTable()\r\n\r\n    this.container.appendChild(toolbar)\r\n    this.container.appendChild(overview)\r\n    this.container.appendChild(timeline)\r\n    this.container.appendChild(allocations)\r\n\r\n    return this.container\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫Â∑•ÂÖ∑Ê†è\r\n   */\r\n  private createToolbar(): HTMLElement {\r\n    const toolbar = document.createElement('div')\r\n    toolbar.className = 'memory-toolbar'\r\n    toolbar.style.cssText = `\r\n      display: flex;\r\n      gap: 10px;\r\n      margin-bottom: 20px;\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid #e0e0e0;\r\n    `\r\n\r\n    // Âø´ÁÖßÊåâÈíÆ\r\n    const snapshotBtn = document.createElement('button')\r\n    snapshotBtn.style.cssText = `\r\n      padding: 6px 12px;\r\n      background: #2196f3;\r\n      color: white;\r\n      border: none;\r\n      border-radius: 4px;\r\n      cursor: pointer;\r\n      font-size: 13px;\r\n    `\r\n    snapshotBtn.innerHTML = 'üì∏ ÊãçÊëÑÂø´ÁÖß'\r\n    snapshotBtn.onclick = () => this.takeSnapshot()\r\n\r\n    // ÊØîËæÉÊåâÈíÆ\r\n    const compareBtn = document.createElement('button')\r\n    compareBtn.style.cssText = snapshotBtn.style.cssText\r\n    compareBtn.style.background = '#4caf50'\r\n    compareBtn.innerHTML = 'üîç ÊØîËæÉÂø´ÁÖß'\r\n    compareBtn.onclick = () => this.compareSnapshots()\r\n\r\n    // Ê∏ÖÁ©∫ÊåâÈíÆ\r\n    const clearBtn = document.createElement('button')\r\n    clearBtn.style.cssText = snapshotBtn.style.cssText\r\n    clearBtn.style.background = '#666'\r\n    clearBtn.innerHTML = 'üóëÔ∏è Ê∏ÖÁ©∫'\r\n    clearBtn.onclick = () => this.clearSnapshots()\r\n\r\n    // GCÊåâÈíÆ\r\n    const gcBtn = document.createElement('button')\r\n    gcBtn.style.cssText = snapshotBtn.style.cssText\r\n    gcBtn.style.background = '#ff9800'\r\n    gcBtn.innerHTML = '‚ôªÔ∏è ÂûÉÂúæÂõûÊî∂'\r\n    gcBtn.onclick = () => this.triggerGC()\r\n\r\n    toolbar.appendChild(snapshotBtn)\r\n    toolbar.appendChild(compareBtn)\r\n    toolbar.appendChild(clearBtn)\r\n    toolbar.appendChild(gcBtn)\r\n\r\n    return toolbar\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫ÂÜÖÂ≠òÊ¶ÇËßà\r\n   */\r\n  private createOverview(): HTMLElement {\r\n    const overview = document.createElement('div')\r\n    overview.className = 'memory-overview'\r\n    overview.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      padding: 20px;\r\n      margin-bottom: 20px;\r\n    `\r\n\r\n    overview.innerHTML = `\r\n      <h3 style=\"margin: 0 0 15px 0; font-size: 16px;\">ÂÜÖÂ≠òÊ¶ÇËßà</h3>\r\n      <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;\">\r\n        <div class=\"memory-stat\">\r\n          <div style=\"font-size: 12px; color: #999; margin-bottom: 5px;\">Â∑≤‰ΩøÁî®</div>\r\n          <div style=\"font-size: 24px; font-weight: bold; color: #2196f3;\" id=\"used-memory\">0 MB</div>\r\n          <div style=\"font-size: 11px; color: #666; margin-top: 5px;\" id=\"used-percent\">0%</div>\r\n        </div>\r\n        <div class=\"memory-stat\">\r\n          <div style=\"font-size: 12px; color: #999; margin-bottom: 5px;\">ÊÄªÂàÜÈÖç</div>\r\n          <div style=\"font-size: 24px; font-weight: bold; color: #4caf50;\" id=\"total-memory\">0 MB</div>\r\n          <div style=\"font-size: 11px; color: #666; margin-top: 5px;\" id=\"total-percent\">0%</div>\r\n        </div>\r\n        <div class=\"memory-stat\">\r\n          <div style=\"font-size: 12px; color: #999; margin-bottom: 5px;\">ÈôêÂà∂</div>\r\n          <div style=\"font-size: 24px; font-weight: bold; color: #ff9800;\" id=\"limit-memory\">0 GB</div>\r\n          <div style=\"font-size: 11px; color: #666; margin-top: 5px;\">ÊúÄÂ§ßÂèØÁî®</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div style=\"margin-top: 20px;\">\r\n        <div style=\"background: #f0f0f0; height: 20px; border-radius: 10px; overflow: hidden;\">\r\n          <div id=\"memory-bar\" style=\"\r\n            height: 100%;\r\n            background: linear-gradient(90deg, #2196f3, #4caf50);\r\n            width: 0%;\r\n            transition: width 0.3s ease-out;\r\n          \"></div>\r\n        </div>\r\n      </div>\r\n    `\r\n\r\n    return overview\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫ÂÜÖÂ≠òÊó∂Èó¥Á∫ø\r\n   */\r\n  private createTimeline(): HTMLElement {\r\n    const timeline = document.createElement('div')\r\n    timeline.className = 'memory-timeline'\r\n    timeline.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      padding: 20px;\r\n      margin-bottom: 20px;\r\n    `\r\n\r\n    timeline.innerHTML = `\r\n      <h3 style=\"margin: 0 0 15px 0; font-size: 16px;\">ÂÜÖÂ≠òÊó∂Èó¥Á∫ø</h3>\r\n      <canvas id=\"memory-timeline-chart\" width=\"600\" height=\"200\" style=\"width: 100%; height: 200px;\"></canvas>\r\n    `\r\n\r\n    return timeline\r\n  }\r\n\r\n  /**\r\n   * ÂàõÂª∫ÂØπË±°ÂàÜÈÖçË°®\r\n   */\r\n  private createAllocationsTable(): HTMLElement {\r\n    const container = document.createElement('div')\r\n    container.className = 'allocations-container'\r\n    container.style.cssText = `\r\n      background: white;\r\n      border: 1px solid #e0e0e0;\r\n      border-radius: 8px;\r\n      padding: 20px;\r\n    `\r\n\r\n    container.innerHTML = `\r\n      <h3 style=\"margin: 0 0 15px 0; font-size: 16px;\">ÂØπË±°ÂàÜÈÖç</h3>\r\n      <div style=\"max-height: 300px; overflow-y: auto;\">\r\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 13px;\">\r\n          <thead>\r\n            <tr style=\"background: #f5f5f5;\">\r\n              <th style=\"padding: 10px; text-align: left; border-bottom: 2px solid #e0e0e0;\">Á±ªÂûã</th>\r\n              <th style=\"padding: 10px; text-align: right; border-bottom: 2px solid #e0e0e0;\">Êï∞Èáè</th>\r\n              <th style=\"padding: 10px; text-align: right; border-bottom: 2px solid #e0e0e0;\">Â§ßÂ∞è</th>\r\n              <th style=\"padding: 10px; text-align: right; border-bottom: 2px solid #e0e0e0;\">‰øùÁïô</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody id=\"allocations-tbody\">\r\n            <tr>\r\n              <td colspan=\"4\" style=\"padding: 20px; text-align: center; color: #999;\">\r\n                ÁÇπÂáª\"ÊãçÊëÑÂø´ÁÖß\"Êü•ÁúãÂØπË±°ÂàÜÈÖç\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    `\r\n\r\n    return container\r\n  }\r\n\r\n  /**\r\n   * ÊøÄÊ¥ªÊ†áÁ≠æÈ°µ\r\n   */\r\n  activate(): void {\r\n    this.isActive = true\r\n    logger.debug('Memory tab activated')\r\n\r\n    // ÂàùÂßãÂåñÂõæË°®\r\n    this.initializeChart()\r\n\r\n    // ÂºÄÂßãÊõ¥Êñ∞\r\n    this.startUpdating()\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÁî®Ê†áÁ≠æÈ°µ\r\n   */\r\n  deactivate(): void {\r\n    this.isActive = false\r\n    logger.debug('Memory tab deactivated')\r\n\r\n    // ÂÅúÊ≠¢Êõ¥Êñ∞\r\n    this.stopUpdating()\r\n  }\r\n\r\n  /**\r\n   * ÂàùÂßãÂåñÂõæË°®\r\n   */\r\n  private initializeChart(): void {\r\n    const canvas = this.container?.querySelector('#memory-timeline-chart') as HTMLCanvasElement\r\n    if (canvas)\r\n      this.chart = new MemoryChart(canvas)\r\n  }\r\n\r\n  /**\r\n   * ÂºÄÂßãÊõ¥Êñ∞\r\n   */\r\n  private startUpdating(): void {\r\n    this.update()\r\n    this.updateInterval = window.setInterval(() => {\r\n      this.update()\r\n    }, 2000)\r\n  }\r\n\r\n  /**\r\n   * ÂÅúÊ≠¢Êõ¥Êñ∞\r\n   */\r\n  private stopUpdating(): void {\r\n    if (this.updateInterval) {\r\n      clearInterval(this.updateInterval)\r\n      this.updateInterval = undefined\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÂÜÖÂ≠ò‰ø°ÊÅØ\r\n   */\r\n  update(): void {\r\n    if (!this.isActive)\r\n      return\r\n\r\n    if (!performance.memory) {\r\n      logger.warn('Performance.memory not available')\r\n      return\r\n    }\r\n\r\n    const memory = performance.memory\r\n    const usedMB = Math.round(memory.usedJSHeapSize / 1024 / 1024)\r\n    const totalMB = Math.round(memory.totalJSHeapSize / 1024 / 1024)\r\n    const limitGB = (memory.jsHeapSizeLimit / 1024 / 1024 / 1024).toFixed(2)\r\n\r\n    // Êõ¥Êñ∞Ê¶ÇËßà\r\n    this.updateElement('#used-memory', `${usedMB} MB`)\r\n    this.updateElement('#used-percent', `${Math.round((memory.usedJSHeapSize / memory.totalJSHeapSize) * 100)}%`)\r\n    this.updateElement('#total-memory', `${totalMB} MB`)\r\n    this.updateElement('#total-percent', `${Math.round((memory.totalJSHeapSize / memory.jsHeapSizeLimit) * 100)}%`)\r\n    this.updateElement('#limit-memory', `${limitGB} GB`)\r\n\r\n    // Êõ¥Êñ∞ËøõÂ∫¶Êù°\r\n    const memoryBar = this.container?.querySelector('#memory-bar') as HTMLElement\r\n    if (memoryBar) {\r\n      const percent = (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100\r\n      memoryBar.style.width = `${percent}%`\r\n\r\n      // Ê†πÊçÆ‰ΩøÁî®ÁéáÊîπÂèòÈ¢úËâ≤\r\n      if (percent > 80)\r\n        memoryBar.style.background = 'linear-gradient(90deg, #ff4444, #ff6666)'\r\n      else if (percent > 60)\r\n        memoryBar.style.background = 'linear-gradient(90deg, #ff9800, #ffb74d)'\r\n      else\r\n        memoryBar.style.background = 'linear-gradient(90deg, #2196f3, #4caf50)'\r\n    }\r\n\r\n    // Êõ¥Êñ∞ÂõæË°®\r\n    this.chart?.addDataPoint({\r\n      used: usedMB,\r\n      total: totalMB,\r\n      timestamp: Date.now(),\r\n    })\r\n  }\r\n\r\n  /**\r\n   * ÊãçÊëÑÂÜÖÂ≠òÂø´ÁÖß\r\n   */\r\n  private async takeSnapshot(): Promise<void> {\r\n    logger.info('Taking memory snapshot')\r\n\r\n    const snapshot: MemorySnapshot = {\r\n      timestamp: Date.now(),\r\n      usedJSHeapSize: performance.memory?.usedJSHeapSize || 0,\r\n      totalJSHeapSize: performance.memory?.totalJSHeapSize || 0,\r\n      jsHeapSizeLimit: performance.memory?.jsHeapSizeLimit || 0,\r\n      objects: this.analyzeObjects(),\r\n    }\r\n\r\n    this.snapshots.push(snapshot)\r\n    this.currentSnapshot = snapshot\r\n\r\n    // Êõ¥Êñ∞ÂØπË±°ÂàÜÈÖçË°®\r\n    this.updateAllocationsTable(snapshot.objects)\r\n\r\n    // ÊòæÁ§∫ÊèêÁ§∫\r\n    this.showNotification('Âø´ÁÖßÂ∑≤ÂàõÂª∫', 'success')\r\n  }\r\n\r\n  /**\r\n   * ÂàÜÊûêÂØπË±°ÂàÜÈÖç\r\n   */\r\n  private analyzeObjects(): ObjectAllocation[] {\r\n    const allocations: ObjectAllocation[] = []\r\n\r\n    // ÂàÜÊûêDOMËäÇÁÇπ\r\n    const elements = document.querySelectorAll('*')\r\n    const elementsByTag = new Map<string, number>()\r\n\r\n    elements.forEach((el) => {\r\n      const tag = el.tagName.toLowerCase()\r\n      elementsByTag.set(tag, (elementsByTag.get(tag) || 0) + 1)\r\n    })\r\n\r\n    elementsByTag.forEach((count, tag) => {\r\n      allocations.push({\r\n        type: `DOM:${tag}`,\r\n        count,\r\n        size: count * 100, // ‰º∞ÁÆó\r\n        retained: count * 50,\r\n      })\r\n    })\r\n\r\n    // ÂàÜÊûêÁºñËæëÂô®ÂØπË±°\r\n    const editorSize = this.estimateObjectSize(this.editor)\r\n    allocations.push({\r\n      type: 'Editor',\r\n      count: 1,\r\n      size: editorSize,\r\n      retained: editorSize,\r\n    })\r\n\r\n    // ÊéíÂ∫è\r\n    allocations.sort((a, b) => b.size - a.size)\r\n\r\n    return allocations.slice(0, 20) // Âè™ËøîÂõûÂâç20‰∏™\r\n  }\r\n\r\n  /**\r\n   * ‰º∞ÁÆóÂØπË±°Â§ßÂ∞è\r\n   */\r\n  private estimateObjectSize(obj: any): number {\r\n    // ÁÆÄÂçïÁöÑÂ§ßÂ∞è‰º∞ÁÆó\r\n    const str = JSON.stringify(obj, null, 2)\r\n    return str ? str.length * 2 : 0 // UTF-16ÁºñÁ†Å\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÂØπË±°ÂàÜÈÖçË°®\r\n   */\r\n  private updateAllocationsTable(allocations: ObjectAllocation[]): void {\r\n    const tbody = this.container?.querySelector('#allocations-tbody')\r\n    if (!tbody)\r\n      return\r\n\r\n    tbody.innerHTML = allocations.map(alloc => `\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #f0f0f0;\">\r\n          <span style=\"font-family: monospace; font-size: 12px;\">${alloc.type}</span>\r\n        </td>\r\n        <td style=\"padding: 8px; text-align: right; border-bottom: 1px solid #f0f0f0;\">\r\n          ${alloc.count.toLocaleString()}\r\n        </td>\r\n        <td style=\"padding: 8px; text-align: right; border-bottom: 1px solid #f0f0f0;\">\r\n          ${this.formatBytes(alloc.size)}\r\n        </td>\r\n        <td style=\"padding: 8px; text-align: right; border-bottom: 1px solid #f0f0f0;\">\r\n          ${this.formatBytes(alloc.retained)}\r\n        </td>\r\n      </tr>\r\n    `).join('')\r\n  }\r\n\r\n  /**\r\n   * ÊØîËæÉÂø´ÁÖß\r\n   */\r\n  private compareSnapshots(): void {\r\n    if (this.snapshots.length < 2) {\r\n      this.showNotification('ÈúÄË¶ÅËá≥Â∞ë2‰∏™Âø´ÁÖßËøõË°åÊØîËæÉ', 'warning')\r\n      return\r\n    }\r\n\r\n    // TODO: ÂÆûÁé∞Âø´ÁÖßÊØîËæÉÂäüËÉΩ\r\n    logger.info('Comparing snapshots')\r\n  }\r\n\r\n  /**\r\n   * Ê∏ÖÁ©∫Âø´ÁÖß\r\n   */\r\n  private clearSnapshots(): void {\r\n    this.snapshots = []\r\n    this.currentSnapshot = undefined\r\n\r\n    const tbody = this.container?.querySelector('#allocations-tbody')\r\n    if (tbody) {\r\n      tbody.innerHTML = `\r\n        <tr>\r\n          <td colspan=\"4\" style=\"padding: 20px; text-align: center; color: #999;\">\r\n            ÁÇπÂáª\"ÊãçÊëÑÂø´ÁÖß\"Êü•ÁúãÂØπË±°ÂàÜÈÖç\r\n          </td>\r\n        </tr>\r\n      `\r\n    }\r\n\r\n    this.showNotification('Âø´ÁÖßÂ∑≤Ê∏ÖÁ©∫', 'info')\r\n  }\r\n\r\n  /**\r\n   * Ëß¶ÂèëÂûÉÂúæÂõûÊî∂\r\n   */\r\n  private triggerGC(): void {\r\n    if ((window as any).gc) {\r\n      (window as any).gc()\r\n      this.showNotification('ÂûÉÂúæÂõûÊî∂Â∑≤Ëß¶Âèë', 'success')\r\n\r\n      // Âª∂ËøüÊõ¥Êñ∞ÊòæÁ§∫\r\n      setTimeout(() => {\r\n        this.update()\r\n      }, 500)\r\n    }\r\n    else {\r\n      this.showNotification('ÂûÉÂúæÂõûÊî∂‰∏çÂèØÁî®ÔºåËØ∑‰ΩøÁî® --expose-gc Ê†áÂøóÂêØÂä®Chrome', 'error')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ê†ºÂºèÂåñÂ≠óËäÇÊï∞\r\n   */\r\n  private formatBytes(bytes: number): string {\r\n    if (bytes < 1024)\r\n      return `${bytes} B`\r\n    if (bytes < 1024 * 1024)\r\n      return `${(bytes / 1024).toFixed(2)} KB`\r\n    if (bytes < 1024 * 1024 * 1024)\r\n      return `${(bytes / 1024 / 1024).toFixed(2)} MB`\r\n    return `${(bytes / 1024 / 1024 / 1024).toFixed(2)} GB`\r\n  }\r\n\r\n  /**\r\n   * Êõ¥Êñ∞ÂÖÉÁ¥†ÂÜÖÂÆπ\r\n   */\r\n  private updateElement(selector: string, content: string): void {\r\n    const element = this.container?.querySelector(selector)\r\n    if (element)\r\n      element.textContent = content\r\n  }\r\n\r\n  /**\r\n   * ÊòæÁ§∫ÈÄöÁü•\r\n   */\r\n  private showNotification(message: string, type: 'success' | 'warning' | 'error' | 'info' = 'info'): void {\r\n    // TODO: ÂÆûÁé∞ÈÄöÁü•ÂäüËÉΩ\r\n    logger.info(`[${type}] ${message}`)\r\n  }\r\n\r\n  /**\r\n   * ÈîÄÊØÅ\r\n   */\r\n  destroy(): void {\r\n    this.stopUpdating()\r\n    this.container = undefined\r\n  }\r\n}\r\n\r\n/**\r\n * ÂÜÖÂ≠òÂõæË°®\r\n */\r\nclass MemoryChart {\r\n  private ctx: CanvasRenderingContext2D\r\n  private data: Array<{ used: number, total: number, timestamp: number }> = []\r\n  private maxPoints = 60\r\n\r\n  constructor(canvas: HTMLCanvasElement) {\r\n    this.ctx = canvas.getContext('2d')!\r\n\r\n    // ËÆæÁΩÆÁîªÂ∏ÉÂ∞∫ÂØ∏\r\n    const rect = canvas.getBoundingClientRect()\r\n    canvas.width = rect.width * window.devicePixelRatio\r\n    canvas.height = rect.height * window.devicePixelRatio\r\n    this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio)\r\n\r\n    this.draw()\r\n  }\r\n\r\n  addDataPoint(point: { used: number, total: number, timestamp: number }): void {\r\n    this.data.push(point)\r\n    if (this.data.length > this.maxPoints)\r\n      this.data.shift()\r\n\r\n    this.draw()\r\n  }\r\n\r\n  private draw(): void {\r\n    const { width, height } = this.ctx.canvas\r\n    const actualWidth = width / window.devicePixelRatio\r\n    const actualHeight = height / window.devicePixelRatio\r\n\r\n    // Ê∏ÖÁ©∫ÁîªÂ∏É\r\n    this.ctx.clearRect(0, 0, actualWidth, actualHeight)\r\n\r\n    // ÁªòÂà∂ËÉåÊôØÁΩëÊ†º\r\n    this.drawGrid(actualWidth, actualHeight)\r\n\r\n    if (this.data.length < 2)\r\n      return\r\n\r\n    // ÊâæÂà∞ÊúÄÂ§ßÂÄº\r\n    const maxValue = Math.max(...this.data.map(d => d.total))\r\n    const scale = actualHeight / (maxValue * 1.2) // Áïô20%Á©∫Èó¥\r\n\r\n    // ÁªòÂà∂ÊÄªÂÜÖÂ≠òÁ∫ø\r\n    this.drawLine(\r\n      this.data.map(d => d.total),\r\n      scale,\r\n      actualWidth,\r\n      actualHeight,\r\n      '#4caf50',\r\n      'rgba(76, 175, 80, 0.2)',\r\n    )\r\n\r\n    // ÁªòÂà∂Â∑≤‰ΩøÁî®ÂÜÖÂ≠òÁ∫ø\r\n    this.drawLine(\r\n      this.data.map(d => d.used),\r\n      scale,\r\n      actualWidth,\r\n      actualHeight,\r\n      '#2196f3',\r\n      'rgba(33, 150, 243, 0.2)',\r\n    )\r\n  }\r\n\r\n  private drawGrid(width: number, height: number): void {\r\n    this.ctx.strokeStyle = '#f0f0f0'\r\n    this.ctx.lineWidth = 1\r\n\r\n    // Ê®™Á∫ø\r\n    for (let i = 0; i <= 5; i++) {\r\n      const y = (height / 5) * i\r\n      this.ctx.beginPath()\r\n      this.ctx.moveTo(0, y)\r\n      this.ctx.lineTo(width, y)\r\n      this.ctx.stroke()\r\n    }\r\n  }\r\n\r\n  private drawLine(\r\n    data: number[],\r\n    scale: number,\r\n    width: number,\r\n    height: number,\r\n    lineColor: string,\r\n    fillColor: string,\r\n  ): void {\r\n    const stepX = width / (this.maxPoints - 1)\r\n\r\n    // Â°´ÂÖÖÂå∫Âüü\r\n    this.ctx.fillStyle = fillColor\r\n    this.ctx.beginPath()\r\n    this.ctx.moveTo(0, height)\r\n\r\n    data.forEach((value, index) => {\r\n      const x = index * stepX\r\n      const y = height - (value * scale)\r\n      this.ctx.lineTo(x, y)\r\n    })\r\n\r\n    this.ctx.lineTo((data.length - 1) * stepX, height)\r\n    this.ctx.closePath()\r\n    this.ctx.fill()\r\n\r\n    // ÁªòÂà∂Á∫øÊù°\r\n    this.ctx.strokeStyle = lineColor\r\n    this.ctx.lineWidth = 2\r\n    this.ctx.beginPath()\r\n\r\n    data.forEach((value, index) => {\r\n      const x = index * stepX\r\n      const y = height - (value * scale)\r\n\r\n      if (index === 0)\r\n        this.ctx.moveTo(x, y)\r\n      else\r\n        this.ctx.lineTo(x, y)\r\n    })\r\n\r\n    this.ctx.stroke()\r\n  }\r\n}\r\n"],"names":["logger","createLogger","MemoryTab","constructor","options","snapshots","isActive","editor","render","container","document","createElement","className","style","cssText","toolbar","createToolbar","overview","createOverview","timeline","createTimeline","allocations","createAllocationsTable","appendChild","snapshotBtn","innerHTML","onclick","takeSnapshot","compareBtn","background","compareSnapshots","clearBtn","clearSnapshots","gcBtn","triggerGC","activate","debug","initializeChart","startUpdating","deactivate","stopUpdating","canvas","querySelector","chart","MemoryChart","update","updateInterval","window","setInterval","clearInterval","undefined","performance","memory","warn","usedMB","Math","round","usedJSHeapSize","totalMB","totalJSHeapSize","limitGB","jsHeapSizeLimit","toFixed","updateElement","memoryBar","percent","width","addDataPoint","used","total","timestamp","Date","now","info","snapshot","objects","analyzeObjects","push","currentSnapshot","updateAllocationsTable","showNotification","elements","querySelectorAll","elementsByTag","Map","forEach","el","tag","tagName","toLowerCase","set","get","count","type","size","retained","editorSize","estimateObjectSize","sort","a","b","slice","obj","str","JSON","stringify","length","tbody","map","alloc","toLocaleString","formatBytes","join","gc","setTimeout","bytes","selector","content","element","textContent","message","destroy","data","maxPoints","ctx","getContext","rect","getBoundingClientRect","devicePixelRatio","height","scale","draw","point","shift","actualWidth","actualHeight","clearRect","drawGrid","maxValue","max","d","drawLine","strokeStyle","lineWidth","i","y","beginPath","moveTo","lineTo","stroke","lineColor","fillColor","stepX","fillStyle","value","index","x","closePath","fill"],"mappings":"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"}