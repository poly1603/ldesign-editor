{"version":3,"file":"useEditor.js","sources":["../../src/composables/useEditor.ts"],"sourcesContent":["/**\r\n * useEditor composable\r\n * 在 Vue 组件中使用编辑器的组合式函数\r\n */\r\n\r\nimport { ref, onMounted, onUnmounted, type Ref } from 'vue'\r\nimport { Editor, type EditorOptions } from '@ldesign/editor-core'\r\n\r\nexport interface UseEditorOptions extends EditorOptions {\r\n  /** 容器元素或选择器 */\r\n  container?: HTMLElement | string\r\n  /** 是否自动挂载 */\r\n  autoMount?: boolean\r\n}\r\n\r\nexport interface UseEditorReturn {\r\n  /** 编辑器实例 */\r\n  editor: Ref<Editor | null>\r\n  /** 编辑器内容 */\r\n  content: Ref<string>\r\n  /** 是否准备就绪 */\r\n  ready: Ref<boolean>\r\n  /** 获取HTML内容 */\r\n  getHTML: () => string\r\n  /** 设置HTML内容 */\r\n  setHTML: (content: string) => void\r\n  /** 插入HTML */\r\n  insertHTML: (html: string) => void\r\n  /** 聚焦编辑器 */\r\n  focus: () => void\r\n  /** 销毁编辑器 */\r\n  destroy: () => void\r\n}\r\n\r\n/**\r\n * 使用编辑器\r\n * \r\n * @param options - 编辑器配置选项\r\n * @returns 编辑器实例和辅助方法\r\n * \r\n * @example\r\n * ```typescript\r\n * import { useEditor } from '@ldesign/editor-vue'\r\n * \r\n * const { editor, content, ready, setContent } = useEditor({\r\n *   content: '<p>Hello</p>',\r\n *   placeholder: '开始输入...',\r\n *   onChange: (html) => {\r\n *     console.log('内容变化:', html)\r\n *   }\r\n * })\r\n * \r\n * // 在 onMounted 中挂载\r\n * onMounted(() => {\r\n *   editor.value?.mount('#editor')\r\n * })\r\n * ```\r\n */\r\nexport function useEditor(options: UseEditorOptions = {}): UseEditorReturn {\r\n  const editor = ref<Editor | null>(null)\r\n  const content = ref<string>(typeof options.content === 'string' ? options.content : '')\r\n  const ready = ref(false)\r\n\r\n  onMounted(() => {\r\n    // 创建编辑器实例\r\n    editor.value = new Editor({\r\n      ...options,\r\n      onChange: (html: string) => {\r\n        content.value = html\r\n        options.onChange?.(html)\r\n      }\r\n    })\r\n\r\n    // 自动挂载\r\n    if (options.autoMount !== false && options.container) {\r\n      editor.value.mount(options.container)\r\n      ready.value = true\r\n    }\r\n  })\r\n\r\n  onUnmounted(() => {\r\n    destroy()\r\n  })\r\n\r\n  /**\r\n   * 获取HTML内容\r\n   */\r\n  const getHTML = (): string => {\r\n    return editor.value?.getHTML?.() || content.value\r\n  }\r\n\r\n  /**\r\n   * 设置HTML内容\r\n   */\r\n  const setHTML = (newContent: string): void => {\r\n    content.value = newContent\r\n    editor.value?.setHTML?.(newContent)\r\n  }\r\n\r\n  /**\r\n   * 插入HTML\r\n   */\r\n  const insertHTML = (html: string): void => {\r\n    editor.value?.insertHTML?.(html)\r\n  }\r\n\r\n  /**\r\n   * 聚焦编辑器\r\n   */\r\n  const focus = (): void => {\r\n    editor.value?.focus?.()\r\n  }\r\n\r\n  /**\r\n   * 销毁编辑器\r\n   */\r\n  const destroy = (): void => {\r\n    editor.value?.destroy?.()\r\n    editor.value = null\r\n    ready.value = false\r\n  }\r\n\r\n  return {\r\n    editor,\r\n    content,\r\n    ready,\r\n    getHTML,\r\n    setHTML,\r\n    insertHTML,\r\n    focus,\r\n    destroy\r\n  }\r\n}\r\n\r\n\r\n"],"names":["useEditor","options","editor","ref","content","ready","onMounted","value","Editor","onChange","html","autoMount","container","mount","onUnmounted","destroy","getHTML","setHTML","newContent","insertHTML","focus"],"mappings":";;;;;;;;2GA0DO,SAASA,EAAUC,EAA4B,CAAA,EAAqB,CACzE,MAAMC,EAASC,EAAmB,IAAI,EAChCC,EAAUD,EAAY,OAAOF,EAAQG,SAAY,SAAWH,EAAQG,QAAU,EAAE,EAChFC,EAAQF,EAAI,EAAK,EAEvBG,EAAU,IAAM,CAEdJ,EAAOK,MAAQ,IAAIC,EAAO,CACxB,GAAGP,EACHQ,SAAWC,GAAiB,CAC1BN,EAAQG,MAAQG,EAChBT,EAAQQ,WAAWC,CAAI,CACzB,CACF,CAAC,EAGGT,EAAQU,YAAc,IAASV,EAAQW,YACzCV,EAAOK,MAAMM,MAAMZ,EAAQW,SAAS,EACpCP,EAAME,MAAQ,GAElB,CAAC,EAEDO,EAAY,IAAM,CAChBC,EAAAA,CACF,CAAC,EAKD,MAAMC,EAAUA,IACPd,EAAOK,OAAOS,aAAeZ,EAAQG,MAMxCU,EAAWC,GAA6B,CAC5Cd,EAAQG,MAAQW,EAChBhB,EAAOK,OAAOU,UAAUC,CAAU,CACpC,EAKMC,EAAcT,GAAuB,CACzCR,EAAOK,OAAOY,aAAaT,CAAI,CACjC,EAKMU,EAAQA,IAAY,CACxBlB,EAAOK,OAAOa,QAAAA,CAChB,EAKML,EAAUA,IAAY,CAC1Bb,EAAOK,OAAOQ,UAAAA,EACdb,EAAOK,MAAQ,KACfF,EAAME,MAAQ,EAChB,EAEA,MAAO,CACLL,OAAAA,EACAE,QAAAA,EACAC,MAAAA,EACAW,QAAAA,EACAC,QAAAA,EACAE,WAAAA,EACAC,MAAAA,EACAL,QAAAA,CACF,CACF"}